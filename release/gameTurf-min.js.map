{"version":3,"sources":["gameTurf.js"],"names":["e","exports","module","define","amd","f","window","global","self","gameTurf","t","n","r","s","o","u","a","require","i","Error","call","length","1","_dereq_","settings","input","theatre","world","ui","entityCollisionDetection","entityManager","worldCollisionDetection","wind","sound","Stats","game","stepTimeThen","stepTimeNow","stepTimeElapsed","timestep","maxFPS","isRunning","fps","framesThisSecond","lastFpsUpdate","showStats","init","_settings","Object","assign","statsSetup","theatreMovesWithPlayer","run","stageCanvas","draw","onblur","pause","onEscDown","closeMenu","playBackgroundSound","requestAnimationFrame","loop","openMenu","pauseBackgroundSound","Date","getTime","stats","begin","lastFrameTimeMs","numUpdateSteps","update","postUpdate","panic","preDraw","end","delta","step","clearStage","preShake","worldNeedsRedraw","clearWorld","postShake","setMode","domElement","style","position","left","top","document","body","appendChild","datGui","datGuiFolder","addFolder","remember","add","listen","../../vendors/stats.min","./../detectors/entityCollisionDetection","./../detectors/worldCollisionDetection","./../managers/entityManager","./../systems/wind","./../systems/world","./input","./settings","./sound","./theatre","./ui","2","keyPressed","onEscDownCallbacks","onEscUpCallbacks","shiftPressed","movementDirectionData","playerInteraction","vector","x","y","lastClickPosition","new","recordMouseMove","callback","push","onEscUp","addEventListener","keydown","keyup","stageCanvasMousedownHandler","stageCanvasMousemoveHandler","stageCanvasMouseupHandler","event","keyCode","shiftKey","evt","offsetX","offsetY","adjustPositionToStage","getPlayerMovementDirection","3","vectorSubtract","vector1","vector2","4","tileSize","datGuiIsOn","physicsDebugMode","debugWorldCollisions","soundEngineOn","allowBackgroundMusic","effectMusicVolume","effects","backgroundSong","src","undefined","volume","5","Howl","forEach","effect","addEffect","id","name","file","createEffect","isPlaying","howl","onend","play","onlyIfNotPlaying","playEffect","../../vendors/howler.min","6","stage","gridCanvas","grid","backdropCanvas","backdrop","foregroundCanvas","foreground","scale","canvasBoxLeft","canvasBoxTop","canvasBoxRight","canvasBoxBottom","shakeDuration","shakeStartTime","allowScreenShake","screenShakeMagnitude","useResolutionDivider","resolutionDivider","movesWithPlayer","currentTranslateX","currentTranslateY","canvasHeight","innerHeight","canvasWidth","innerWidth","getElementById","getContext","waterCanvas","width","height","resize","setSize","canvas","className","transformOrigin","transform","setScale","clearRect","clearGrid","drawGrids","drawGrid","now","save","dx","Math","random","dy","translate","restore","startShake","resetCanvasTransformation","setTransform","setCanvasTransformation","lastPhysics","widthHalf","heightHalf","posX","posY","playerUpdate","physics","lineWidth","gap","color","beginPath","moveTo","lineTo","strokeStyle","stroke","drawTriangleFromCenter","isOutsideOfCanvas","halfWidth","halfHeight","floor","fillStyle","fill","drawTriangleFromCenterUpsideDown","drawSquareFromCenter","fillRect","drawCurvedSquareFromCenter","offset","quadraticCurveTo","drawBezierCurvedSquareFromCenter","divider","notTop","notRight","notBottom","notLeft","bezierCurveTo","drawSquareFromLeftTopCorner","size","drawCircle","arc","PI","drawLine","drawLineWithVector","drawPath","linePositions","startIndex","maxLength","positionForLine","positionIndex","drawMultipleLines","lines","lineStartX","lineStartY","lineEndX","lineEndY","right","bottom","7","menu","continueBtn","bubbleList","dat","GUI","continueGameCallback","output","pointerEvents","zIndex","timeElapsed","bubble","time","element","remove","death","setBubblePosition","filter","showBubble","text","createElement","innerHTML","classList","lineHeight","backgroundColor","textAlign","borderRadius","8","util","vectorToDegree","vectorToRadiant","atan2","vectorLength","sqrt","pow","vectorDistanz","scaleVectorBy","value","shrinkVectorToLength","newLength","setVectorToLengthOne","getVectorAngleDegree","moveRadiant","sin","cos","getPositionByDegree","degree","radius","round","9","entity","entityCollisions","visibleEntities","entityId","entities","checkEntities","checkEntityId","checkEntity","collsitionDetectionOfTwoEntities","Id","calculateEntitiesCollisionReaction","objectCollision","z","setObjectCollision","entity1","entity2","newEntity1VelX","velocity","mass","newEntity1VelY","newEntity2VelX","newEntity2VelY","setVelocity","entity1HitBox","getHitBox","entity2itBox","Left","Right","Top","Bottom","isEntityCollidingWithOtherEntites","10","tilesHelper","collsitions","checkLines","collsitionDetection","mapWithTileTypes","worldWith","wolrdHeight","hitbox","calculateNeahrestTileWalls","centerPosition","colide","tileNr","neahrestTileWalls","tileWallNr","calculateWallCollsitionDenfung","wall","points","hitboxPoint","hitboxPointFuturePosition","calculateFuturePositionOf","checkLineIntersectionFast","debugCollisionLine","wallIsLeft","wallIsRight","wallIsUp","wallIsDown","isBounce","b","c","d","p","q","debugLine","det","lambda","gamma","./../core/settings","./../core/sound","./../core/theatre","./../helpers/physicsHelper","./../helpers/tilesHelper","11","config","face","defaultFace","currentFace","faceExpressionDuration","faceExpressionStartTime","positions","leftEyePosition","rightEyePosition","mouthPosition","eyeSize","mouthCloseSize","mouthOpenSize","lookDirectionAngle","drawNoramlFace","addToDatGuiFolder","folder","faceFolder","isInteracting","collsition","SetSurpiseFace","isMoving","SetFaceLookDown","SetFaceLookTop","SetFaceLookRight","SetFaceLookLeft","setNoramlFaceOpenEyes","drawSurpiseFace","drawFaceLookLeft","drawFaceLookRight","drawFaceLookTop","drawFaceLookDown","drawNoramlFaceOpenEyes","drawFaceLook","shake","./../core/util","12","canInteract","onInteraction","drawHighlightBox","13","tempPhysics","lastPositions","lastTimeSet","setTimeDelay","lastEntityIndex","onlyUpdateIfMoving","shouldDrawLine","shouldDrawBodies","g","lastPositionsFolder","clear","drawBodies","14","physicsHelper","speed","runSpeed","isFrictionless","frictionMagnitude","canWorldColide","angle","maxVelocity","hitBox","currentSpeed","createHitBox","physicsFolder","calculateFriction","lowerVelocityTo","inputUpdate","addVelocity","entityHitBox","objectIsLeft","objectIsRight","objectIsUp","objectIsDown","calculateVelocityForTime","drawDebugInfo","valueX","valueY","calculateSpeed","./../core/ui","15","math","interaction","./core/game","./core/input","./core/math","./core/settings","./core/sound","./core/theatre","./core/ui","./core/util","./detectors/entityCollisionDetection","./entityPlugins/face","./entityPlugins/interaction","./entityPlugins/lastPositions","./entityPlugins/physics","./managers/entityManager","./systems/wind","./systems/world","16","velocityDirection","17","tileHelper","tileWalls","createdTime","grassHalmPositions","offscreenCanvas","currentDialation","createOffscreenCanvas","canvasElement","calculateMapWithTileTypes","map","arrayPosition","val","tileArrayPositionX","tileArrayPositionY","addTileWalls","wallType","walls","tileLeftTopPosition","tileRightTopPosition","tileRightBottomPosition","tileLeftBottomosition","calculateCurrentDialation","linearNormalizeTimeSegments","drawTiles","mintileArrayPositionX","mintileArrayPositionY","maxtileArrayPositionX","maxtileArrayPositionY","tilePosition","clearOffscreenCanvas","drawOffscreenGrass","tiletype","tileWidth","tileHeight","drawGrass","grassHeight","drawImage","drawOffscreenGrassVariation","quadraticNormalizeTimeSegments","count","grassHalmPosition","canvasObj","18","QuadTree","tree","nextIndex","retrieveInBounds","insert","getNeahrestEntity","maxRange","neahrestEnitty","neahrestEnittyDistance","Number","MAX_SAFE_INTEGER","distanceVector","checkDistance","../../vendors/QuadTree","../core/theatre","../core/util","19","Physics","LastPositions","windParticles","WindParticle","type","isAlive","lifeTime","birth","windDirection","windSpeed","currentLifeTime","currentLifeTimeNormal","./../entityPlugins/lastPositions","./../entityPlugins/physics","20","WindParticleFactory","maxAliveWindPartiles","influenceEntityPhysic","moveDirectionVector","./WindParticleFactory","21","22","bounds","pointQuad","maxDepth","maxChildren","node","Node","BoundsNode","this","root","depth","_bounds","children","nodes","_maxChildren","_maxDepth","_depth","_stuckChildren","prototype","item","Array","len","retrieve","slice","treeResult","_filterResults","filteredResult","_isBoundOverlappingBound","_isPointInsideBounds","point","b1","b2","_classConstructor","TOP_LEFT","TOP_RIGHT","BOTTOM_LEFT","BOTTOM_RIGHT","index","_findIndex","subdivide","result","collidesWith","concat","bx","by","b_w_h","b_h_h","bx_b_w_h","by_b_h_h","_out","getChildren","out","apply","23","AudioContext","webkitAudioContext","Audio","createGain","createGainNode","gain","connect","destination","_codecs","_howls","_muted","_volume","iOSAutoEnable","noAudio","usingWebAudio","ctx","_setupCodecs","parseFloat","_webAudio","_getSoundIds","_soundById","_node","mute","muted","codecs","canPlayType","replace","test","navigator","userAgent","mp3","mpeg","opus","ogg","wav","aac","m4a","mp4","weba","webm","_enableiOSAudio","_iOSEnabled","createBuffer","createBufferSource","buffer","start","noteOn","setTimeout","playbackState","PLAYING_STATE","FINISHED_STATE","removeEventListener","console","error","_autoplay","autoplay","_ext","ext","_html5","html5","_loop","_pool","pool","_preload","preload","_rate","rate","_sprite","sprite","_src","_duration","_loaded","_sounds","_endTimers","_onend","fn","_onfaded","onfaded","_onload","onload","_onloaderror","onloaderror","_onpause","onpause","_onplay","onplay","_onstop","onstop","load","exec","split","toLowerCase","_emit","arguments","_paused","_ended","_id","_inactiveSound","once","_","_seek","l","abs","bind","_start","_stop","_refreshBuffer","setValueAtTime","currentTime","_playStart","bufferSource","noteGrainOn","_clearTimer","playbackRate","readyState","isCocoonJS","m","seek","stop","noteOff","isNaN","duration","indexOf","parseInt","fade","linearRampToValueAtTime","ceil","setInterval","max","min","clearInterval","playing","unload","_errorFn","_loadFn","splice","on","off","clearTimeout","_drain","reset","disconnect","_panner","loopStart","loopEnd","_parent","create","paused","_errorListener","_loadListener","code","keys","__default","atob","String","charAt","fromCharCode","Uint8Array","charCodeAt","XMLHttpRequest","open","responseType","response","onerror","send","decodeAudioData","Howler","HowlerGlobal","Sound","_pos","_orientation","_velocity","_listenerAttr","dopplerFactor","speedOfSound","pos","listener","setPosition","orientation","setOrientation","listenerAttr","_pannerAttr","coneInnerAngle","coneOUterAngle","coneOuterGain","distanceModel","maxDistance","panningModel","refDistance","rolloffFactor","pannerAttr","_coneInnerAngle","_coneOUterAngle","_coneOuterGain","_distanceModel","_maxDistance","_panningModel","_refDistance","_rolloffFactor","createPanner","24","cssText","toUpperCase","display","firstChild","performance","k","preventDefault","Infinity","v","A","B","w","C","D","memory","h","E","F","REVISION","textContent","usedJSHeapSize","jsHeapSizeLimit"],"mappings":"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","file":"gameTurf-min.js","sourcesContent":["!function(e){if(\"object\"==typeof exports)module.exports=e();else if(\"function\"==typeof define&&define.amd)define(e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.gameTurf=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error(\"Cannot find module '\"+o+\"'\")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n/**\r\n * game.js\r\n *\r\n * @package gameturfjs\r\n */\r\n\r\n(function() {\r\n\r\n/*global require, module */\r\n\r\nvar settings                  = _dereq_('./settings')\r\nvar input                     = _dereq_('./input')\r\nvar theatre                   = _dereq_('./theatre')\r\nvar world                     = _dereq_('./../systems/world')\r\nvar ui                        = _dereq_('./ui')\r\nvar entityCollisionDetection  = _dereq_('./../detectors/entityCollisionDetection')\r\nvar entityManager             = _dereq_('./../managers/entityManager')\r\nvar worldCollisionDetection   = _dereq_('./../detectors/worldCollisionDetection')\r\nvar wind                      = _dereq_('./../systems/wind')\r\nvar sound                     = _dereq_('./sound')\r\nvar Stats                     = _dereq_('../../vendors/stats.min')\r\n\r\n/**\r\n *  This is the heart of the game engine. It contains the functions to \r\n *  start and stop the engine, it beholds the powerful game loop!\r\n *\r\n *  @dev Maybe make access to these functions easer. Instead of\r\n *       GameTurf.game.init() make it GameTurf.init(). \r\n */ \r\nvar game = {\r\n\r\n    /**\r\n     *  Time of last step\r\n     *  @type {date}\r\n     */\r\n    stepTimeThen: 0\r\n\r\n    /**\r\n     *  Time of step\r\n     *  @type {date}\r\n     */\r\n  , stepTimeNow: 0\r\n\r\n    /**\r\n     *  Elapsed time since last step\r\n     *  @type {number}\r\n     */\r\n  , stepTimeElapsed: 0\r\n\r\n    /**\r\n     *  \r\n     *  @type {number}\r\n     */  \r\n  , timestep: 1000 / 60\r\n\r\n  , maxFPS: 60\r\n\r\n    /**\r\n     *  is engine running\r\n     *  @type {bool}\r\n     */\r\n  ,  isRunning              : false\r\n\r\n  ,  fps: 60\r\n  ,  framesThisSecond: 0\r\n  ,  lastFpsUpdate: 0\r\n\r\n    /**\r\n     *  \r\n     */\r\n  , showStats              : false\r\n\r\n    /**\r\n     *  \r\n     */\r\n  , init: function(_settings) {\r\n\r\n      settings = Object.assign(\r\n        settings,\r\n        _settings\r\n      )\r\n\r\n      if (game.showStats) game.statsSetup()\r\n\r\n      theatre.init(settings.theatreMovesWithPlayer)\r\n\r\n      sound.init()\r\n\r\n      ui.init(theatre, function(){\r\n        game.run()\r\n      })\r\n\r\n      input.init(theatre.stageCanvas)\r\n\r\n      if (!settings.theatreMovesWithPlayer) world.draw()\r\n\r\n      window.onblur = function () {\r\n        game.pause()\r\n      }\r\n\r\n      input.onEscDown(function() {\r\n        if (game.isRunning) game.pause()\r\n        else game.run()\r\n      })\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */\r\n  , run: function(){\r\n      game.isRunning = true\r\n      game.stepTimeElapsed = 0\r\n      game.stepTimeNow = 0\r\n      game.stepTimeThen = 0\r\n      ui.closeMenu()\r\n      sound.playBackgroundSound()\r\n      requestAnimationFrame(game.loop)\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */\r\n  , pause: function(){\r\n      ui.openMenu()\r\n      sound.pauseBackgroundSound()\r\n      game.isRunning = false\r\n      game.stepTimeElapsed = 0\r\n      game.stepTimeNow = 0\r\n      game.stepTimeThen = 0\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */\r\n  , loop: function(){\r\n      if (game.isRunning) {\r\n\r\n        game.stepTimeNow = new Date().getTime()\r\n\r\n\r\n        if (game.stepTimeThen !== 0) {\r\n          game.stepTimeElapsed \r\n            = game.stepTimeNow - game.stepTimeThen\r\n        }\r\n\r\n        if (game.showStats) game.stats.begin();\r\n\r\n        if (game.stepTimeElapsed  < game.lastFrameTimeMs + (1000 / game.maxFPS)) {\r\n            requestAnimationFrame(game.loop);\r\n            return;\r\n        }\r\n\r\n        if (game.stepTimeElapsed  > game.lastFpsUpdate + 1000) { // update every second\r\n          game.fps = 0.25 * game.framesThisSecond + (1 - 0.25) * game.fps; // compute the new FPS\r\n    \r\n          game.lastFpsUpdate = game.stepTimeElapsed;\r\n          game.framesThisSecond = 0;\r\n        }\r\n        game.framesThisSecond++;\r\n\r\n        var numUpdateSteps = 0;\r\n        while (game.stepTimeElapsed >= game.timestep) {\r\n          game.update(game.timestep)\r\n          game.postUpdate(game.timestep)\r\n          game.stepTimeElapsed -= game.timestep;\r\n\r\n          if (++numUpdateSteps >= 240) {\r\n            game.panic(); // fix things\r\n            break; // bail out\r\n          }\r\n        }\r\n\r\n        game.preDraw(game.timestep)\r\n        game.draw(game.timestep);\r\n\r\n        if (game.showStats) game.stats.end()\r\n\r\n        game.stepTimeThen = game.stepTimeNow \r\n\r\n        requestAnimationFrame(game.loop)\r\n      }\r\n    }\r\n\r\n  , panic: function() {\r\n        delta = 0; // discard the un-simulated time\r\n        // ... snap the player to the authoritative state\r\n    }\r\n\r\n  , step: function(){\r\n      game.update(game.timestep)\r\n      game.postUpdate(game.timestep)\r\n      game.preDraw(game.timestep)\r\n      game.draw(game.timestep);\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */\r\n  , update: function(delta){\r\n      wind.update(delta)\r\n      worldCollisionDetection.update(delta)\r\n      entityCollisionDetection.update(delta)\r\n      entityManager.update(delta)\r\n      ui.update(delta);\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */\r\n  , postUpdate: function(delta){\r\n      entityManager.postUpdate(delta)\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */\r\n  , preDraw:function(delta){\r\n     \r\n      theatre.clearStage()\r\n      entityManager.preDraw(delta)\r\n      theatre.preShake()\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */\r\n  , draw: function(delta){\r\n      entityManager.draw(delta)\r\n\r\n      if (settings.theatreMovesWithPlayer) world.draw(delta);\r\n\r\n      if (theatre.worldNeedsRedraw){\r\n        theatre.clearWorld()\r\n        world.draw(delta)\r\n        theatre.worldNeedsRedraw = false\r\n      }\r\n\r\n      worldCollisionDetection.draw(delta)\r\n      wind.draw(delta)\r\n      ui.draw(delta);\r\n      theatre.postShake()\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */\r\n  , statsSetup: function () {\r\n      game.stats = new Stats()\r\n      game.stats.setMode(2) // 0: fps, 1: ms, 2: mb\r\n\r\n      game.stats.domElement.style.position = 'absolute'\r\n      game.stats.domElement.style.left = '0px'\r\n      game.stats.domElement.style.top = '0px'\r\n\r\n      document.body.appendChild(game.stats.domElement)\r\n    }\r\n}\r\n\r\nif (ui.datGui) {\r\n  var datGuiFolder = ui.datGui.addFolder(\"Game\")\r\n  ui.datGui.remember(game)\r\n  datGuiFolder.add(game, \"stepTimeThen\").listen()\r\n  datGuiFolder.add(game, \"stepTimeNow\").listen()\r\n  datGuiFolder.add(game, \"stepTimeElapsed\").listen()\r\n  datGuiFolder.add(game, \"timestep\").listen()\r\n  datGuiFolder.add(game, \"maxFPS\").listen()\r\n  datGuiFolder.add(game, \"isRunning\").listen()\r\n  datGuiFolder.add(game, \"fps\").listen()\r\n  datGuiFolder.add(game, \"framesThisSecond\").listen()\r\n  datGuiFolder.add(game, \"lastFpsUpdate\").listen()\r\n  datGuiFolder.add(game, \"showStats\")\r\n}\r\n\r\nmodule.exports = game\r\n\r\n}());\r\n\n},{\"../../vendors/stats.min\":24,\"./../detectors/entityCollisionDetection\":9,\"./../detectors/worldCollisionDetection\":10,\"./../managers/entityManager\":18,\"./../systems/wind\":20,\"./../systems/world\":21,\"./input\":2,\"./settings\":4,\"./sound\":5,\"./theatre\":6,\"./ui\":7}],2:[function(_dereq_,module,exports){\n/**\r\n * input.js\r\n *\r\n * @package gameturfjs\r\n */\r\n\r\n(function() {\r\n\r\n/*global require, module */\r\n\r\nvar theatre = _dereq_('./theatre')\r\nvar ui      = _dereq_('./ui')\r\n\r\n/**\r\n *  \r\n */ \r\nvar input = {\r\n\r\n    /**\r\n     *  \r\n     */ \r\n    keyPressed            : []\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , onEscDownCallbacks    : []\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , onEscUpCallbacks      : []\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , shiftPressed          : false\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , movementDirectionData : {\r\n      playerInteraction : false\r\n    , isRunning         : false\r\n    , vector            : {\r\n        x: 0\r\n      , y: 0\r\n    }\r\n  }\r\n\r\n    /**\r\n     *  The position the user clicked on the map/stage.\r\n     * \r\n     *  @public (get)\r\n     *  @type {object} \r\n     *  {\r\n     *      x {number}   \r\n     *    , y {number}\r\n     *    , new {boolean}\r\n     *  }\r\n     */ \r\n  , lastClickPosition : {\r\n      new : false\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */\r\n  , recordMouseMove: false\r\n\r\n    /**\r\n     *  \r\n     */\r\n  , onEscDown: function(callback){\r\n      input.onEscDownCallbacks.push(callback)\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */   \r\n  , onEscUp: function(callback){\r\n      input.onEscUpCallbacks.push(callback)\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */   \r\n  , init: function(stageCanvas){\r\n      document.addEventListener('keydown', input.keydown)\r\n      document.addEventListener('keyup'  , input.keyup)\r\n\r\n      stageCanvas.addEventListener('mousedown', input.stageCanvasMousedownHandler, false)\r\n      stageCanvas.addEventListener('mousemove', input.stageCanvasMousemoveHandler, false)\r\n      stageCanvas.addEventListener('mouseup'  , input.stageCanvasMouseupHandler  , false)\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */  \r\n  , keydown: function(event){\r\n\r\n      input.keyPressed[event.keyCode] = true\r\n      input.shiftPressed              = event.shiftKey\r\n\r\n      if (event.keyCode == 27){\r\n        for (var i = input.onEscDownCallbacks.length - 1; i >= 0; i--) {\r\n          input.onEscDownCallbacks[i].call()\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */  \r\n  , keyup: function(event){\r\n\r\n      input.keyPressed[event.keyCode] = false\r\n      input.shiftPressed              = event.shiftKey\r\n\r\n      if (event.keyCode == 27){\r\n        for (var i = input.onEscUpCallbacks.length - 1; i >= 0; i--) {\r\n          input.onEscUpCallbacks[i].call()\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , stageCanvasMousedownHandler: function(evt) {\r\n      input.lastClickPosition.x   = evt.offsetX \r\n      input.lastClickPosition.y   = evt.offsetY\r\n      input.lastClickPosition.new = true\r\n      theatre.adjustPositionToStage(input.lastClickPosition)\r\n      input.recordMouseMove = true\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , stageCanvasMousemoveHandler: function(evt){\r\n      if (input.recordMouseMove) {\r\n        input.lastClickPosition.x   = evt.offsetX \r\n        input.lastClickPosition.y   = evt.offsetY\r\n        input.lastClickPosition.new = true\r\n        theatre.adjustPositionToStage(input.lastClickPosition)\r\n      }\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , stageCanvasMouseupHandler: function(evt) {\r\n      input.recordMouseMove = false\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , getPlayerMovementDirection: function(){\r\n\r\n      input.movementDirectionData.vector.x          = 0\r\n      input.movementDirectionData.vector.y          = 0\r\n      input.movementDirectionData.playerInteraction = false\r\n      input.movementDirectionData.isRunning         = input.shiftPressed\r\n\r\n      if (input.keyPressed[37]  // left\r\n        || input.keyPressed[65]){ // a\r\n        input.movementDirectionData.vector.x -= 1\r\n        input.movementDirectionData.playerInteraction = true\r\n      }\r\n\r\n      if (input.keyPressed[38]   // up\r\n        || input.keyPressed[87]){ // w\r\n        input.movementDirectionData.vector.y -= 1\r\n        input.movementDirectionData.playerInteraction = true\r\n      }\r\n\r\n      if (input.keyPressed[39]   // right\r\n        || input.keyPressed[68]){ // d\r\n\r\n        input.movementDirectionData.vector.x += 1\r\n        input.movementDirectionData.playerInteraction = true\r\n      }\r\n\r\n      if (input.keyPressed[40]   // down\r\n        || input.keyPressed[83]){ // s\r\n        input.movementDirectionData.vector.y += 1\r\n        input.movementDirectionData.playerInteraction = true\r\n      }\r\n\r\n      return input.movementDirectionData\r\n    }\r\n}\r\n\r\nif (ui.datGui) {\r\n  var datGuiFolder = ui.datGui.addFolder(\"Input\")\r\n  ui.datGui.remember(input)\r\n  datGuiFolder.add(input, \"shiftPressed\").listen()\r\n  datGuiFolder.add(input.movementDirectionData, \"playerInteraction\").listen()\r\n  datGuiFolder.add(input.movementDirectionData, \"isRunning\").listen()\r\n  datGuiFolder.add(input.movementDirectionData.vector, \"x\").listen()\r\n  datGuiFolder.add(input.movementDirectionData.vector, \"y\").listen()\r\n}\r\n\r\nmodule.exports = input\r\n\r\n}());\r\n\n},{\"./theatre\":6,\"./ui\":7}],3:[function(_dereq_,module,exports){\n/**\r\n * math.js\r\n *\r\n * @package gameturfjs\r\n */\r\n\r\n(function() {\r\n\r\n/*global module */\r\n  \r\n/**\r\n *  \r\n */ \r\nvar math = {\r\n    \r\n    /**\r\n     *  Subtracts a 2-dimensional vector from another vector.\r\n     */\r\n    vectorSubtract: function (vector1, vector2) {\r\n      return {\r\n        x: vector1.x - vector2.x\r\n      , y: vector1.y - vector2.y\r\n      }\r\n    }\r\n}\r\n\r\nmodule.exports =  math\r\n\r\n}());\r\n\n},{}],4:[function(_dereq_,module,exports){\n/**\r\n * settings.js\r\n *\r\n * @package gameturfjs\r\n */\r\n\r\n(function() {\r\n\r\n/*global module */\r\n\r\n/**\r\n *  \r\n */ \r\nmodule.exports = {\r\n\r\n    /**\r\n     *  \r\n     */ \r\n    tileSize              : 50\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , datGuiIsOn            : true\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , physicsDebugMode      : false\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , debugWorldCollisions  : false\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , soundEngineOn         : true\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , allowBackgroundMusic : false\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , effectMusicVolume     : .2\r\n\r\n    /**\r\n     *  \r\n     */\r\n  , theatreMovesWithPlayer : true\r\n\r\n    /**\r\n     *  \r\n     */\r\n  , effects : []\r\n\r\n    /**\r\n     *  \r\n     */\r\n  , backgroundSong: {\r\n      src: undefined,\r\n      volume: 1\r\n    }\r\n}\r\n\r\n}());\r\n\n},{}],5:[function(_dereq_,module,exports){\n/**\r\n * sound.js\r\n *\r\n * @package gameturfjs\r\n */\r\n\r\n(function() {\r\n\r\n/*global require, module */\r\n\r\nvar Howl = _dereq_('../../vendors/howler.min')\r\nvar settings = _dereq_('./settings')\r\nvar Howl = Howl.Howl;\r\n\r\n/**\r\n *  \r\n */ \r\nvar sound = {\r\n\r\n    /**\r\n     *  \r\n     */ \r\n    effects               : {}\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , backgroundSong        : undefined\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , init: function(){\r\n\r\n      if (settings.soundEngineOn) {\r\n\r\n        if (settings.effects) {\r\n          settings.effects.forEach(function(effect){\r\n            sound.addEffect(effect.id, effect.src , effect.volume)\r\n          })\r\n        }\r\n\r\n        if (settings.allowBackgroundMusic\r\n         && settings.backgroundSong.src) {\r\n         \r\n          sound.backgroundSong = new Howl({\r\n              src   : [settings.backgroundSong.src]\r\n            , loop  : true\r\n            , volume: settings.backgroundSong.volume\r\n          })\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , addEffect: function(name, file, volume){\r\n      sound.effects[name] = sound.createEffect(\r\n          file\r\n        , volume * settings.effectMusicVolume)\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , createEffect: function(file, volume){\r\n\r\n      var effect = {\r\n          isPlaying : false\r\n        , howl      : new Howl({\r\n            src   : [file]\r\n          , volume: volume\r\n          , onend : function(){\r\n              effect.isPlaying = false\r\n            }\r\n          })\r\n        , play: function(onlyIfNotPlaying){\r\n\r\n            if(onlyIfNotPlaying && effect.isPlaying) {\r\n              return\r\n            }\r\n\r\n            effect.isPlaying = true\r\n            effect.howl.play()\r\n          }\r\n        }\r\n\r\n      return effect\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , playEffect: function(name, onlyIfNotPlaying){\r\n      if (settings.soundEngineOn) {\r\n        var effect = sound.effects[name]\r\n        if (effect) {\r\n          effect.play(onlyIfNotPlaying)\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , playBackgroundSound: function(){\r\n      if (settings.allowBackgroundMusic) {\r\n        sound.backgroundSong.play()\r\n      }\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , pauseBackgroundSound: function(){\r\n      if (settings.allowBackgroundMusic) {\r\n        sound.backgroundSong.pause()\r\n      }\r\n    }\r\n}\r\n\r\nmodule.exports = sound\r\n\r\n}());\r\n\n},{\"../../vendors/howler.min\":23,\"./settings\":4}],6:[function(_dereq_,module,exports){\n/**\r\n * theatre.js\r\n *\r\n * @package gameturfjs\r\n */\r\n\r\n(function() {\r\n\r\n/*global require, module */\r\n\r\nvar ui = _dereq_('./ui')\r\n\r\n/**\r\n *  \r\n */ \r\nvar theatre = {\r\n\r\n    stageCanvas          : undefined\r\n  , stage                : undefined\r\n\r\n  , gridCanvas           : undefined\r\n  , grid                 : undefined\r\n\r\n  , backdropCanvas       : undefined\r\n  , backdrop             : undefined\r\n\r\n  , foregroundCanvas     : undefined\r\n  , foreground           : undefined\r\n\r\n  , scale                : 2\r\n\r\n  , canvasBoxLeft        : 0\r\n  , canvasBoxTop         : 0\r\n  , canvasBoxRight       : 0\r\n  , canvasBoxBottom      : 0\r\n\r\n  , shakeDuration        : 50\r\n  , shakeStartTime       : -1\r\n  , allowScreenShake     : false\r\n  , screenShakeMagnitude : 5\r\n\r\n  , useResolutionDivider : false\r\n  , resolutionDivider    : 2\r\n  , movesWithPlayer      : false\r\n\r\n  , currentTranslateX    : 0\r\n  , currentTranslateY    : 0\r\n\r\n  , worldNeedsRedraw     : true\r\n\r\n  , canvasHeight         : window.innerHeight\r\n  , canvasWidth          : window.innerWidth\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , init: function(movesWithPlayer){\r\n\r\n      theatre.movesWithPlayer = movesWithPlayer\r\n\r\n      theatre.stageCanvas     = document.getElementById('Stage')\r\n      theatre.stage           = theatre.stageCanvas.getContext('2d')\r\n\r\n      theatre.gridCanvas      = document.getElementById('Grid')\r\n      theatre.grid            = theatre.gridCanvas.getContext('2d')\r\n\r\n      theatre.backdropCanvas  = document.getElementById('Backdrop')\r\n      theatre.backdrop        = theatre.backdropCanvas.getContext('2d')\r\n\r\n      theatre.foregroundCanvas  = document.getElementById('Foreground')\r\n      theatre.foreground        = theatre.foregroundCanvas.getContext('2d')\r\n\r\n      theatre.waterCanvas              = document.getElementById('Water-Container')\r\n      theatre.waterCanvas.style.width  = theatre.canvasWidth  + \"px\"\r\n      theatre.waterCanvas.style.height = theatre.canvasHeight + \"px\"\r\n\r\n      theatre.resize()\r\n      \r\n      window.addEventListener('resize', theatre.resize, false)\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , resize: function(){\r\n      theatre.setSize(theatre.stageCanvas)\r\n      theatre.setSize(theatre.gridCanvas)\r\n      theatre.setSize(theatre.backdropCanvas)\r\n      theatre.setSize(theatre.foregroundCanvas)\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , setSize: function(canvas){\r\n\r\n      if (theatre.useResolutionDivider) {\r\n\r\n        canvas.className += \" scaleCanvas\"\r\n        canvas.width      = theatre.canvasWidth / theatre.resolutionDivider\r\n        canvas.height     = theatre.canvasHeight  / theatre.resolutionDivider\r\n        canvas.style.transformOrigin = \"0% 0%\"\r\n        canvas.style.transform \r\n          = \"scale(\" + theatre.resolutionDivider + \", \" + theatre.resolutionDivider + \")\"\r\n\r\n      } else {\r\n\r\n        canvas.width  = theatre.canvasWidth\r\n        canvas.height = theatre.canvasHeight\r\n\r\n        theatre.canvasBoxLeft   = 0\r\n        theatre.canvasBoxTop    = 0\r\n        theatre.canvasBoxBottom = theatre.canvasHeight\r\n        theatre.canvasBoxRight  = theatre.canvasWidth\r\n      }\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , setScale: function(){\r\n      theatre.stage.scale(theatre.scale,theatre.scale)\r\n      theatre.grid.scale(theatre.scale,theatre.scale)\r\n      theatre.backdrop.scale(theatre.scale,theatre.scale)\r\n      theatre.foreground.scale(theatre.scale,theatre.scale)\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , clearStage: function(){\r\n\r\n      if (theatre.movesWithPlayer) {\r\n        //theatre.stage.save()\r\n        //theatre.backdrop.save()\r\n\r\n        //theatre.stage.setTransform(1,0,0,1,0,0)\r\n        //theatre.backdrop.setTransform(1,0,0,1,0,0)\r\n      }\r\n\r\n      theatre.stage.clearRect(\r\n        theatre.canvasBoxLeft* theatre.scale\r\n      , theatre.canvasBoxTop* theatre.scale\r\n      , theatre.canvasWidth* theatre.scale\r\n      , theatre.canvasHeight* theatre.scale)\r\n      \r\n      if (theatre.movesWithPlayer) {\r\n\r\n        theatre.backdrop.clearRect(\r\n          theatre.canvasBoxLeft* theatre.scale\r\n        , theatre.canvasBoxTop* theatre.scale\r\n        ,  theatre.canvasWidth* theatre.scale\r\n        , theatre.canvasHeight* theatre.scale)\r\n\r\n        theatre.foreground.clearRect(\r\n          theatre.canvasBoxLeft* theatre.scale\r\n        , theatre.canvasBoxTop* theatre.scale\r\n        ,  theatre.canvasWidth* theatre.scale\r\n        , theatre.canvasHeight* theatre.scale)\r\n\r\n        //theatre.stage.restore()\r\n        //theatre.backdrop.restore()\r\n      }\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , clearWorld: function(){\r\n      theatre.backdrop.clearRect(\r\n        theatre.canvasBoxLeft* theatre.scale\r\n      , theatre.canvasBoxTop* theatre.scale\r\n      , theatre.canvasBoxRight* theatre.scale\r\n      , theatre.canvasBoxBottom* theatre.scale)\r\n\r\n      theatre.foreground.clearRect(\r\n        theatre.canvasBoxLeft* theatre.scale\r\n      , theatre.canvasBoxTop* theatre.scale\r\n      , theatre.canvasBoxRight* theatre.scale\r\n      , theatre.canvasBoxBottom* theatre.scale)\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , clearGrid: function(){\r\n      theatre.grid.clearRect(\r\n        0\r\n      , 0\r\n      , theatre.gridCanvas.width\r\n      , theatre.gridCanvas.height)\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , drawGrids: function() {\r\n      theatre.clearGrid()\r\n      theatre.drawGrid(0.5, 10, \"gray\")\r\n      theatre.drawGrid(1, 100, \"black\")\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , preShake: function () {\r\n      if (theatre.allowScreenShake) {\r\n        if (theatre.shakeStartTime == -1) {\r\n          return;\r\n        }\r\n\r\n        var dt = Date.now() - theatre.shakeStartTime\r\n\r\n        if (dt > theatre.shakeDuration) {\r\n            theatre.shakeStartTime = -1\r\n            return;\r\n        }\r\n\r\n        theatre.stage.save()\r\n        theatre.backdrop.save()\r\n        theatre.foreground.save()\r\n\r\n        var dx = (Math.random() * theatre.screenShakeMagnitude) * theatre.scale\r\n        var dy = (Math.random() * theatre.screenShakeMagnitude) * theatre.scale\r\n        theatre.stage.translate(dx, dy)\r\n        theatre.backdrop.translate(dx, dy)\r\n        theatre.foreground.translate(dx, dy)\r\n      }\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , postShake: function() {\r\n      if(theatre.allowScreenShake) {\r\n        if (theatre.shakeStartTime ==-1) {\r\n          return;\r\n        }\r\n        theatre.stage.restore()\r\n        theatre.backdrop.restore()\r\n        theatre.foreground.restore()\r\n      }\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , startShake: function () {\r\n      if (theatre.allowScreenShake) {\r\n        theatre.shakeStartTime = Date.now()\r\n      }\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n\r\n  , resetCanvasTransformation: function (canvas) {\r\n    theatre[canvas].setTransform(1, 0, 0, 1, 0, 0);\r\n  }\r\n\r\n  , setCanvasTransformation: function (canvas) {\r\n\r\n    if (theatre.lastPhysics) {\r\n      var widthHalf  = theatre.canvasWidth / 2;\r\n      var heightHalf = theatre.canvasHeight / 2;\r\n\r\n      var playerX = theatre.lastPhysics.position.x * theatre.scale;\r\n      var playerY = theatre.lastPhysics.position.y * theatre.scale;\r\n\r\n      var posX = playerX - widthHalf;\r\n      var posY = playerY - heightHalf;\r\n\r\n      theatre[canvas].setTransform(1, 0, 0, 1, posX*-1, posY*-1);\r\n    }\r\n  } \r\n\r\n  , playerUpdate: function(physics){\r\n      theatre.lastPhysics = physics\r\n      if (theatre.movesWithPlayer){\r\n\r\n        var widthHalf  = theatre.canvasWidth / 2;\r\n        var heightHalf = theatre.canvasHeight / 2;\r\n   \r\n        var playerX = physics.position.x * theatre.scale;\r\n        var playerY = physics.position.y * theatre.scale;\r\n\r\n        var posX = playerX - widthHalf;\r\n        var posY = playerY - heightHalf;\r\n\r\n        theatre.stage.setTransform(1, 0, 0, 1, posX*-1, posY*-1);\r\n        theatre.backdrop.setTransform(1, 0, 0, 1, posX*-1, posY*-1);\r\n        theatre.foreground.setTransform(1, 0, 0, 1, posX*-1, posY*-1);\r\n\r\n        theatre.canvasBoxLeft   = physics.position.x - (widthHalf/theatre.scale);\r\n        theatre.canvasBoxRight  = physics.position.x + (widthHalf/theatre.scale);\r\n        theatre.canvasBoxTop    = physics.position.y - (heightHalf/theatre.scale);\r\n        theatre.canvasBoxBottom = physics.position.y + (heightHalf/theatre.scale);\r\n        \r\n        theatre.worldNeedsRedraw = true;\r\n      \r\n      } else {\r\n\r\n        if ((physics.position.x * theatre.scale) < theatre.canvasBoxLeft) {\r\n          \r\n          theatre.currentTranslateX  += theatre.canvasWidth\r\n          theatre.stage.setTransform(1,0,0,1, theatre.currentTranslateX, theatre.currentTranslateY)\r\n          theatre.backdrop.setTransform(1,0,0,1,theatre.currentTranslateX, theatre.currentTranslateY)\r\n          theatre.foreground.setTransform(1,0,0,1,theatre.currentTranslateX, theatre.currentTranslateY)\r\n          theatre.canvasBoxLeft   -= theatre.canvasWidth\r\n          theatre.canvasBoxRight  -= theatre.canvasWidth\r\n          theatre.worldNeedsRedraw = true\r\n          // translate left\r\n        \r\n        } else if ((physics.position.x * theatre.scale) > theatre.canvasBoxRight){\r\n          \r\n          // translate right\r\n          theatre.currentTranslateX  -= theatre.canvasWidth\r\n          theatre.stage.setTransform(1,0,0,1, theatre.currentTranslateX, theatre.currentTranslateY)\r\n          theatre.backdrop.setTransform(1,0,0,1,theatre.currentTranslateX, theatre.currentTranslateY)\r\n          theatre.foreground.setTransform(1,0,0,1,theatre.currentTranslateX, theatre.currentTranslateY)\r\n          theatre.canvasBoxLeft   += theatre.canvasWidth\r\n          theatre.canvasBoxRight  += theatre.canvasWidth\r\n          theatre.worldNeedsRedraw = true\r\n\r\n        } else if ((physics.position.y * theatre.scale) < theatre.canvasBoxTop){\r\n          \r\n          // translate top\r\n          theatre.currentTranslateY  += theatre.canvasHeight\r\n          theatre.stage.setTransform(1,0,0,1, theatre.currentTranslateX, theatre.currentTranslateY)\r\n          theatre.backdrop.setTransform(1,0,0,1,theatre.currentTranslateX, theatre.currentTranslateY)\r\n          theatre.foreground.setTransform(1,0,0,1,theatre.currentTranslateX, theatre.currentTranslateY)\r\n          theatre.canvasBoxTop    -= theatre.canvasHeight\r\n          theatre.canvasBoxBottom -= theatre.canvasHeight\r\n          theatre.worldNeedsRedraw = true\r\n\r\n        } else if ((physics.position.y * theatre.scale) > theatre.canvasBoxBottom){\r\n          \r\n          // translate bottom\r\n          theatre.currentTranslateY  -= theatre.canvasHeight\r\n          theatre.stage.setTransform(1,0,0,1, theatre.currentTranslateX, theatre.currentTranslateY)\r\n          theatre.backdrop.setTransform(1,0,0,1,theatre.currentTranslateX, theatre.currentTranslateY)\r\n          theatre.foreground.setTransform(1,0,0,1,theatre.currentTranslateX, theatre.currentTranslateY)\r\n          theatre.canvasBoxTop    += theatre.canvasHeight\r\n          theatre.canvasBoxBottom += theatre.canvasHeight\r\n          theatre.worldNeedsRedraw = true\r\n        }\r\n      }\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , drawGrid: function(lineWidth, gap, color){\r\n\r\n      gap *= theatre.scale\r\n\r\n      var width  = theatre.gridCanvas.width * theatre.scale\r\n      var height = theatre.gridCanvas.height * theatre.scale\r\n\r\n      theatre.grid.beginPath()\r\n\r\n      for (var x = 0; x <= width; x += gap) {\r\n          theatre.grid.moveTo(x, 0)\r\n          theatre.grid.lineTo(x, height)\r\n      }\r\n\r\n      for (var y = 0; y <= height;  y += gap) {\r\n          theatre.grid.moveTo(0, y)\r\n          theatre.grid.lineTo(width, y)\r\n      }\r\n\r\n      theatre.grid.strokeStyle = color\r\n      theatre.grid.lineWidth   = lineWidth * theatre.scale\r\n      theatre.grid.stroke()\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , drawTriangleFromCenter: function(canvas, physics, color){\r\n\r\n      if (theatre.isOutsideOfCanvas(\r\n            (physics.position.x + physics.halfWidth)\r\n          , (physics.position.x - physics.halfWidth) \r\n          , (physics.position.y - physics.halfHeight) \r\n          , (physics.position.y + physics.halfHeight))){\r\n        return;\r\n      }\r\n\r\n      theatre[canvas].beginPath()\r\n      theatre[canvas].moveTo(\r\n        Math.floor(physics.position.x) * theatre.scale\r\n      , Math.floor(physics.position.y - physics.halfHeight) * theatre.scale)\r\n      theatre[canvas].lineTo(\r\n        Math.floor(physics.position.x - physics.halfWidth) * theatre.scale\r\n      , Math.floor(physics.position.y + physics.halfHeight) * theatre.scale)\r\n      theatre[canvas].lineTo(\r\n        Math.floor(physics.position.x + physics.halfWidth) * theatre.scale\r\n      , Math.floor(physics.position.y + physics.halfHeight) * theatre.scale)\r\n      theatre[canvas].lineTo(\r\n        Math.floor(physics.position.x) * theatre.scale\r\n      , Math.floor(physics.position.y - physics.halfHeight) * theatre.scale)\r\n\r\n      theatre[canvas].fillStyle = color\r\n      theatre[canvas].fill()\r\n    }\r\n  \r\n    /**\r\n     *  \r\n     */ \r\n  , drawTriangleFromCenterUpsideDown: function(canvas, physics, color){\r\n\r\n      if (theatre.isOutsideOfCanvas(\r\n            (physics.position.x + physics.halfWidth) \r\n          , (physics.position.x - physics.halfWidth) \r\n          , (physics.position.y - physics.halfHeight) \r\n          , (physics.position.y + physics.halfHeight))){\r\n        return;\r\n      }\r\n\r\n      theatre[canvas].beginPath()\r\n\r\n      theatre[canvas].moveTo(\r\n        Math.floor(physics.position.x) * theatre.scale\r\n      , Math.floor(physics.position.y + physics.halfHeight) * theatre.scale)\r\n      theatre[canvas].lineTo(\r\n        Math.floor(physics.position.x - physics.halfWidth) * theatre.scale\r\n      , Math.floor(physics.position.y - physics.halfHeight) * theatre.scale)\r\n      theatre[canvas].lineTo(\r\n        Math.floor(physics.position.x + physics.halfWidth) * theatre.scale\r\n      , Math.floor(physics.position.y - physics.halfHeight) * theatre.scale)\r\n      theatre[canvas].lineTo(\r\n        Math.floor(physics.position.x) * theatre.scale\r\n      , Math.floor(physics.position.y + physics.halfHeight) * theatre.scale)\r\n\r\n      theatre[canvas].fillStyle = color\r\n      theatre[canvas].fill()\r\n    }\r\n  \r\n    /**\r\n     *  \r\n     */ \r\n  , drawSquareFromCenter: function(canvas, physics, color){\r\n\r\n      if (theatre.isOutsideOfCanvas(\r\n            (physics.position.x + physics.halfWidth) \r\n          , (physics.position.x - physics.halfWidth) \r\n          , (physics.position.y - physics.halfHeight) \r\n          , (physics.position.y + physics.halfHeight))){\r\n        return;\r\n      }\r\n\r\n      theatre[canvas].fillStyle = color\r\n      theatre[canvas].fillRect(\r\n        Math.floor(physics.position.x - physics.halfWidth) * theatre.scale\r\n      , Math.floor(physics.position.y - physics.halfHeight) * theatre.scale\r\n      , physics.width * theatre.scale\r\n      , physics.height * theatre.scale)\r\n    }\r\n  \r\n    /**\r\n     *  \r\n     */ \r\n    , drawCurvedSquareFromCenter: function(canvas, physics, color, offset){\r\n\r\n      if (theatre.isOutsideOfCanvas(\r\n            (physics.position.x + physics.halfWidth) \r\n          , (physics.position.x - physics.halfWidth) \r\n          , (physics.position.y - physics.halfHeight) \r\n          , (physics.position.y + physics.halfHeight))){\r\n        return;\r\n      }\r\n\r\n      theatre[canvas].fillStyle = color\r\n\r\n      theatre[canvas].beginPath()\r\n      theatre[canvas].moveTo(\r\n        Math.floor(physics.position.x - physics.halfWidth) * theatre.scale\r\n      , Math.floor(physics.position.y - physics.halfHeight) * theatre.scale\r\n      )\r\n      theatre[canvas].quadraticCurveTo(\r\n        physics.position.x * theatre.scale\r\n      , Math.floor(physics.position.y - physics.halfWidth - offset) * theatre.scale\r\n      , Math.floor(physics.position.x + physics.halfWidth) * theatre.scale\r\n      , Math.floor(physics.position.y - physics.halfHeight) * theatre.scale);\r\n\r\n      theatre[canvas].quadraticCurveTo(\r\n        Math.floor(physics.position.x + physics.halfWidth + offset) * theatre.scale\r\n      , physics.position.y * theatre.scale\r\n      , Math.floor(physics.position.x + physics.halfWidth) * theatre.scale\r\n      , Math.floor(physics.position.y + physics.halfHeight) * theatre.scale);\r\n\r\n      theatre[canvas].quadraticCurveTo(\r\n        physics.position.x * theatre.scale\r\n      , Math.floor(physics.position.y + physics.halfWidth + offset) * theatre.scale\r\n      , Math.floor(physics.position.x - physics.halfWidth) * theatre.scale\r\n      , Math.floor(physics.position.y + physics.halfHeight) * theatre.scale);\r\n\r\n      theatre[canvas].quadraticCurveTo(\r\n        Math.floor(physics.position.x - physics.halfWidth - offset) * theatre.scale\r\n      , physics.position.y * theatre.scale\r\n      , Math.floor(physics.position.x - physics.halfWidth) * theatre.scale\r\n      , Math.floor(physics.position.y - physics.halfHeight) * theatre.scale);\r\n\r\n      theatre[canvas].fill() \r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , drawBezierCurvedSquareFromCenter: function(canvas, physics, color, offset, divider, notTop, notRight , notBottom , notLeft ){\r\n\r\n      if (theatre.isOutsideOfCanvas(\r\n            (physics.position.x + physics.halfWidth) \r\n          , (physics.position.x - physics.halfWidth) \r\n          , (physics.position.y - physics.halfHeight) \r\n          , (physics.position.y + physics.halfHeight))){\r\n        return;\r\n      }\r\n\r\n      theatre[canvas].fillStyle = color\r\n\r\n      theatre[canvas].beginPath()\r\n      theatre[canvas].moveTo(\r\n        Math.floor(physics.position.x - physics.halfWidth) * theatre.scale\r\n      , Math.floor(physics.position.y - physics.halfHeight) * theatre.scale\r\n      )\r\n      \r\n      if (notTop) {\r\n        theatre[canvas].lineTo(\r\n          Math.floor(physics.position.x + physics.halfWidth) * theatre.scale,\r\n          Math.floor(physics.position.y - physics.halfHeight) * theatre.scale\r\n        )\r\n      } else {\r\n        theatre[canvas].bezierCurveTo(\r\n          Math.floor(physics.position.x - (physics.halfWidth/divider)) * theatre.scale\r\n        , Math.floor(physics.position.y - physics.halfHeight - offset) * theatre.scale\r\n\r\n        , Math.floor(physics.position.x + (physics.halfWidth/divider)) * theatre.scale\r\n        , Math.floor(physics.position.y - physics.halfHeight - offset) * theatre.scale\r\n\r\n        , Math.floor(physics.position.x + physics.halfWidth) * theatre.scale\r\n        , Math.floor(physics.position.y - physics.halfHeight) * theatre.scale);\r\n      }\r\n\r\n      if (notRight) {\r\n        theatre[canvas].lineTo(\r\n            Math.floor(physics.position.x + physics.halfWidth) * theatre.scale\r\n          , Math.floor(physics.position.y + physics.halfHeight) * theatre.scale);\r\n      } else {\r\n        theatre[canvas].bezierCurveTo(\r\n          Math.floor(physics.position.x + physics.halfWidth + offset) * theatre.scale\r\n        , Math.floor(physics.position.y - (physics.halfHeight/divider)) * theatre.scale\r\n\r\n        , Math.floor(physics.position.x + physics.halfWidth + offset) * theatre.scale\r\n        , Math.floor(physics.position.y + (physics.halfHeight/divider)) * theatre.scale\r\n\r\n        , Math.floor(physics.position.x + physics.halfWidth) * theatre.scale\r\n        , Math.floor(physics.position.y + physics.halfHeight) * theatre.scale);\r\n      } \r\n\r\n      if (notBottom){\r\n        theatre[canvas].lineTo(  \r\n          Math.floor(physics.position.x - physics.halfWidth) * theatre.scale\r\n        , Math.floor(physics.position.y + physics.halfHeight) * theatre.scale);\r\n      } else {\r\n        theatre[canvas].bezierCurveTo(\r\n          Math.floor(physics.position.x + (physics.halfWidth/divider)) * theatre.scale\r\n        , Math.floor(physics.position.y + physics.halfHeight + offset) * theatre.scale\r\n      \r\n        , Math.floor(physics.position.x - (physics.halfWidth/divider)) * theatre.scale\r\n        , Math.floor(physics.position.y + physics.halfHeight + offset) * theatre.scale\r\n\r\n        , Math.floor(physics.position.x - physics.halfWidth) * theatre.scale\r\n        , Math.floor(physics.position.y + physics.halfHeight) * theatre.scale);\r\n      }\r\n\r\n      if (notLeft) {\r\n        theatre[canvas].lineTo(  \r\n         Math.floor(physics.position.x - physics.halfWidth) * theatre.scale\r\n        , Math.floor(physics.position.y - physics.halfHeight) * theatre.scale);\r\n      } else {\r\n        theatre[canvas].bezierCurveTo(\r\n          Math.floor(physics.position.x - physics.halfWidth - offset) * theatre.scale\r\n        , Math.floor(physics.position.y + (physics.halfHeight/divider)) * theatre.scale\r\n\r\n        , Math.floor(physics.position.x - physics.halfWidth - offset) * theatre.scale\r\n        , Math.floor(physics.position.y - (physics.halfHeight/divider)) * theatre.scale\r\n\r\n        , Math.floor(physics.position.x - physics.halfWidth) * theatre.scale\r\n        , Math.floor(physics.position.y - physics.halfHeight) * theatre.scale);\r\n      }\r\n      theatre[canvas].fill() \r\n    }\r\n    /**\r\n     *  \r\n     */ \r\n  , drawSquareFromLeftTopCorner: function(canvas, position, size, color){\r\n\r\n      if (theatre.isOutsideOfCanvas(\r\n            (position.x + size) \r\n          , position.x \r\n          , position.y \r\n          , (position.y + size) )){\r\n        return;\r\n      }\r\n\r\n      theatre[canvas].fillStyle = color\r\n      theatre[canvas].fillRect(\r\n        Math.floor(position.x) * theatre.scale\r\n      , Math.floor(position.y) * theatre.scale\r\n      , size * theatre.scale\r\n      , size * theatre.scale)\r\n    }\r\n  \r\n    /**\r\n     *  \r\n     */ \r\n  , drawCircle: function(canvas, physics, color){\r\n\r\n      if (theatre.isOutsideOfCanvas(\r\n            (physics.position.x + physics.halfWidth)\r\n          , (physics.position.x - physics.halfWidth) \r\n          , (physics.position.y - physics.halfHeight) \r\n          , (physics.position.y + physics.halfHeight))){\r\n        return;\r\n      }\r\n\r\n      theatre[canvas].beginPath()\r\n      theatre[canvas].arc(\r\n        Math.floor(physics.position.x) * theatre.scale\r\n      , Math.floor(physics.position.y) * theatre.scale\r\n      , physics.halfWidth * theatre.scale\r\n      , 0\r\n      , 2 * Math.PI\r\n      , false)\r\n\r\n      theatre[canvas].fillStyle = color\r\n      theatre[canvas].fill()\r\n    }\r\n  \r\n    /**\r\n     *  \r\n     */ \r\n  , drawLine: function(canvas, position, width, color){\r\n      theatre[canvas].beginPath()\r\n      theatre[canvas].strokeStyle = color\r\n      theatre[canvas].lineWidth = 1 * theatre.scale\r\n      theatre[canvas].moveTo(\r\n        Math.floor(position.x) * theatre.scale\r\n      , Math.floor(position.y) * theatre.scale)\r\n      theatre[canvas].lineTo(\r\n        Math.floor(position.x + width) * theatre.scale\r\n      , Math.floor(position.y) * theatre.scale)\r\n      theatre[canvas].stroke()\r\n    }\r\n  \r\n    /**\r\n     *  \r\n     */ \r\n  , drawLineWithVector: function(canvas, physics, vector, color){\r\n        theatre[canvas].beginPath()\r\n        theatre[canvas].strokeStyle = color\r\n        theatre[canvas].lineWidth   = 1 * theatre.scale\r\n        theatre[canvas].moveTo(\r\n          Math.floor(physics.position.x) * theatre.scale\r\n        , Math.floor(physics.position.y) * theatre.scale)\r\n        theatre[canvas].lineTo(\r\n          Math.floor(physics.position.x + vector.x) * theatre.scale\r\n        , Math.floor(physics.position.y + vector.y) * theatre.scale)\r\n        theatre[canvas].stroke()\r\n    }\r\n  \r\n    /**\r\n     *  \r\n     */ \r\n  , drawPath: function(canvas, linePositions, startIndex, color, lineWidth, maxLength, physics){\r\n\r\n      var positionForLine = linePositions[startIndex]\r\n\r\n      if (positionForLine != undefined) {\r\n\r\n        theatre[canvas].beginPath()\r\n        theatre[canvas].strokeStyle = color\r\n        theatre[canvas].lineWidth   = Math.floor(lineWidth) * theatre.scale\r\n\r\n        theatre[canvas].moveTo(\r\n          Math.floor(positionForLine.x) * theatre.scale\r\n        , Math.floor(positionForLine.y) * theatre.scale)\r\n\r\n        for (var i = 0, positionIndex = startIndex; i < maxLength; i++) {\r\n          positionForLine = linePositions[positionIndex]\r\n\r\n          if (positionForLine == undefined){\r\n            continue\r\n          }\r\n\r\n          theatre[canvas].lineTo(\r\n            Math.floor(positionForLine.x) * theatre.scale\r\n          , Math.floor(positionForLine.y) * theatre.scale)\r\n\r\n          positionIndex = (positionIndex + 1) % maxLength\r\n        }\r\n\r\n        if (physics){\r\n          theatre[canvas].lineTo(\r\n            Math.floor(physics.position.x) * theatre.scale\r\n          , Math.floor(physics.position.y) * theatre.scale)\r\n        }\r\n\r\n        theatre[canvas].stroke()\r\n      }\r\n    }\r\n  \r\n    /**\r\n     *  \r\n     */ \r\n  , drawMultipleLines: function(canvas, lines, color){\r\n      theatre[canvas].beginPath()\r\n      theatre[canvas].strokeStyle = color\r\n\r\n      for (var i = lines.length - 1; i >= 0; i--) {\r\n\r\n        theatre[canvas].moveTo(\r\n          Math.floor(lines[i].lineStartX) * theatre.scale\r\n        , Math.floor(lines[i].lineStartY) * theatre.scale)\r\n\r\n        theatre[canvas].lineTo(\r\n          Math.floor(lines[i].lineEndX) * theatre.scale\r\n        , Math.floor(lines[i].lineEndY) * theatre.scale)\r\n      }\r\n\r\n      theatre[canvas].stroke()\r\n    }\r\n  \r\n    /**\r\n     *  \r\n     */ \r\n  , isOutsideOfCanvas: function(right, left, top, bottom){\r\n      return !(theatre.canvasBoxLeft   < right\r\n            && theatre.canvasBoxRight  > left\r\n            && theatre.canvasBoxTop    < bottom\r\n            && theatre.canvasBoxBottom > top)\r\n    }\r\n\r\n    /**\r\n     *  This will adjust the position on the canvas to the position of\r\n     *  the game stage coordinates. \r\n     *\r\n     *  @param position {object}   - the position on the canvas\r\n     *  {\r\n     *      x {number}  - x position on canvas 0 - 400\r\n     *    , y {number}  - y position on canvas 0 - 400\r\n     *  }\r\n     */\r\n  , adjustPositionToStage: function(position){\r\n      position.x = (theatre.canvasBoxLeft + (position.x/theatre.scale))\r\n      position.y = (theatre.canvasBoxTop + (position.y/theatre.scale)) \r\n      return position;\r\n  } \r\n}\r\n\r\nif (ui.datGui) {\r\n  var datGuiFolder = ui.datGui.addFolder(\"theatre\")\r\n  datGuiFolder.add(theatre, \"canvasBoxLeft\").listen();   \r\n  datGuiFolder.add(theatre, \"canvasBoxTop\").listen();            \r\n  datGuiFolder.add(theatre, \"canvasBoxRight\").listen();          \r\n  datGuiFolder.add(theatre, \"canvasBoxBottom\").listen();         \r\n  datGuiFolder.add(theatre, \"useResolutionDivider\")\r\n  datGuiFolder.add(theatre, \"resolutionDivider\").listen();       \r\n  datGuiFolder.add(theatre, \"movesWithPlayer\").listen(); \r\n  datGuiFolder.add(theatre, \"currentTranslateX\").listen();       \r\n  datGuiFolder.add(theatre, \"currentTranslateY\").listen();       \r\n  datGuiFolder.add(theatre, \"worldNeedsRedraw\").listen();        \r\n  datGuiFolder.add(theatre, \"canvasHeight\").listen();            \r\n  datGuiFolder.add(theatre, \"canvasWidth\").listen();       \r\n  datGuiFolder.add(theatre, \"allowScreenShake\")\r\n  datGuiFolder.add(theatre, \"screenShakeMagnitude\")\r\n  datGuiFolder.add(theatre, \"shakeDuration\")\r\n  datGuiFolder.add(theatre, \"startShake\")\r\n  datGuiFolder.add(theatre, \"drawGrids\")\r\n  datGuiFolder.add(theatre, \"clearGrid\")\r\n  datGuiFolder.add(theatre, \"scale\")\r\n  datGuiFolder.add(theatre, \"setScale\")\r\n}\r\n\r\nmodule.exports = theatre\r\n\r\n}());\r\n\n},{\"./ui\":7}],7:[function(_dereq_,module,exports){\n/**\r\n * ui.js\r\n *\r\n * @package gameturfjs\r\n */\r\n\r\n(function() {\r\n\r\n/*global window, require, module */\r\n\r\nvar settings  = _dereq_('./settings')\r\n\r\n/**\r\n *  \r\n */ \r\nvar ui = {\r\n\r\n  /**\r\n   *  \r\n   */ \r\n  menu  : document.getElementById(\"Menu\")\r\n\r\n, theatre: undefined\r\n\r\n  /**\r\n   *  \r\n   */ \r\n, continueBtn  : document.getElementById(\"continue\")\r\n\r\n, bubbleList: []\r\n\r\n  /**\r\n   *  \r\n   */ \r\n, datGui: settings.datGuiIsOn && window.dat ? new window.dat.GUI() : undefined    \r\n\r\n, init: function(theatre, continueGameCallback){\r\n\r\n    ui.theatre = theatre\r\n\r\n    ui.output              = document.getElementById('output');\r\n    ui.output.style.width  = ui.theatre.canvasWidth  + \"px\";\r\n    ui.output.style.height = ui.theatre.canvasHeight + \"px\";\r\n    ui.output.style.position = 'absolute';\r\n    ui.output.style.left = 0;\r\n    ui.output.style.top = 0;\r\n    ui.output.style.pointerEvents = \"none\";\r\n    ui.output.style.zIndex = 1000;\r\n\r\n    ui.continueBtn.addEventListener('click', function(){\r\n      continueGameCallback();\r\n    })\r\n  }\r\n\r\n, update: function(timeElapsed) {\r\n\r\n\r\n\r\n  ui.bubbleList.forEach(function(bubble) {\r\n\r\n    bubble.time -= timeElapsed;\r\n\r\n    if (bubble.time <= 0) {\r\n      bubble.element.remove();\r\n      bubble.death = true;\r\n    } else {\r\n      ui.setBubblePosition(bubble.element, bubble.physics);\r\n    }\r\n  })\r\n\r\n  ui.bubbleList = ui.bubbleList.filter(function (bubble) {\r\n    return !bubble.death;\r\n  });\r\n}\r\n\r\n, draw: function(timeElapsed) {\r\n  \r\n}\r\n\r\n  /**\r\n   *  \r\n   */ \r\n, openMenu: function(){\r\n    ui.menu.className = \"\"\r\n  }\r\n\r\n  /**\r\n   *  \r\n   */ \r\n, closeMenu: function(){\r\n    ui.menu.className = \"hide\"\r\n  }\r\n\r\n, setBubblePosition: function (element, physics) {\r\n  if (ui.theatre.useResolutionDivider) {\r\n    element.style.top = (((ui.theatre.canvasBoxTop*ui.theatre.resolutionDivider)*-1) + (physics.position.y*ui.theatre.resolutionDivider) -(80)) + \"px\"\r\n    element.style.left = ((((ui.theatre.canvasBoxLeft*ui.theatre.resolutionDivider)*-1) + (physics.position.x*ui.theatre.resolutionDivider)) -(100)) + \"px\"\r\n  } else {\r\n    element.style.top = ((ui.theatre.canvasBoxTop*-1) + (physics.position.y)) *  ui.theatre.scale  -80 + \"px\"\r\n    element.style.left = (((ui.theatre.canvasBoxLeft*-1) + physics.position.x)) * ui.theatre.scale -100+ \"px\"\r\n  }\r\n\r\n}\r\n, showBubble: function (physics, text, time) {\r\n\r\n    var element = document.createElement(\"div\");\r\n    element.innerHTML = text;\r\n    element.style.position = \"absolute\"\r\n    element.classList = \"bubble\";\r\n    element.style.height = \"60px\";\r\n    element.style.lineHeight = \"60px\";\r\n    element.style.width = \"200px\";\r\n    element.style.backgroundColor = \"rgba(255,255,255,.3)\"\r\n    element.style.textAlign = \"center\";\r\n    element.style.borderRadius = \"10px\"\r\n    ui.setBubblePosition(element, physics)\r\n    ui.output.appendChild(element)\r\n\r\n    ui.bubbleList.push({\r\n      physics:physics\r\n    , death: false\r\n    , text: text\r\n    , time: time\r\n    , element: element\r\n    })\r\n  }\r\n}\r\n\r\nmodule.exports = ui\r\n\r\n}());\r\n\n},{\"./settings\":4}],8:[function(_dereq_,module,exports){\n/**\r\n * util.js\r\n *\r\n * @package gameturfjs\r\n */\r\n\r\n(function() {\r\n\r\n/*global module */\r\n\r\n/**\r\n *  \r\n */ \r\nvar util = {\r\n\r\n    /**\r\n     *  \r\n     */ \r\n    vectorToDegree: function(vector) {\r\n      return util.vectorToRadiant(vector) * 180 / Math.PI\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , vectorToRadiant: function(vector) {\r\n      return Math.atan2(vector.x, vector.y)\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , vectorLength: function(vector){\r\n      return Math.sqrt(Math.pow(vector.x, 2) + Math.pow(vector.y, 2))\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , vectorDistanz: function (vector1, vector2) {\r\n    return Math.sqrt(Math.pow(vector2.x - vector1.x, 2) + Math.pow(vector2.y - vector1.y, 2))\r\n  }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , scaleVectorBy: function(vector, value){\r\n      return util.shrinkVectorToLength(vector, util.vectorLength(vector) * value)\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , shrinkVectorToLength: function(vector, newLength){\r\n      vector    = util.setVectorToLengthOne(vector)\r\n      vector.x *= newLength\r\n      vector.y *= newLength\r\n      return vector\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , getVectorAngleDegree: function(vector1, vector2){\r\n      return Math.atan2(vector2.x - vector1.x, vector2.y - vector1.y) * 180 / Math.PI\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , setVectorToLengthOne: function(vector){\r\n      if (util.vectorLength(vector) > 0) {\r\n\r\n        var moveRadiant = util.vectorToRadiant(vector)\r\n\r\n        vector.x = Math.sin(moveRadiant)\r\n        vector.y = Math.cos(moveRadiant)\r\n      }\r\n\r\n      return vector\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , getPositionByDegree: function(position, degree, radius){\r\n      degree = degree * Math.PI / 180\r\n      return {\r\n        x: Math.round(radius * Math.sin(degree)) + position.x\r\n      , y: Math.round(radius * Math.cos(degree)) + position.y\r\n     }\r\n  }\r\n}\r\n\r\nmodule.exports = util\r\n\r\n}());\r\n\n},{}],9:[function(_dereq_,module,exports){\n/**\r\n * entityCollisionDetection.js\r\n *\r\n * @package gameturfjs\r\n */\r\n\r\n(function() {\r\n\r\n/*global require, module */\r\n\r\nvar entityManager = _dereq_('./../managers/entityManager')\r\n\r\n/**\r\n *  \r\n */ \r\nvar entityCollisionDetection = {\r\n\r\n  /**\r\n   *  \r\n   */ \r\n  add: function(entity){\r\n    entity.entityCollisions = []\r\n  }\r\n\r\n  /**\r\n   *  \r\n   */ \r\n, update: function(timeElapsed){\r\n\r\n    for (var i = entityManager.visibleEntities.length - 1; i >= 0; i--) {\r\n\r\n      var entityId =entityManager.visibleEntities[i].id\r\n      var entity = entityManager.entities[entityId]\r\n      var checkEntities = entityManager.visibleEntities\r\n\r\n      for (var y = checkEntities.length - 1; y >= 0; y--) {\r\n\r\n        var checkEntityId = checkEntities[y].id\r\n        var checkEntity = entityManager.entities[checkEntityId]\r\n\r\n        if (checkEntityId != entityId) {\r\n          if (entityCollisionDetection.collsitionDetectionOfTwoEntities(entity, checkEntity)){\r\n            if ((entity.entityCollisions[checkEntity.Id] != undefined && !entity.entityCollisions[checkEntity.Id])\r\n              || (checkEntity.entityCollisions[entity.Id] != undefined && !checkEntity.entityCollisions[entity.Id])) {\r\n\r\n              entityCollisionDetection.calculateEntitiesCollisionReaction(entity, checkEntity)\r\n\r\n              entity.entityCollisions[checkEntity.Id] = true\r\n              checkEntity.entityCollisions[entity.Id] =  true\r\n            }\r\n          } else {\r\n            entity.entityCollisions[checkEntity.Id] = false\r\n            checkEntity.entityCollisions[entity.Id] = false\r\n          }\r\n        }\r\n      }\r\n\r\n      var objectCollision = false;\r\n      for (var z = 0; z < entity.entityCollisions.length; z++) {\r\n        if (entity.entityCollisions[z]) {\r\n          objectCollision = true\r\n          break\r\n        }\r\n      }\r\n      \r\n      entity.physics.setObjectCollision(objectCollision, entity.entityCollisions)\r\n    }\r\n  }\r\n\r\n  /**\r\n   *  \r\n   */ \r\n, calculateEntitiesCollisionReaction: function(entity1, entity2){\r\n    var newEntity1VelX = (entity1.physics.velocity.x * (entity1.physics.mass - entity2.physics.mass) + (2 * entity2.physics.mass * entity2.physics.velocity.x)) / (entity1.physics.mass + entity2.physics.mass)\r\n      , newEntity1VelY = (entity1.physics.velocity.y * (entity1.physics.mass - entity2.physics.mass) + (2 * entity2.physics.mass * entity2.physics.velocity.y)) / (entity1.physics.mass + entity2.physics.mass)\r\n      , newEntity2VelX = (entity2.physics.velocity.x * (entity2.physics.mass - entity1.physics.mass) + (2 * entity1.physics.mass * entity1.physics.velocity.x)) / (entity1.physics.mass + entity2.physics.mass)\r\n      , newEntity2VelY = (entity2.physics.velocity.y * (entity2.physics.mass - entity1.physics.mass) + (2 * entity1.physics.mass * entity1.physics.velocity.y)) / (entity1.physics.mass + entity2.physics.mass)\r\n\r\n    entity1.physics.setVelocity(newEntity1VelX, newEntity1VelY)\r\n    entity2.physics.setVelocity(newEntity2VelX, newEntity2VelY)\r\n  }\r\n\r\n  /**\r\n   *  \r\n   */ \r\n, collsitionDetectionOfTwoEntities: function(entity1, entity2){\r\n\r\n    var entity1HitBox = entity1.physics.getHitBox()\r\n      , entity2itBox  = entity2.physics.getHitBox()\r\n\r\n    return (entity1HitBox.Left   < entity2itBox.Right\r\n          && entity1HitBox.Right  > entity2itBox.Left\r\n          && entity1HitBox.Top    < entity2itBox.Bottom\r\n          && entity1HitBox.Bottom > entity2itBox.Top)\r\n  }\r\n\r\n  /**\r\n   *  \r\n   */ \r\n, isEntityCollidingWithOtherEntites: function(entity){\r\n\r\n    for (var i = entity.entityCollisions.length - 1; i >= 0; i--) {\r\n\r\n      if (entity.entityCollisions[i] == undefined) {\r\n        continue\r\n      }\r\n\r\n      if (entity.entityCollisions[i]) {\r\n        return true\r\n      }\r\n    }\r\n\r\n    return false\r\n  }\r\n}\r\n\r\nmodule.exports = entityCollisionDetection\r\n\r\n}());\r\n\n},{\"./../managers/entityManager\":18}],10:[function(_dereq_,module,exports){\n/**\r\n * worldCollisionDetection.js\r\n *\r\n * @package gameturfjs\r\n */\r\n\r\n(function() {\r\n\r\n/*global require, module */\r\n  \r\nvar tilesHelper = _dereq_('./../helpers/tilesHelper')\r\nvar theatre     = _dereq_('./../core/theatre')\r\nvar sound       = _dereq_('./../core/sound')\r\nvar settings    = _dereq_('./../core/settings')\r\nvar physicsHelper = _dereq_('./../helpers/physicsHelper')\r\n\r\n/**\r\n *  \r\n */ \r\nvar worldCollisionDetection = {\r\n\r\n    /**\r\n     *  \r\n     */ \r\n    collsitions: []\r\n  \r\n    /**\r\n     *  \r\n     */ \r\n  , checkLines : []\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , collsitionDetection: function(\r\n      timeElapsed\r\n    , mapWithTileTypes\r\n    , worldWith\r\n    , wolrdHeight\r\n    , physics){\r\n\r\n      var hitbox = physics.getHitBox();\r\n\r\n      tilesHelper.calculateNeahrestTileWalls(\r\n        mapWithTileTypes\r\n      , worldWith\r\n      , wolrdHeight\r\n      , hitbox.centerPosition)\r\n\r\n      var colide = false\r\n\r\n      for (var tileNr = tilesHelper.neahrestTileWalls.length - 1; tileNr >= 0; tileNr--) {\r\n        if (tilesHelper.neahrestTileWalls[tileNr]) {\r\n          for (var tileWallNr = tilesHelper.neahrestTileWalls[tileNr].length - 1; tileWallNr >= 0; tileWallNr--) {\r\n            colide = worldCollisionDetection.calculateWallCollsitionDenfung(\r\n                timeElapsed\r\n              , tilesHelper.neahrestTileWalls[tileNr][tileWallNr]\r\n              , physics\r\n              , hitbox) || colide\r\n          }\r\n        }\r\n      }\r\n\r\n      return colide\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , calculateWallCollsitionDenfung: function(\r\n      timeElapsed\r\n    , wall\r\n    , physics\r\n    , hitbox) {\r\n\r\n      for (var i = hitbox.points.length - 1; i >= 0; i--) {\r\n\r\n        var hitboxPoint = hitbox.points[i];\r\n        \r\n        var hitboxPointFuturePosition = physics.calculateFuturePositionOf({\r\n            x: hitboxPoint.x\r\n          , y: hitboxPoint.y\r\n        }, timeElapsed);\r\n\r\n        if(worldCollisionDetection.checkLineIntersectionFast(\r\n              wall[0].x\r\n            , wall[0].y\r\n            , wall[1].x\r\n            , wall[1].y\r\n            , hitboxPoint.x\r\n            , hitboxPoint.y\r\n            , hitboxPointFuturePosition.x\r\n            , hitboxPointFuturePosition.y)){\r\n\r\n          if (settings.debugWorldCollisions) {\r\n            worldCollisionDetection.debugCollisionLine(\r\n              wall[0].x\r\n            , wall[0].y\r\n            , wall[1].x\r\n            , wall[1].y)\r\n          }\r\n\r\n          sound.playEffect('colide', true)\r\n\r\n          var wallIsLeft  = true\r\n            , wallIsRight = true\r\n            , wallIsUp    = true\r\n            , wallIsDown  = true\r\n\r\n          for (var y = hitbox.points.length - 1; y >= 0; y--){\r\n            wallIsLeft  = wallIsLeft  && (wall[0].x < hitbox.points[y].x && wall[1].x < hitbox.points[y].x)\r\n            wallIsRight = wallIsRight && (wall[0].x > hitbox.points[y].x && wall[1].x > hitbox.points[y].x)\r\n            wallIsUp    = wallIsUp    && (wall[0].y < hitbox.points[y].y && wall[1].y < hitbox.points[y].y)\r\n            wallIsDown  = wallIsDown  && (wall[0].y > hitbox.points[y].y && wall[1].y > hitbox.points[y].y)\r\n          }\r\n\r\n          if (physics.isBounce) {\r\n\r\n            if (wallIsRight && physics.velocity.x > 0) physics.velocity.x = -physics.velocity.x\r\n            if (wallIsLeft  && physics.velocity.x < 0) physics.velocity.x = -physics.velocity.x\r\n            if (wallIsDown  && physics.velocity.y > 0) physics.velocity.y = -physics.velocity.y\r\n            if (wallIsUp    && physics.velocity.y < 0) physics.velocity.y = -physics.velocity.y\r\n\r\n          } else {\r\n\r\n            if (wallIsRight || wallIsLeft) physics.velocity.x = 0\r\n            if (wallIsDown  || wallIsUp)   physics.velocity.y = 0\r\n\r\n          }\r\n\r\n          return true\r\n        }\r\n      }\r\n\r\n      return false\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , checkLineIntersectionFast:  function (a,b,c,d,p,q,r,s) {\r\n\r\n      if (settings.debugWorldCollisions) {\r\n        worldCollisionDetection.debugLine(a,b,c,d,p,q,r,s)\r\n      }\r\n\r\n      var det = (c - a) * (s - q) - (r - p) * (d - b)\r\n\r\n      if (det === 0) {\r\n      \r\n        return false\r\n      \r\n      } else {\r\n      \r\n        var lambda = ((s - q) * (r - a) + (p - r) * (s - b)) / det\r\n          , gamma  = ((b - d) * (r - a) + (c - a) * (s - b)) / det\r\n\r\n        return (0 < lambda && lambda < 1) && (0 < gamma && gamma < 1)\r\n      }\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , update: function(timeElapsed){\r\n      if(settings.debugWorldCollisions) {\r\n        worldCollisionDetection.collsitions = []\r\n        worldCollisionDetection.checkLines  = []\r\n      }\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , draw: function(timeElapsed){\r\n      if(settings.debugWorldCollisions) {\r\n        theatre.drawMultipleLines('stage', worldCollisionDetection.checkLines, \"#F24962\")\r\n        theatre.drawMultipleLines('stage', worldCollisionDetection.collsitions, \"blue\")\r\n      }\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , debugLine: function(a,b,c,d,p,q,r,s){\r\n\r\n      worldCollisionDetection.checkLines.push({\r\n        lineStartX : a\r\n      , lineStartY : b\r\n      , lineEndX   : c\r\n      , lineEndY   : d\r\n      })\r\n\r\n      worldCollisionDetection.checkLines.push({\r\n        lineStartX : p\r\n      , lineStartY : q\r\n      , lineEndX   : r\r\n      , lineEndY   : s\r\n      })\r\n    }\r\n\r\n    /**\r\n     *  \r\n     */ \r\n  , debugCollisionLine: function(a,b,c,d){\r\n      worldCollisionDetection.collsitions.push({\r\n        lineStartX : a\r\n      , lineStartY : b\r\n      , lineEndX   : c\r\n      , lineEndY   : d\r\n      })\r\n    }\r\n}\r\n\r\nmodule.exports =  worldCollisionDetection\r\n\r\n}());\r\n\n},{\"./../core/settings\":4,\"./../core/sound\":5,\"./../core/theatre\":6,\"./../helpers/physicsHelper\":16,\"./../helpers/tilesHelper\":17}],11:[function(_dereq_,module,exports){\n/******************************************************************************\r\n * face.js\r\n *\r\n * \r\n *****************************************************************************/\r\n\r\n(function() {\r\n\r\n/*global require, module */\r\n  \r\nvar theatre = _dereq_('./../core/theatre')\r\nvar util    = _dereq_('./../core/util')\r\n\r\nmodule.exports = function(config){\r\n\r\n  config = config || {}\r\n\r\n  var face = {\r\n\r\n      color                   : config.color || \"#B0A183\"\r\n    , defaultFace             : undefined\r\n    , currentFace             : undefined\r\n    , faceExpressionDuration  : 200\r\n    , faceExpressionStartTime : 0\r\n    , positions               : undefined\r\n    , leftEyePosition         : { x: 0, y: 0 }\r\n    , rightEyePosition        : { x: 0, y: 0 }\r\n    , mouthPosition           : { x: 0, y: 0 }\r\n    , eyeSize                 : 0\r\n    , mouthCloseSize          : 0\r\n    , mouthOpenSize           : 0\r\n    , lookDirectionAngle:     0\r\n\r\n    , init: function(width){\r\n        face.defaultFace    = face.drawNoramlFace\r\n        face.currentFace    = face.drawNoramlFace\r\n        face.eyeSize        = width * 0.2\r\n        face.mouthOpenSize  = width * 0.2\r\n        face.mouthCloseSize = width * 0.4\r\n      }\r\n\r\n    , addToDatGuiFolder: function(folder) {\r\n        var faceFolder = folder.addFolder(\"Face\")\r\n        faceFolder.add(face, \"faceExpressionDuration\")\r\n        faceFolder.add(face, \"faceExpressionStartTime\").listen()\r\n        faceFolder.add(face, \"lookDirectionAngle\").listen()\r\n      }\r\n\r\n    , update: function(physics, isInteracting){\r\n\r\n        if (physics.collsition)  {\r\n\r\n          face.SetSurpiseFace()\r\n\r\n        } else if (physics.isMoving) {\r\n\r\n          if (face.faceExpressionStartTime) {\r\n\r\n          } else if(isInteracting){\r\n\r\n            face.lookDirectionAngle = util.vectorToDegree(physics.velocity)\r\n\r\n            if (face.lookDirectionAngle > -45 && face.lookDirectionAngle < 45) {\r\n              face.SetFaceLookDown()\r\n            } else if (face.lookDirectionAngle < -135 || face.lookDirectionAngle > 135){\r\n              face.SetFaceLookTop()\r\n            } else if (face.lookDirectionAngle > 45 && face.lookDirectionAngle < 135){\r\n              face.SetFaceLookRight()\r\n            } else if (face.lookDirectionAngle < -45 && face.lookDirectionAngle > -135){\r\n              face.SetFaceLookLeft()\r\n            }\r\n          }\r\n        }\r\n\r\n        if (face.faceExpressionStartTime) {\r\n          if (Date.now() - face.faceExpressionStartTime > face.faceExpressionDuration) {\r\n            face.currentFace             = face.drawNoramlFace\r\n            face.faceExpressionStartTime = undefined\r\n          }\r\n        }\r\n\r\n        if (Math.random() > 0.995) {\r\n          face.setNoramlFaceOpenEyes()\r\n        }\r\n      }\r\n\r\n    , draw: function(physics) {\r\n        face.currentFace(physics)\r\n      }\r\n\r\n      // Setter\r\n\r\n    , SetSurpiseFace: function(){\r\n        face.faceExpressionStartTime = Date.now()\r\n        face.currentFace             = face.drawSurpiseFace\r\n      }\r\n\r\n    , SetFaceLookLeft: function(){\r\n        face.faceExpressionStartTime = Date.now()\r\n        face.currentFace             = face.drawFaceLookLeft\r\n      }\r\n\r\n    , SetFaceLookRight: function(){\r\n        face.faceExpressionStartTime = Date.now()\r\n        face.currentFace             = face.drawFaceLookRight\r\n      }\r\n\r\n    , SetFaceLookTop: function(){\r\n        face.faceExpressionStartTime = Date.now()\r\n        face.currentFace             = face.drawFaceLookTop\r\n      }\r\n\r\n    , SetFaceLookDown: function(){\r\n        face.faceExpressionStartTime = Date.now()\r\n        face.currentFace             = face.drawFaceLookDown\r\n      }\r\n\r\n    , setNoramlFaceOpenEyes: function(){\r\n        face.faceExpressionStartTime = Date.now()\r\n        face.currentFace             = face.drawNoramlFaceOpenEyes\r\n      }\r\n\r\n      // Draw Face\r\n    , drawNoramlFace: function(physics) {\r\n\r\n        // left eye\r\n        face.leftEyePosition.x = physics.position.x - (physics.width  * 0.3)\r\n        face.leftEyePosition.y = physics.position.y - (physics.height * 0.1)\r\n        theatre.drawLine(\r\n          'stage'\r\n        , face.leftEyePosition\r\n        , face.eyeSize\r\n        , face.color)\r\n\r\n        // right eye\r\n        face.rightEyePosition.x = physics.position.x + (physics.width  * 0.1)\r\n        face.rightEyePosition.y = physics.position.y - (physics.height * 0.1)\r\n        theatre.drawLine(\r\n          'stage'\r\n        , face.rightEyePosition\r\n        , face.eyeSize\r\n        , face.color)\r\n\r\n        // close mouth\r\n        face.mouthPosition.x = physics.position.x - (physics.width  * 0.2)\r\n        face.mouthPosition.y = physics.position.y + (physics.height * 0.3)\r\n        theatre.drawLine(\r\n          'stage'\r\n        , face.mouthPosition\r\n        , face.mouthCloseSize\r\n        , face.color)\r\n      }\r\n\r\n    , drawNoramlFaceOpenEyes: function(physics) {\r\n        // linkes auge\r\n        face.leftEyePosition.x = physics.position.x - (physics.width  * 0.3)\r\n        face.leftEyePosition.y = physics.position.y - (physics.height * 0.2)\r\n        theatre.drawSquareFromLeftTopCorner(\r\n          'stage'\r\n        , face.leftEyePosition\r\n        , face.eyeSize\r\n        , face.color)\r\n\r\n        // rechtes auge\r\n        face.rightEyePosition.x = physics.position.x + (physics.width  * 0.1)\r\n        face.rightEyePosition.y = physics.position.y - (physics.height * 0.2)\r\n        theatre.drawSquareFromLeftTopCorner(\r\n          'stage'\r\n        , face.rightEyePosition\r\n        , face.eyeSize\r\n        , face.color)\r\n\r\n        // closed mund\r\n        face.mouthPosition.x = physics.position.x - (physics.width  * 0.2)\r\n        face.mouthPosition.y = physics.position.y + (physics.height * 0.3)\r\n        theatre.drawLine(\r\n          'stage'\r\n        , face.mouthPosition\r\n        , face.mouthCloseSize\r\n        , face.color)\r\n      }\r\n\r\n    , drawSurpiseFace: function(physics){\r\n        // linkes auge\r\n        face.leftEyePosition.x = physics.position.x - (physics.width  * 0.3)\r\n        face.leftEyePosition.y = physics.position.y - (physics.height * 0.2)\r\n        theatre.drawSquareFromLeftTopCorner(\r\n          'stage'\r\n        , face.leftEyePosition\r\n        , face.eyeSize\r\n        , face.color)\r\n\r\n        // rechtes auge\r\n        face.rightEyePosition.x = physics.position.x + (physics.width  * 0.1)\r\n        face.rightEyePosition.y = physics.position.y - (physics.height * 0.2)\r\n        theatre.drawSquareFromLeftTopCorner(\r\n          'stage'\r\n        , face.rightEyePosition\r\n        , face.eyeSize\r\n        , face.color)\r\n\r\n        // mund\r\n        face.mouthPosition.x = physics.position.x - (physics.width  * 0.1)\r\n        face.mouthPosition.y = physics.position.y + (physics.height * 0.2)\r\n        theatre.drawSquareFromLeftTopCorner(\r\n          'stage'\r\n        , face.mouthPosition\r\n        , face.mouthOpenSize\r\n        , face.color)\r\n      }\r\n\r\n    , drawFaceLookLeft: function(physics){\r\n\r\n        face.leftEyePosition.x  = physics.position.x - (physics.width  * 0.4)\r\n        face.leftEyePosition.y  = physics.position.y - (physics.height * 0.2)\r\n\r\n        face.rightEyePosition.x = physics.position.x\r\n        face.rightEyePosition.y = physics.position.y - (physics.height * 0.2)\r\n\r\n        face.drawFaceLook(physics)\r\n      }\r\n\r\n    , drawFaceLookRight: function(physics){\r\n\r\n        face.leftEyePosition.x  = physics.position.x - (physics.width  * 0.2)\r\n        face.leftEyePosition.y  = physics.position.y - (physics.height * 0.2)\r\n\r\n        face.rightEyePosition.x = physics.position.x + (physics.width  * 0.2)\r\n        face.rightEyePosition.y = physics.position.y - (physics.height * 0.2)\r\n\r\n        face.drawFaceLook(physics)\r\n      }\r\n\r\n    , drawFaceLookTop: function(physics){\r\n\r\n        face.leftEyePosition.x  = physics.position.x - (physics.width  * 0.3)\r\n        face.leftEyePosition.y  = physics.position.y - (physics.height * 0.25)\r\n\r\n        face.rightEyePosition.x = physics.position.x + (physics.width  * 0.1)\r\n        face.rightEyePosition.y = physics.position.y - (physics.height * 0.25)\r\n\r\n        face.drawFaceLook(physics)\r\n      }\r\n\r\n    , drawFaceLookDown: function(physics){\r\n\r\n        face.leftEyePosition.x  = physics.position.x - (physics.width  * 0.3)\r\n        face.leftEyePosition.y  = physics.position.y - (physics.height * 0.15)\r\n\r\n        face.rightEyePosition.x = physics.position.x + (physics.width  * 0.1)\r\n        face.rightEyePosition.y = physics.position.y - (physics.height * 0.15)\r\n\r\n        face.drawFaceLook(physics)\r\n      }\r\n\r\n    , drawFaceLook: function(physics){\r\n\r\n        var shake   = physics.isRunning ? 2 : 1.1\r\n          , offsetX = (Math.random() - 0.5) * shake\r\n          , offsetY = (Math.random() - 0.5) * shake\r\n\r\n        face.leftEyePosition.x  += offsetX\r\n        face.leftEyePosition.y  += offsetY\r\n\r\n        face.rightEyePosition.x += offsetX\r\n        face.rightEyePosition.y += offsetY\r\n\r\n        // linkes auge\r\n        theatre.drawSquareFromLeftTopCorner(\r\n          'stage'\r\n        , face.leftEyePosition\r\n        , face.eyeSize\r\n        , face.color)\r\n\r\n        // rechtes auge\r\n        theatre.drawSquareFromLeftTopCorner(\r\n          'stage'\r\n        , face.rightEyePosition\r\n        , face.eyeSize\r\n        , face.color)\r\n\r\n        // close mouth\r\n        face.mouthPosition.x = physics.position.x - (physics.width  * 0.2) + offsetX\r\n        face.mouthPosition.y = physics.position.y + (physics.height * 0.3) + offsetY\r\n\r\n        theatre.drawLine(\r\n          'stage'\r\n        , face.mouthPosition\r\n        , face.mouthCloseSize\r\n        , face.color)\r\n      }\r\n    }\r\n\r\n  return face\r\n}\r\n\r\n}());\r\n\n},{\"./../core/theatre\":6,\"./../core/util\":8}],12:[function(_dereq_,module,exports){\n/**\r\n * interaction.js\r\n *\r\n */\r\n\r\n(function() {\r\n\r\n    /*global require, module */\r\n\r\n    module.exports = function(settings){\r\n    \r\n      settings = settings || {}\r\n    \r\n      var interaction = {\r\n        \r\n          canInteract: true\r\n\r\n        , onInteraction: settings.onInteraction || function (entity) {\r\n\r\n          }\r\n        \r\n        , drawHighlightBox: settings.drawHighlightBox || function () {\r\n\r\n          }\r\n\r\n        , update: function (entity) {\r\n          // get nearest entities\r\n\r\n          // call interact\r\n        } \r\n      }\r\n    \r\n      return interaction\r\n    }\r\n    \r\n    }());\r\n    \n},{}],13:[function(_dereq_,module,exports){\n/******************************************************************************\r\n * lastPosition.js\r\n *\r\n * \r\n *****************************************************************************/\r\n\r\n(function() {\r\n\r\n/*global require, module */\r\n  \r\nvar theatre = _dereq_('./../core/theatre')\r\n\r\nmodule.exports = function(settings){\r\n\r\n  settings = settings || {}\r\n\r\n  var tempPhysics   = {}\r\n    , lastPositions = {\r\n        positions          : []\r\n      , maxLength          : 5\r\n      , lastTimeSet        : 0\r\n      , setTimeDelay       : settings.setTimeDelay || 50\r\n      , lastEntityIndex    : 0\r\n      , onlyUpdateIfMoving : false\r\n      , lineWidth          : settings.lineWidth || 1\r\n      , shouldDrawLine     : true\r\n      , shouldDrawBodies   : settings.shouldDrawBodies !== undefined ? settings.shouldDrawBodies : true\r\n      , color              : settings.color ||  {\r\n          r: 253\r\n        , g: 244\r\n        , b: 194\r\n        }\r\n        \r\n      , addToDatGuiFolder: function(folder) {\r\n\r\n          var lastPositionsFolder = folder.addFolder(\"LastPositions\")\r\n\r\n          lastPositionsFolder.add(lastPositions, \"maxLength\")\r\n          lastPositionsFolder.add(lastPositions, \"lastTimeSet\").listen()\r\n          lastPositionsFolder.add(lastPositions, \"setTimeDelay\")\r\n          lastPositionsFolder.add(lastPositions, \"lastEntityIndex\").listen()\r\n          lastPositionsFolder.add(lastPositions, \"onlyUpdateIfMoving\")\r\n          lastPositionsFolder.add(lastPositions, \"lineWidth\")\r\n        }\r\n\r\n      , clear: function(){\r\n          lastPositions.positions       = []\r\n          lastPositions.lastEntityIndex = 0\r\n          lastPositions.lastTimeSet     = 0\r\n        }\r\n\r\n      , update: function(physics){\r\n\r\n          if (lastPositions.onlyUpdateIfMoving && !physics.isMoving) {\r\n            return;\r\n          }\r\n\r\n          if (Date.now() - lastPositions.lastTimeSet > lastPositions.setTimeDelay){\r\n\r\n            if (lastPositions.positions[lastPositions.lastEntityIndex] === undefined) {\r\n              lastPositions.positions[lastPositions.lastEntityIndex] = { x: 0, y:0 }\r\n            }\r\n\r\n            lastPositions.positions[lastPositions.lastEntityIndex].x = physics.position.x\r\n            lastPositions.positions[lastPositions.lastEntityIndex].y = physics.position.y\r\n\r\n            lastPositions.lastEntityIndex = (lastPositions.lastEntityIndex + 1) % lastPositions.maxLength\r\n            lastPositions.lastTimeSet     = Date.now()\r\n          }\r\n        }\r\n\r\n      , draw: function(physics){\r\n\r\n          if (lastPositions.shouldDrawBodies) {\r\n            lastPositions.drawBodies(physics)\r\n          }\r\n\r\n          if (lastPositions.shouldDrawLine) {\r\n            lastPositions.drawLine(physics)\r\n          }\r\n        }\r\n\r\n      , drawBodies: function(physics){\r\n\r\n          for (var i = 0, positionIndex = lastPositions.lastEntityIndex; i < lastPositions.maxLength; i++) {\r\n\r\n            if (lastPositions.positions[positionIndex] == undefined) {\r\n              continue\r\n            }\r\n\r\n            tempPhysics.position = {\r\n              x: lastPositions.positions[positionIndex].x\r\n            , y: lastPositions.positions[positionIndex].y\r\n            };\r\n             \r\n            tempPhysics.halfWidth  = physics.halfWidth\r\n            tempPhysics.halfHeight = physics.halfHeight\r\n            tempPhysics.width      = physics.width\r\n            tempPhysics.height     = physics.height\r\n          \r\n            theatre.drawSquareFromCenter(\r\n              'stage',\r\n              tempPhysics,\r\n              \"rgba(\" + lastPositions.color.r + \", \" +\r\n                        lastPositions.color.g + \", \" +\r\n                        lastPositions.color.b + \", \" +\r\n                        ((i * (0.5/lastPositions.maxLength)) + 0.1) + \")\");\r\n           \r\n            positionIndex = (positionIndex + 1) % lastPositions.maxLength\r\n          }\r\n        }\r\n\r\n      , drawLine: function(physics){\r\n          theatre.drawPath(\r\n            'stage'\r\n          , lastPositions.positions\r\n          , lastPositions.lastEntityIndex\r\n          , \"rgba(\" + lastPositions.color.r + \", \" + \r\n                      lastPositions.color.g + \", \" + \r\n                      lastPositions.color.b + \", 0.6)\"\r\n          , lastPositions.lineWidth\r\n          , lastPositions.maxLength\r\n          , physics)\r\n        }\r\n  }\r\n\r\n  return lastPositions\r\n}\r\n\r\n}());\r\n\n},{\"./../core/theatre\":6}],14:[function(_dereq_,module,exports){\n/******************************************************************************\r\n * physics.js\r\n *\r\n * \r\n *****************************************************************************/\r\n\r\n(function() {\r\n\r\n/*global require, module */\r\n\r\nvar util      = _dereq_('./../core/util')\r\nvar ui      = _dereq_('./../core/ui')\r\nvar world     = _dereq_('./../systems/world')\r\nvar settings  = _dereq_('./../core/settings')\r\nvar theatre   = _dereq_('./../core/theatre')\r\nvar entityManager = _dereq_('./../managers/entityManager')\r\nvar physicsHelper = _dereq_('./../helpers/physicsHelper')\r\n\r\nmodule.exports = function(config){\r\n\r\n  config = config || {}\r\n\r\n  var physics = {\r\n\r\n      position          : config.position          || { x:0, y:0 }\r\n    , velocity          : config.velocity          || { x:0, y:0 }\r\n    , speed             : config.speed             || 2\r\n    , runSpeed          : config.runSpeed          || 4\r\n    , mass              : config.mass              || 1\r\n    , height            : config.height            || 20\r\n    , width             : config.width             || 20\r\n    , isBounce          : config.isBounce          || false\r\n    , isFrictionless    : config.isFrictionless    != undefined ? config.isFrictionless : false\r\n    , frictionMagnitude : config.frictionMagnitude || 0.5\r\n    , canWorldColide    : config.canWorldColide    != undefined ? config.canWorldColide : true\r\n\r\n    , isMoving     : false\r\n    , angle        : 0\r\n    , maxVelocity  : undefined\r\n    , halfWidth    : undefined\r\n    , halfHeight   : undefined\r\n    , isRunning    : false\r\n    , collsition   : false\r\n    , objectCollision: false\r\n    , entityCollisions: []\r\n    , hitBox       : undefined\r\n    , currentSpeed : 0\r\n\r\n    , init: function(){\r\n        physics.createHitBox()\r\n        physics.halfHeight = physics.height/2\r\n        physics.halfWidth  = physics.width/2\r\n      }\r\n\r\n    , addToDatGuiFolder: function(folder){\r\n        var physicsFolder = folder.addFolder(\"Physics\")\r\n        physicsFolder.add(physics, \"speed\").listen()\r\n        physicsFolder.add(physics, \"runSpeed\").listen()\r\n        physicsFolder.add(physics, \"isBounce\").listen()\r\n        physicsFolder.add(physics, \"angle\").listen()\r\n        physicsFolder.add(physics, \"mass\").listen()\r\n        physicsFolder.add(physics, \"currentSpeed\").listen()\r\n        physicsFolder.add(physics, \"isFrictionless\").listen()\r\n        physicsFolder.add(physics, \"frictionMagnitude\").listen()\r\n        physicsFolder.add(physics.position, \"x\").listen()\r\n        physicsFolder.add(physics.position, \"y\").listen()\r\n        physicsFolder.add(physics, \"collsition\").listen()\r\n        physicsFolder.add(physics, \"isMoving\").listen()\r\n        physicsFolder.add(physics, \"isRunning\").listen()\r\n        physicsFolder.add(physics.velocity, \"x\").listen()\r\n        physicsFolder.add(physics.velocity, \"y\").listen()\r\n      }\r\n\r\n    , calculateFriction: function(){\r\n\r\n        if (!physics.isFrictionless) {\r\n          if (physics.currentSpeed  > 0) {\r\n            if (physics.currentSpeed < physics.frictionMagnitude) {\r\n              physics.setVelocity(0, 0)\r\n            } else {\r\n              physics.lowerVelocityTo(physics.currentSpeed - physics.frictionMagnitude)\r\n            } \r\n          } else {\r\n            physics.setVelocity(0, 0)\r\n          }\r\n        }\r\n      }\r\n\r\n    , inputUpdate: function(input){\r\n        if (input) {\r\n          physics.isRunning = input.isRunning\r\n          physics.maxVelocity = physics.isRunning ? physics.runSpeed : physics.speed\r\n\r\n          physics.addVelocity(input.vector.x * (physics.maxVelocity/2), input.vector.y * (physics.maxVelocity/2))\r\n\r\n          if (physics.currentSpeed > physics.maxVelocity)\r\n            physics.lowerVelocityTo(physics.maxVelocity)\r\n          else if (physics.currentSpeed < 0.2)\r\n            physics.setVelocity(0, 0)\r\n        }\r\n      }\r\n\r\n    , update: function(timeElapsed, input){\r\n        physics.isMoving    = false\r\n        physics.collsition  = false\r\n\r\n        physics.calculateFriction()\r\n        physics.inputUpdate(input)\r\n\r\n        if (physics.currentSpeed > 0) {\r\n\r\n          physics.isMoving = true\r\n\r\n          physics.collsition = physics.collsitionDetection(timeElapsed)\r\n\r\n          if (physics.objectCollision) {\r\n\r\n            var entity = false;\r\n\r\n            for (var i = 0; i < physics.entityCollisions.length; i++) {\r\n              if (physics.entityCollisions[i]) {\r\n                entity = entityManager.entities[i]\r\n              }\r\n            }\r\n\r\n            if (entity) {\r\n              \r\n              var hitBox = physics.getHitBox()\r\n              var entityHitBox  = entity.physics.getHitBox()\r\n        \r\n              var objectIsLeft  = physics.position.x > entity.physics.position.x && hitBox.Left   < entityHitBox.Right\r\n              , objectIsRight   = physics.position.x < entity.physics.position.x && hitBox.Right  > entityHitBox.Left\r\n              , objectIsUp      = physics.position.y > entity.physics.position.y && hitBox.Top    < entityHitBox.Bottom\r\n              , objectIsDown    = physics.position.y < entity.physics.position.y && hitBox.Bottom > entityHitBox.Top\r\n\r\n              if (objectIsRight && physics.velocity.x > 0) physics.velocity.x = 0\r\n              if (objectIsLeft  && physics.velocity.x < 0) physics.velocity.x = 0\r\n              if (objectIsDown  && physics.velocity.y > 0) physics.velocity.y = 0\r\n              if (objectIsUp    && physics.velocity.y < 0) physics.velocity.y = 0\r\n            }\r\n          }\r\n\r\n          physics.position = physics.calculateFuturePositionOf(physics.position, timeElapsed)\r\n        }\r\n      }\r\n\r\n    , calculateFuturePositionOf: function (position, timeElapsed) {\r\n        position.x += physicsHelper.calculateVelocityForTime(timeElapsed, physics.velocity.x)\r\n        position.y += physicsHelper.calculateVelocityForTime(timeElapsed, physics.velocity.y)\r\n        return position\r\n      }\r\n\r\n    , draw: function(){\r\n        if (settings.physicsDebugMode) physics.drawDebugInfo()\r\n      }\r\n\r\n    , createHitBox: function(){\r\n        physics.hitBox = {\r\n            centerPosition: {}\r\n          , Left          : undefined\r\n          , Right         : undefined\r\n          , Bottom        : undefined\r\n          , Top           : undefined\r\n          , points        : [\r\n              { x: undefined, y: undefined }\r\n            , { x: undefined, y: undefined }\r\n            , { x: undefined, y: undefined }\r\n            , { x: undefined, y: undefined }\r\n          ]\r\n        }\r\n      }\r\n\r\n    , getHitBox: function() {\r\n        physics.hitBox.centerPosition.x = physics.position.x\r\n        physics.hitBox.centerPosition.y = physics.position.y\r\n\r\n        physics.hitBox.Left   = physics.position.x - physics.halfWidth\r\n        physics.hitBox.Right  = physics.position.x + physics.halfWidth\r\n        physics.hitBox.Bottom = physics.position.y + physics.halfHeight\r\n        physics.hitBox.Top    = physics.position.y - physics.halfHeight\r\n\r\n        physics.hitBox.points[0].x = physics.hitBox.Left\r\n        physics.hitBox.points[0].y = physics.hitBox.Top\r\n\r\n        physics.hitBox.points[1].x = physics.hitBox.Left\r\n        physics.hitBox.points[1].y = physics.hitBox.Bottom\r\n\r\n        physics.hitBox.points[2].x = physics.hitBox.Right\r\n        physics.hitBox.points[2].y = physics.hitBox.Top\r\n\r\n        physics.hitBox.points[3].x = physics.hitBox.Right\r\n        physics.hitBox.points[3].y = physics.hitBox.Bottom\r\n\r\n        return physics.hitBox\r\n      }\r\n\r\n    , collsitionDetection: function(timeElapsed){\r\n        if (physics.canWorldColide) {\r\n          return world.collsitionDetection(\r\n            timeElapsed\r\n          , physics)\r\n        }\r\n        return false\r\n      }\r\n\r\n    , drawDebugInfo: function(){\r\n        theatre.drawLineWithVector(\r\n            'stage'\r\n          , physics\r\n          , {\r\n                x: physics.velocity.x * 20\r\n              , y: physics.velocity.y * 20\r\n            }\r\n          , \"red\")\r\n      }\r\n\r\n    , addVelocity: function(valueX, valueY) {\r\n        physics.velocity.x += valueX\r\n        physics.velocity.y += valueY\r\n        physics.calculateSpeed()\r\n      }\r\n\r\n    , setVelocity: function(valueX, valueY){\r\n        physics.velocity.x = valueX\r\n        physics.velocity.y = valueY\r\n        physics.calculateSpeed()\r\n      }\r\n\r\n    , lowerVelocityTo: function(value){\r\n        util.shrinkVectorToLength(physics.velocity, value)\r\n        physics.calculateSpeed()\r\n      }\r\n\r\n    , setObjectCollision: function (value, entityCollisions) {\r\n      physics.objectCollision = value\r\n      physics.entityCollisions = entityCollisions\r\n    }\r\n\r\n    , calculateSpeed: function(){\r\n        physics.currentSpeed = util.vectorLength(physics.velocity)\r\n      }\r\n  }\r\n\r\n  physics.init()\r\n\r\n  return physics\r\n}\r\n\r\n}());\r\n\n},{\"./../core/settings\":4,\"./../core/theatre\":6,\"./../core/ui\":7,\"./../core/util\":8,\"./../helpers/physicsHelper\":16,\"./../managers/entityManager\":18,\"./../systems/world\":21}],15:[function(_dereq_,module,exports){\n/******************************************************************************\r\n * gameTurf.js\r\n *\r\n * \r\n *****************************************************************************/\r\n\r\n\"use strict\";\r\n\r\n(function() {\r\n\r\n/*global require, module */\r\n\r\nmodule.exports = {\r\n\r\n    settings : _dereq_('./core/settings')\r\n,   input    : _dereq_('./core/input')\r\n,   theatre  : _dereq_('./core/theatre')\r\n,   ui       : _dereq_('./core/ui')\r\n,   sound    : _dereq_('./core/sound')\r\n,   util     : _dereq_('./core/util')\r\n,   game     : _dereq_('./core/game')\r\n,   face     : _dereq_('./entityPlugins/face')\r\n,   physics  : _dereq_('./entityPlugins/physics')\r\n,   wind     : _dereq_('./systems/wind')\r\n,   math     : _dereq_('./core/math')\r\n,   world    :  _dereq_('./systems/world')\r\n,   interaction: _dereq_('./entityPlugins/interaction')\r\n,   lastPositions : _dereq_('./entityPlugins/lastPositions')\r\n,   entityManager : _dereq_('./managers/entityManager')\r\n,   entityCollisionDetection : _dereq_('./detectors/entityCollisionDetection')\r\n}\r\n\r\n}())\r\n\n},{\"./core/game\":1,\"./core/input\":2,\"./core/math\":3,\"./core/settings\":4,\"./core/sound\":5,\"./core/theatre\":6,\"./core/ui\":7,\"./core/util\":8,\"./detectors/entityCollisionDetection\":9,\"./entityPlugins/face\":11,\"./entityPlugins/interaction\":12,\"./entityPlugins/lastPositions\":13,\"./entityPlugins/physics\":14,\"./managers/entityManager\":18,\"./systems/wind\":20,\"./systems/world\":21}],16:[function(_dereq_,module,exports){\n/**\r\n * physicsHelper.js\r\n *\r\n */\r\n\r\n(function() {\r\n\r\n    /*global require, module */\r\n    \r\n    var settings  = _dereq_('./../core/settings')\r\n    \r\n    var physicsHelper = {\r\n\r\n        \r\n\r\n        /**\r\n         * velocity 1 -> 100px pro Sekunde: 100 px/s\r\n         * @param {*} timeElapsed \r\n         * @param {*} velocityDirection \r\n         */\r\n        calculateVelocityForTime: function (timeElapsed, velocityDirection) {\r\n            return Math.round(((timeElapsed/10) * velocityDirection)*1000)/1000;\r\n        }\r\n    }\r\n    \r\n    module.exports = physicsHelper\r\n    \r\n}());\r\n\n},{\"./../core/settings\":4}],17:[function(_dereq_,module,exports){\n\r\n/******************************************************************************\r\n * tilesHelper.js\r\n *\r\n * \r\n *****************************************************************************/\r\n\r\n(function() {\r\n\r\n/*global require, module */\r\n\r\nvar theatre   = _dereq_('./../core/theatre')\r\nvar settings  = _dereq_('./../core/settings')\r\n\r\nvar tileHelper = {\r\n\r\n    tileWalls: []\r\n  , createdTime   : Date.now()\r\n  , grassHalmPositions: []\r\n  , neahrestTileWalls: []\r\n  , offscreenCanvas: []\r\n  , currentDialation: 0\r\n\r\n  , init: function(){\r\n\r\n  }\r\n\r\n  , createOffscreenCanvas: function (id) {\r\n\r\n    var canvasElement    = document.createElement('canvas')\r\n    canvasElement.height = settings.tileSize * theatre.scale\r\n    canvasElement.width  = settings.tileSize * theatre.scale\r\n    var canvas           = canvasElement.getContext('2d')\r\n    canvas.height        = settings.tileSize * theatre.scale\r\n    canvas.width         = settings.tileSize * theatre.scale\r\n\r\n    tileHelper.offscreenCanvas[id] = {\r\n      canvas: canvas,\r\n      canvasElement: canvasElement\r\n    }\r\n\r\n  }\r\n\r\n    /**\r\n     * Bedeutung:\r\n     *  \r\n     * 1 = 0001 --> setzte 2^0 stelle -> oben ist keine wand\r\n     * 2 = 0010 --> setzte 2^1 stelle -> rechts ist keine wand\r\n     * 4 = 0100 --> setzte 2^2 stelle -> unten ist keine wand\r\n     * 8 = 1000 --> setzte 2^3 stelle -> links ist keine wand\r\n     *\r\n     * (2^3, 2^2, 2^1, 2^0) --> (links, unten, rechts, oben)\r\n     *\r\n     * Wandarten:\r\n     *\r\n     *  0 -> 0000 -> links, unten, rechts, oben Wand\r\n     *  1 -> 0001 -> links, unten, rechts Wand\r\n     *  2 -> 0010 -> links, unten, oben Wand\r\n     *  3 -> 0011 -> links, unten  Wand\r\n     *  4 -> 0100 -> links, rechts, oben Wand\r\n     *  5 -> 0101 -> links, rechts Wand\r\n     *  6 -> 0110 -> links, oben Wand\r\n     *  7 -> 0111 -> links Wand\r\n     *  8 -> 1000 -> unten, rechts, oben Wand\r\n     *  9 -> 1001 -> unten, rechts Wand\r\n     * 10 -> 1010 -> unten, oben Wand\r\n     * 11 -> 1011 -> unten Wand\r\n     * 12 -> 1100 -> rechts, oben Wand\r\n     * 13 -> 1101 -> rechts Wand\r\n     * 14 -> 1110 -> oben Wand\r\n     * 15 -> 1111 -> keine Wand\r\n     *\r\n     * Danach addieren wir 1 drauf, somit wird Tiletypes:\r\n     *\r\n     * 0: keine Player/Map Zone\r\n     * 1: links, unten, rechts, oben Wand\r\n     * 2: links, unten, rechts Wand\r\n     * \r\n     *  ...\r\n     *\r\n     * 16: keine Wand\r\n     *\r\n     */\r\n  , calculateMapWithTileTypes: function(map, worldWith, wolrdHeight){\r\n      var mapWithTileTypes = []\r\n\r\n      for (var y = 0; y < wolrdHeight; y++) {\r\n        for (var x = 0; x < worldWith; x++) {\r\n\r\n          var arrayPosition = y * worldWith + x\r\n\r\n          if (map[arrayPosition] != 0) {\r\n\r\n            var val = 0\r\n\r\n            // oben ist keine wand\r\n            if (y > 0 && map[(y - 1) * worldWith + x] != 0) {\r\n              val |= 1\r\n            }\r\n\r\n            // rechts ist keine wand\r\n            if (x < (worldWith-1) && map[y * worldWith + x + 1] != 0) {\r\n              val |= 2\r\n            }\r\n\r\n            // unten ist keine wand\r\n            if (y < (wolrdHeight-1) && map[(y + 1) * worldWith + x] != 0){\r\n                val |= 4\r\n            }\r\n\r\n            // links ist keine wand\r\n            if (x > 0 && map[y * worldWith + x - 1] != 0) {\r\n              val |= 8\r\n            }\r\n\r\n            mapWithTileTypes[arrayPosition] = val + 1\r\n\r\n          } else {\r\n            mapWithTileTypes[arrayPosition] = 0\r\n          }\r\n        }\r\n      }\r\n\r\n      return mapWithTileTypes\r\n    }\r\n\r\n    /**\r\n     * example:\r\n     *  1001 && 0001 -> 0001 -> 1 -> oben keine Wand\r\n     *  1001 && 0010 -> 0000 -> 0 -> rechts ist Wand\r\n     *  1001 && 0100 -> 0000 -> 0 -> unten ist Wand\r\n     *  1001 && 1001 -> 1000 -> 8 -> links keine Wand\r\n     * \r\n     * (links, unten, rechts, oben)\r\n     */\r\n  , calculateNeahrestTileWalls: function(mapWithTileTypes, worldWith, wolrdHeight, position){\r\n\r\n      var arrayPosition      = 0\r\n        , tileArrayPositionX = Math.floor(Math.floor(position.x)/settings.tileSize)\r\n        , tileArrayPositionY = Math.floor(Math.floor(position.y)/settings.tileSize)\r\n\r\n      for (var x = tileArrayPositionX - 1; x <= (tileArrayPositionX + 1); x++) {\r\n        for (var y = tileArrayPositionY - 1; y <= (tileArrayPositionY + 1); y++) {\r\n\r\n          if (x<0 || y<0 || x>=worldWith||y >= wolrdHeight){\r\n              tileHelper.neahrestTileWalls[arrayPosition++] = undefined\r\n            } else {\r\n            tileHelper.neahrestTileWalls[arrayPosition++] = tileHelper.addTileWalls(\r\n              mapWithTileTypes\r\n            , x\r\n            , y\r\n            , worldWith)\r\n            }\r\n        }\r\n      }\r\n    }\r\n\r\n  , addTileWalls: function(\r\n      mapWithTileTypes\r\n    , tileArrayPositionX\r\n    , tileArrayPositionY\r\n    , worldWith){\r\n\r\n      if (tileHelper.tileWalls[tileArrayPositionY * worldWith + tileArrayPositionX] == undefined) {\r\n        \r\n        var wallType = mapWithTileTypes[tileArrayPositionY * worldWith + tileArrayPositionX] - 1\r\n          , walls    = []\r\n\r\n          , tileLeftTopPosition = {\r\n              x: tileArrayPositionX * settings.tileSize\r\n            , y: tileArrayPositionY * settings.tileSize\r\n          }\r\n          , tileRightTopPosition = {\r\n              x: tileLeftTopPosition.x + settings.tileSize\r\n            , y: tileLeftTopPosition.y\r\n          }\r\n          , tileRightBottomPosition = {\r\n              x: tileLeftTopPosition.x + settings.tileSize\r\n            , y: tileLeftTopPosition.y + settings.tileSize\r\n          }\r\n\r\n          , tileLeftBottomosition = {\r\n              x: tileLeftTopPosition.x\r\n            , y: tileLeftTopPosition.y + settings.tileSize\r\n          }\r\n\r\n        // oben ist wand\r\n        if ((wallType & 1) === 0) {\r\n          walls.push([tileLeftTopPosition, tileRightTopPosition])\r\n        }\r\n\r\n        // rechts ist wand\r\n        if ((wallType & 2) === 0) {\r\n          walls.push([tileRightTopPosition, tileRightBottomPosition])\r\n        }\r\n\r\n        // unten ist wand\r\n        if ((wallType & 4) === 0) {\r\n          walls.push([tileLeftBottomosition, tileRightBottomPosition])\r\n        }\r\n\r\n        // links ist wand\r\n        if ((wallType & 8) === 0) {\r\n          walls.push([tileLeftTopPosition, tileLeftBottomosition])\r\n        }\r\n\r\n        tileHelper.tileWalls[tileArrayPositionY * worldWith + tileArrayPositionX] = walls\r\n      }\r\n\r\n      return tileHelper.tileWalls[tileArrayPositionY * worldWith + tileArrayPositionX]\r\n    }\r\n\r\n  , calculateCurrentDialation: function () {\r\n      //animationSpan\r\n      var timeLength = 5000\r\n      var timeSegments = (Date.now() - tileHelper.createdTime) % timeLength\r\n\r\n      // linearNormalizeTimeSegments: -1 to 1 => mapping to smaller range\r\n      var linearNormalizeTimeSegments = timeSegments / timeLength\r\n      linearNormalizeTimeSegments *= 2\r\n      linearNormalizeTimeSegments -= 1\r\n   \r\n      // quadraticNormalizeTimeSegments: 0 to 1 to 0 => ^^^^^^^ => -1 is zero and 1 is zero -> continues loop for animation\r\n      tileHelper.currentDialation = ((-1 * Math.pow(linearNormalizeTimeSegments, 2)) + 1)\r\n  }\r\n\r\n  , drawTiles: function(timeElapsed, map, mapWithTileTypes, worldWith, wolrdHeight){\r\n\r\n      var mintileArrayPositionX = Math.floor(Math.floor(theatre.canvasBoxLeft)   / settings.tileSize)\r\n        , mintileArrayPositionY = Math.floor(Math.floor(theatre.canvasBoxTop)    / settings.tileSize)\r\n\r\n        , maxtileArrayPositionX = Math.floor(Math.floor(theatre.canvasBoxRight)  / settings.tileSize)\r\n        , maxtileArrayPositionY = Math.floor(Math.floor(theatre.canvasBoxBottom) / settings.tileSize)\r\n\r\n      if (mintileArrayPositionX < 0 ) mintileArrayPositionX = 0\r\n      if (mintileArrayPositionY < 0 ) mintileArrayPositionY = 0\r\n      if (maxtileArrayPositionX < 0 ) maxtileArrayPositionX = 0\r\n      if (maxtileArrayPositionY < 0 ) maxtileArrayPositionY = 0\r\n\r\n      if (mintileArrayPositionX > worldWith   - 1) mintileArrayPositionX = worldWith   - 1\r\n      if (mintileArrayPositionY > wolrdHeight - 1) mintileArrayPositionY = wolrdHeight - 1\r\n      if (maxtileArrayPositionX > worldWith   - 1) maxtileArrayPositionX = worldWith   - 1\r\n      if (maxtileArrayPositionY > wolrdHeight - 1) maxtileArrayPositionY = wolrdHeight - 1\r\n\r\n      var tilePosition = {}\r\n\r\n      tileHelper.calculateCurrentDialation();\r\n      tileHelper.clearOffscreenCanvas();\r\n      tileHelper.drawOffscreenGrass();\r\n\r\n      for (var y = mintileArrayPositionY; y <= maxtileArrayPositionY; y++) {\r\n        for (var x = mintileArrayPositionX; x <= maxtileArrayPositionX; x++) {\r\n\r\n          var tiletype = mapWithTileTypes[y * worldWith + x]\r\n\r\n          if (tiletype === 0) continue\r\n\r\n          var tileWidth      = settings.tileSize\r\n            , tileHeight     = settings.tileSize\r\n          \r\n          tilePosition.x = (x * settings.tileSize)\r\n          tilePosition.y = (y * settings.tileSize)\r\n\r\n          var wallType = tiletype - 1;\r\n\r\n          theatre.drawSquareFromLeftTopCorner(\r\n            'backdrop'\r\n          , tilePosition\r\n          , settings.tileSize +1\r\n          , '#80bdbf')\r\n          //, \"#CCDDAF\")\r\n\r\n\r\n          theatre.drawBezierCurvedSquareFromCenter(\r\n            'backdrop', \r\n            {\r\n              position: {\r\n                  x: tilePosition.x + (tileWidth/2)\r\n                , y: tilePosition.y + (tileHeight/2)\r\n              },\r\n              width: tileWidth +1,\r\n              height: tileHeight +1,\r\n              halfWidth: (tileWidth+1)/2,\r\n              halfHeight: (tileHeight+1)/2\r\n            }, \r\n            '#CCDDAF', //'rgba(204, 221, 175,.4)',\r\n            (tileHelper.currentDialation*2) * theatre.scale * -1, \r\n            (tileWidth/2),\r\n            (wallType & 1) !== 0,\r\n            (wallType & 2) !== 0,\r\n            (wallType & 4) !== 0,\r\n            (wallType & 8) !== 0);\r\n\r\n          if (map[y * worldWith + x] === 2) {\r\n            tileHelper.drawGrass(theatre.foreground, tilePosition, tileWidth, tileHeight, 6)\r\n          } else {\r\n            tileHelper.drawGrass(theatre.backdrop, tilePosition, tileWidth, tileHeight, 3)\r\n          }\r\n        }\r\n      }\r\n\r\n    }\r\n  \r\n  , drawGrass: function(canvas, position, width, height, grassHeight){\r\n      //theatre.resetCanvasTransformation(\"foreground\")\r\n      //theatre.foreground.putImageData(tileHelper.highGrass, position.x * theatre.scale, position.y * theatre.scale)\r\n      //theatre.setCanvasTransformation(\"foreground\");\r\n      canvas.drawImage(tileHelper.offscreenCanvas[grassHeight].canvasElement, position.x * theatre.scale, position.y * theatre.scale)\r\n    }\r\n  , drawOffscreenGrass: function () {\r\n\r\n      var grassTall = 6;\r\n      if (tileHelper.offscreenCanvas[grassTall] === undefined) {\r\n        tileHelper.createOffscreenCanvas(grassTall);\r\n      }\r\n      var grassNormal = 3\r\n      if (tileHelper.offscreenCanvas[grassNormal] === undefined) {\r\n        tileHelper.createOffscreenCanvas(grassNormal);\r\n      }\r\n\r\n      tileHelper.drawOffscreenGrassVariation(tileHelper.offscreenCanvas[grassTall].canvas, tileHelper.currentDialation, 50, grassTall);\r\n      tileHelper.drawOffscreenGrassVariation(tileHelper.offscreenCanvas[grassNormal].canvas, tileHelper.currentDialation, 10, grassNormal);\r\n      \r\n      //tileHelper.highGrass = tileHelper.offscreenCanvas.getImageData(0, 0, settings.tileSize * theatre.scale, settings.tileSize * theatre.scale)\r\n      //tileHelper.drawOffscreenGrassVariation(tileHelper.currentDialation, 20, 3)\r\n  }\r\n\r\n  , drawOffscreenGrassVariation: function (canvas, quadraticNormalizeTimeSegments, count, grassHeight) {\r\n    \r\n    canvas.beginPath();\r\n    canvas.lineWidth = 1\r\n    canvas.strokeStyle = \"rgba(167,191,127,0.6)\";\r\n\r\n    if (tileHelper.grassHalmPositions[grassHeight]) {\r\n    } else {\r\n      tileHelper.grassHalmPositions[grassHeight] = []\r\n    }\r\n\r\n    for (var i = count; i >= 0; i--) {\r\n      var grassHalmPosition;\r\n      if (tileHelper.grassHalmPositions[grassHeight][i]) {\r\n        grassHalmPosition = tileHelper.grassHalmPositions[grassHeight][i]\r\n      } else {\r\n        tileHelper.grassHalmPositions[grassHeight][i] = {\r\n          x: (((Math.random() * (settings.tileSize-grassHeight))+ grassHeight))\r\n        , y: (((Math.random() * (settings.tileSize-grassHeight))+ grassHeight))\r\n        }\r\n\r\n        grassHalmPosition = tileHelper.grassHalmPositions[grassHeight][i];\r\n      }\r\n\r\n      canvas.moveTo(\r\n        Math.floor(grassHalmPosition.x) * theatre.scale\r\n      , Math.floor(grassHalmPosition.y) * theatre.scale\r\n      )\r\n\r\n      canvas.quadraticCurveTo(\r\n        Math.floor(grassHalmPosition.x) * theatre.scale\r\n      , Math.floor(grassHalmPosition.y - (grassHeight/2)) * theatre.scale\r\n      , Math.floor(grassHalmPosition.x + ((grassHeight*quadraticNormalizeTimeSegments)-(grassHeight/2))) * theatre.scale\r\n      , Math.floor(grassHalmPosition.y - grassHeight) * theatre.scale\r\n      )\r\n    }\r\n\r\n    canvas.stroke()\r\n    canvas.lineWidth = 1\r\n  }\r\n  , clearOffscreenCanvas: function() {\r\n    tileHelper.offscreenCanvas.forEach(function(canvasObj){\r\n      canvasObj.canvas.clearRect(\r\n        0\r\n      , 0\r\n      , canvasObj.canvasElement.width\r\n      , canvasObj.canvasElement.height)\r\n    })  \r\n  }\r\n}\r\n\r\ntileHelper.init()\r\n\r\nmodule.exports = tileHelper\r\n\r\n}());\r\n\n},{\"./../core/settings\":4,\"./../core/theatre\":6}],18:[function(_dereq_,module,exports){\n/******************************************************************************\r\n * entityManager.js\r\n *\r\n * \r\n *****************************************************************************/\r\n\r\n(function() {\r\n\r\n/*global require, module */\r\n\r\nvar QuadTree  = _dereq_('../../vendors/QuadTree')\r\nvar theatre   = _dereq_('../core/theatre')\r\nvar util      = _dereq_('../core/util')\r\nQuadTree = QuadTree.QuadTree;\r\n\r\nvar entityManager = {\r\n\r\n    entities        : []\r\n  , visibleEntities : []\r\n  , tree            : new QuadTree({\r\n      x      : 0\r\n    , y      : 0\r\n    , width  : 14000\r\n    , height : 13000\r\n    })\r\n\r\n  , add: function(entity){\r\n      var nextIndex                     = entityManager.entities.length\r\n      entity.Id                         = nextIndex\r\n      entity.physics.id                 = nextIndex\r\n      entityManager.entities[nextIndex] = entity\r\n    }\r\n\r\n  , update: function(timeElapsed){\r\n\r\n      entityManager.visibleEntities = entityManager.tree.retrieveInBounds({\r\n        x      : theatre.canvasBoxLeft\r\n      , y      : theatre.canvasBoxTop\r\n      , width  : theatre.canvasWidth\r\n      , height : theatre.canvasHeight\r\n      })\r\n\r\n      for (var y = entityManager.entities.length - 1; y >= 0; y--) {\r\n        entityManager.entities[y].update(timeElapsed)\r\n      }\r\n\r\n      entityManager.tree.clear();\r\n      for (var i = entityManager.entities.length - 1; i >= 0; i--) {\r\n        entityManager.entities[i].physics.position.id = entityManager.entities[i].physics.id\r\n        entityManager.tree.insert(entityManager.entities[i].physics.position)\r\n      }\r\n    }\r\n\r\n  , postUpdate: function(timeElapsed){\r\n      for (var i = entityManager.entities.length - 1; i >= 0; i--) {\r\n        if (entityManager.entities[i].postUpdate) {\r\n          entityManager.entities[i].postUpdate(timeElapsed)\r\n        }\r\n      }\r\n    }\r\n  \r\n  , preDraw: function(timeElapsed){\r\n      for (var i = entityManager.visibleEntities.length - 1; i >= 0; i--) {\r\n        var id = entityManager.visibleEntities[i].id\r\n        if (entityManager.entities[id].preDraw) {\r\n          entityManager.entities[id].preDraw(timeElapsed)\r\n        }\r\n      }\r\n    }\r\n\r\n  , draw: function(timeElapsed){\r\n      for (var i = entityManager.visibleEntities.length - 1; i >= 0; i--) {\r\n        var id = entityManager.visibleEntities[i].id\r\n        entityManager.entities[id].draw(timeElapsed)\r\n      }\r\n    }\r\n\r\n  , getNeahrestEntity: function(entity, maxRange){\r\n\r\n      maxRange =  maxRange || 0\r\n\r\n      var neahrestEnitty\r\n      var neahrestEnittyDistance = Number.MAX_SAFE_INTEGER\r\n\r\n      for (var y = entityManager.visibleEntities.length - 1; y >= 0; y--) {\r\n        var checkEntityId = entityManager.visibleEntities[y].id\r\n        var checkEntity   = entityManager.entities[checkEntityId]\r\n\r\n        if (entity.physics.id == checkEntityId) {\r\n          continue\r\n        }\r\n\r\n        var distanceVector = {\r\n          x: entity.physics.position.x - checkEntity.physics.position.x\r\n        , y: entity.physics.position.y - checkEntity.physics.position.y\r\n        }\r\n\r\n        var checkDistance = util.vectorLength(distanceVector)\r\n\r\n        if (checkDistance < neahrestEnittyDistance \r\n          && checkDistance <= maxRange) {\r\n          neahrestEnitty         = checkEntity\r\n          neahrestEnittyDistance = checkDistance\r\n        }\r\n      }\r\n\r\n      return neahrestEnitty\r\n    }\r\n}\r\n\r\nmodule.exports = entityManager\r\n\r\n}())\r\n\n},{\"../../vendors/QuadTree\":22,\"../core/theatre\":6,\"../core/util\":8}],19:[function(_dereq_,module,exports){\n/******************************************************************************\r\n * windParticleFactory.js\r\n *\r\n * \r\n *****************************************************************************/\r\n\r\n(function() {\r\n\r\n/*global require, module */\r\n\r\nvar theatre       = _dereq_('./../core/theatre')\r\nvar Physics       = _dereq_('./../entityPlugins/physics')\r\nvar LastPositions = _dereq_('./../entityPlugins/lastPositions')\r\nvar sound         = _dereq_('./../core/sound')\r\nvar physicsHelper = _dereq_('./../helpers/physicsHelper')\r\nvar ui            = _dereq_('./../core/ui')\r\n\r\nif (ui.datGui) {\r\n  var windParticles = ui.datGui.addFolder(\"WindParticles\")\r\n}  \r\n\r\nvar WindParticleFactory = function(id){\r\n\r\n  var WindParticle = {\r\n      Id: id\r\n    , type: 'WindParticle'\r\n    , physics: Physics({\r\n        position: {\r\n          x : 0\r\n        , y : 0\r\n        }\r\n      , height         : 5\r\n      , width          : 5\r\n      , canWorldColide : false\r\n      })\r\n    , lastPositions: LastPositions({\r\n        shouldDrawBodies: false\r\n      , color: {\r\n          r: 255\r\n        , g: 255\r\n        , b: 255\r\n        }\r\n      })\r\n    , isAlive               : false\r\n    , lifeTime              : 1500\r\n    , createdTime           : undefined\r\n    , movementDirectionData : {\r\n        isRunning   : false\r\n      , vector      : { x: 0, y: 0 }\r\n      }\r\n\r\n    , birth: function(){\r\n        WindParticle.createdTime = Date.now()\r\n        WindParticle.isAlive     = true\r\n        sound.playEffect('wind')\r\n        WindParticle.physics.position.x = theatre.canvasBoxLeft + (Math.random() * theatre.stageCanvas.width)\r\n        WindParticle.physics.position.y = theatre.canvasBoxTop  + (Math.random() * theatre.stageCanvas.height)\r\n      }\r\n\r\n    , update: function(timeElapsed, windDirection, windSpeed){\r\n\r\n        var currentLifeTime = Date.now() - WindParticle.createdTime\r\n\r\n        if(currentLifeTime > WindParticle.lifeTime){\r\n\r\n          WindParticle.isAlive = false\r\n          WindParticle.lastPositions.clear()\r\n        \r\n        } else {\r\n          // value between -1 and 1\r\n          var currentLifeTimeNormal = (currentLifeTime / (WindParticle.lifeTime / 2)) - 1\r\n          // negative quatraic function for high middle value and low start/end points\r\n          var setTimeDelay = ((-1 * Math.pow(currentLifeTimeNormal, 2) + 1) * 150)\r\n\r\n          WindParticle.lastPositions.lineWidth    = ((setTimeDelay) / 150) * 2\r\n          WindParticle.lastPositions.setTimeDelay = setTimeDelay\r\n\r\n          WindParticle.lastPositions.update(WindParticle.physics)\r\n\r\n          WindParticle.physics.speed = windSpeed\r\n\r\n          WindParticle.movementDirectionData.vector.x = (Math.random() - 0.5 + windDirection.x)\r\n          WindParticle.movementDirectionData.vector.y = (Math.random() - 0.5 + windDirection.y)\r\n\r\n          WindParticle.physics.update(timeElapsed, WindParticle.movementDirectionData)\r\n        }\r\n      }\r\n\r\n      , draw: function(timeElapsed){\r\n\r\n        WindParticle.lastPositions.draw(WindParticle.physics)\r\n        /*\r\n        var currentLifeTime = Date.now() - WindParticle.createdTime\r\n\r\n        // value between -1 and 1\r\n        var currentLifeTimeNormal = (currentLifeTime/(WindParticle.lifeTime/2)) - 1\r\n\r\n        // negative quatraic function for high middle value and low start/end points\r\n        var opacity = ((-1 * Math.pow(currentLifeTimeNormal, 2)) + 1)\r\n        */\r\n      }\r\n  }\r\n  \r\n  if (ui.datGui) {\r\n    var datGuiFolder = windParticles.addFolder(\"WindParticle - \" + WindParticle.Id)\r\n    ui.datGui.remember(WindParticle)\r\n    datGuiFolder.add(WindParticle, \"isAlive\").listen()\r\n    datGuiFolder.add(WindParticle, \"lifeTime\").listen()\r\n    //datGuiFolder.add(WindParticle, \"createdTime\")\r\n    datGuiFolder.add(WindParticle, \"type\")\r\n\r\n    datGuiFolder.add(WindParticle.movementDirectionData.vector, \"x\").listen()\r\n    datGuiFolder.add(WindParticle.movementDirectionData.vector, \"y\").listen()\r\n    datGuiFolder.add(WindParticle.movementDirectionData, \"isRunning\").listen()\r\n\r\n    WindParticle.lastPositions.addToDatGuiFolder(datGuiFolder)\r\n    WindParticle.physics.addToDatGuiFolder(datGuiFolder)\r\n  }\r\n\r\n  return WindParticle\r\n}\r\n\r\nmodule.exports =  WindParticleFactory\r\n\r\n}())\r\n\n},{\"./../core/sound\":5,\"./../core/theatre\":6,\"./../core/ui\":7,\"./../entityPlugins/lastPositions\":13,\"./../entityPlugins/physics\":14,\"./../helpers/physicsHelper\":16}],20:[function(_dereq_,module,exports){\n/******************************************************************************\r\n * wind.js\r\n *\r\n * \r\n *****************************************************************************/\r\n\r\n(function() {\r\n\r\n/*global require, module */\r\n\r\nvar util                = _dereq_('./../core/util')\r\nvar WindParticleFactory = _dereq_('./WindParticleFactory')\r\nvar ui                  = _dereq_('./../core/ui')\r\n\r\nvar wind = {\r\n\r\n    windParticles        : []\r\n  , windDirection        : { x: 1, y:0 }\r\n  , windSpeed            : 4\r\n  , maxAliveWindPartiles : 10\r\n\r\n  , init: function(){\r\n      for (var i = 0; i < 10; i++) {\r\n        wind.windParticles.push(WindParticleFactory(i))\r\n      }\r\n    }\r\n\r\n  , influenceEntityPhysic: function(physics, moveDirectionVector){\r\n      if (Math.random() > 0.5) {\r\n        moveDirectionVector.x += (wind.windDirection.x * (1 / physics.mass)) / 1000\r\n        moveDirectionVector.y += (wind.windDirection.y * (1 / physics.mass)) / 1000\r\n      }\r\n    }\r\n\r\n  , update: function(timeElapsed){\r\n\r\n      if (Math.random()>0.995){\r\n        wind.windSpeed = (Math.random() * 9) + 1\r\n      }\r\n\r\n      if (Math.random()>0.95) {\r\n        wind.windDirection.x = Math.random() - 0.5 + wind.windDirection.x\r\n        wind.windDirection.y = Math.random() - 0.5 + wind.windDirection.y\r\n        util.setVectorToLengthOne(wind.windDirection)\r\n      }\r\n\r\n      if(Math.random() > (0.995 - (wind.windSpeed/100))) {\r\n        for (var i = 0; i < wind.maxAliveWindPartiles; i++) {\r\n          if (!wind.windParticles[i].isAlive){\r\n            wind.windParticles[i].birth()\r\n            break\r\n          }\r\n        }\r\n      }\r\n\r\n      for (var i = 0; i < wind.maxAliveWindPartiles; i++){\r\n        if (wind.windParticles[i].isAlive){\r\n          wind.windParticles[i].update(timeElapsed, wind.windDirection, wind.windSpeed)\r\n        }\r\n      }\r\n    }\r\n\r\n  , draw: function(timeElapsed){\r\n      for (var i = 0; i < wind.maxAliveWindPartiles; i++){\r\n        if (wind.windParticles[i].isAlive){\r\n          wind.windParticles[i].draw(timeElapsed)\r\n        }\r\n      }\r\n    }\r\n}\r\n\r\nwind.init()\r\n\r\nif (ui.datGui) {\r\n  var datGuiFolder = ui.datGui.addFolder(\"Wind\")\r\n  datGuiFolder.add(wind.windDirection, \"x\").listen();   \r\n  datGuiFolder.add(wind.windDirection, \"y\").listen();   \r\n  datGuiFolder.add(wind, \"windSpeed\").listen();  \r\n  datGuiFolder.add(wind, \"maxAliveWindPartiles\")\r\n}\r\n\r\nmodule.exports = wind\r\n\r\n}())\r\n\n},{\"./../core/ui\":7,\"./../core/util\":8,\"./WindParticleFactory\":19}],21:[function(_dereq_,module,exports){\n/******************************************************************************\r\n * gameTurf.js\r\n *\r\n * \r\n *****************************************************************************/\r\n\r\n (function() {\r\n\r\n/*global require, module */\r\n\r\nvar tilesHelper               = _dereq_('./../helpers/tilesHelper')\r\nvar worldCollisionDetection  = _dereq_('./../detectors/worldCollisionDetection')\r\n\r\nvar world = {\r\n\r\n    map              : undefined\r\n  , worldWith        : undefined\r\n  , wolrdHeight      : undefined\r\n  , mapWithTileTypes : undefined\r\n\r\n    /**\r\n     *  Initialize the World.\r\n     *\r\n     *  @param {array[number]} map  \r\n     *  @param {number} height\r\n     *  @param {number} width \r\n     */\r\n  , init: function(\r\n      map \r\n    , height \r\n    , width\r\n    ){\r\n      world.map              = map\r\n      world.worldWith        = width\r\n      world.wolrdHeight      = height\r\n      world.mapWithTileTypes = tilesHelper.calculateMapWithTileTypes(\r\n        world.map\r\n      , world.worldWith\r\n      , world.wolrdHeight)\r\n    }\r\n\r\n    /**\r\n     *  Detect if hitbox is coliding with the world border.\r\n     *  \r\n     *  @param {} \r\n     */\r\n  , collsitionDetection: function(\r\n      timeElapsed\r\n    , physics\r\n    ){  \r\n      return worldCollisionDetection.collsitionDetection(\r\n        timeElapsed\r\n      , world.mapWithTileTypes\r\n      , world.worldWith\r\n      , world.wolrdHeight\r\n      , physics)\r\n    }\r\n\r\n    /**\r\n     *\r\n     */\r\n  , draw: function(timeElapsed) {\r\n      tilesHelper.drawTiles(\r\n        timeElapsed\r\n      , world.map\r\n      , world.mapWithTileTypes\r\n      , world.worldWith\r\n      , world.wolrdHeight)\r\n    }\r\n};\r\n\r\nmodule.exports =  world\r\n\r\n}())\r\n\n},{\"./../detectors/worldCollisionDetection\":10,\"./../helpers/tilesHelper\":17}],22:[function(_dereq_,module,exports){\n/*\r\n\tThe MIT License\r\n\r\n\tCopyright (c) 2011 Mike Chambers\r\n\r\n\tPermission is hereby granted, free of charge, to any person obtaining a copy\r\n\tof this software and associated documentation files (the \"Software\"), to deal\r\n\tin the Software without restriction, including without limitation the rights\r\n\tto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n\tcopies of the Software, and to permit persons to whom the Software is\r\n\tfurnished to do so, subject to the following conditions:\r\n\r\n\tThe above copyright notice and this permission notice shall be included in\r\n\tall copies or substantial portions of the Software.\r\n\r\n\tTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n\tIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n\tFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n\tAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n\tLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n\tOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n\tTHE SOFTWARE.\r\n*/\r\n\r\n\r\n/**\r\n* A QuadTree implementation in JavaScript, a 2d spatial subdivision algorithm.\r\n* @module QuadTree\r\n**/\r\n\r\n(function(window) {\r\n\r\n/****************** QuadTree ****************/\r\n\r\n/**\r\n* QuadTree data structure.\r\n* @class QuadTree\r\n* @constructor\r\n* @param {Object} An object representing the bounds of the top level of the QuadTree. The object \r\n* should contain the following properties : x, y, width, height\r\n* @param {Boolean} pointQuad Whether the QuadTree will contain points (true), or items with bounds \r\n* (width / height)(false). Default value is false.\r\n* @param {Number} maxDepth The maximum number of levels that the quadtree will create. Default is 4.\r\n* @param {Number} maxChildren The maximum number of children that a node can contain before it is split into sub-nodes.\r\n**/\r\nfunction QuadTree(bounds, pointQuad, maxDepth, maxChildren)\r\n{\t\r\n\tvar node;\r\n\tif(pointQuad)\r\n\t{\r\n\t\t\r\n\t\tnode = new Node(bounds, 0, maxDepth, maxChildren);\r\n\t}\r\n\telse\r\n\t{\r\n\t\tnode = new BoundsNode(bounds, 0, maxDepth, maxChildren);\r\n\t}\r\n\t\r\n\tthis.root = node;\r\n}\r\n\r\n/**\r\n* The root node of the QuadTree which covers the entire area being segmented.\r\n* @property root\r\n* @type Node\r\n**/\r\nQuadTree.prototype.root = null;\r\n\r\n\r\n/**\r\n* Inserts an item into the QuadTree.\r\n* @method insert\r\n* @param {Object|Array} item The item or Array of items to be inserted into the QuadTree. The item should expose x, y \r\n* properties that represents its position in 2D space.\r\n**/\r\nQuadTree.prototype.insert = function(item)\r\n{\r\n\tif(item instanceof Array)\r\n\t{\r\n\t\tvar len = item.length;\r\n\t\t\r\n\t\tfor(var i = 0; i < len; i++)\r\n\t\t{\r\n\t\t\tthis.root.insert(item[i]);\r\n\t\t}\r\n\t}\r\n\telse\r\n\t{\r\n\t\tthis.root.insert(item);\r\n\t}\r\n}\r\n\r\n/**\r\n* Clears all nodes and children from the QuadTree\r\n* @method clear\r\n**/\r\nQuadTree.prototype.clear = function()\r\n{\r\n\tthis.root.clear();\r\n}\r\n\r\n/**\r\n* Retrieves all items / points in the same node as the specified item / point. If the specified item\r\n* overlaps the bounds of a node, then all children in both nodes will be returned.\r\n* @method retrieve\r\n* @param {Object} item An object representing a 2D coordinate point (with x, y properties), or a shape\r\n* with dimensions (x, y, width, height) properties.\r\n**/\r\nQuadTree.prototype.retrieve = function(item)\r\n{\r\n\t//get a copy of the array of items\r\n\tvar out = this.root.retrieve(item).slice(0);\r\n\t//return QuadTree._filterResults(out, {x:item.x, y:item.y, width:0, height:0});\r\n\treturn out;\r\n}\r\n\r\nQuadTree.prototype.retrieveInBounds = function (bounds)\r\n{\r\n\tvar treeResult = this.root.retrieveInBounds(bounds);\r\n\treturn QuadTree._filterResults(treeResult, bounds);\r\n}\r\n\r\nQuadTree._filterResults = function(treeResult, bounds)\r\n{\r\n\tvar filteredResult = [];\r\n\r\n\tif(this.root instanceof BoundsNode)\r\n\t{\r\n\t\tfor (var i=0; i < treeResult.length; i++)\r\n\t\t{\r\n\t\t\tvar node = treeResult[i];\r\n\t\t\tif (QuadTree._isBoundOverlappingBound(node, bounds))\r\n\t\t\t{\r\n\t\t\t\tfilteredResult.push(node);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\telse\r\n\t{\r\n\t\tfor (var i=0; i < treeResult.length; i++)\r\n\t\t{\r\n\t\t\tvar node = treeResult[i];\r\n\t\t\tif(QuadTree._isPointInsideBounds(node, bounds))\r\n\t\t\t{\r\n\t\t\t\tfilteredResult.push(node);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\treturn filteredResult;\r\n}\r\n\r\nQuadTree._isPointInsideBounds = function (point, bounds)\r\n{\r\n\treturn (\r\n\t\t(point.x >= bounds.x) &&\r\n\t\t(point.x <= bounds.x + bounds.width) &&\r\n\t\t(point.y >= bounds.y) &&\r\n\t\t(point.y <= bounds.y + bounds.height)\r\n\t);\r\n}\r\n\r\n\r\nQuadTree._isBoundOverlappingBound = function (b1, b2)\r\n{\r\n\treturn !(\r\n\t        b1.x > (b2.x + b2.width)  || \r\n\t\t\tb2.x > (b1.x + b1.width)  || \r\n\t        b1.y > (b2.y + b2.height) ||\r\n\t        b2.y > (b1.y + b1.height)\r\n\t   );\r\n}\r\n\r\n/************** Node ********************/\r\n\r\n\r\nfunction Node(bounds, depth, maxDepth, maxChildren)\r\n{\r\n\tthis._bounds = bounds;\r\n\tthis.children = [];\r\n\tthis.nodes = [];\r\n\t\r\n\tif(maxChildren)\r\n\t{\r\n\t\tthis._maxChildren = maxChildren;\r\n\t\t\r\n\t}\r\n\t\r\n\tif(maxDepth)\r\n\t{\r\n\t\tthis._maxDepth = maxDepth;\r\n\t}\r\n\t\r\n\tif(depth)\r\n\t{\r\n\t\tthis._depth = depth;\r\n\t}\r\n}\r\n\r\n//subnodes\r\nNode.prototype.nodes = null;\r\nNode.prototype._classConstructor = Node;\r\n\r\n//children contained directly in the node\r\nNode.prototype.children = null;\r\nNode.prototype._bounds = null;\r\n\r\n//read only\r\nNode.prototype._depth = 0;\r\n\r\nNode.prototype._maxChildren = 4;\r\nNode.prototype._maxDepth = 4;\r\n\r\nNode.TOP_LEFT = 0;\r\nNode.TOP_RIGHT = 1;\r\nNode.BOTTOM_LEFT = 2;\r\nNode.BOTTOM_RIGHT = 3;\r\n\r\n\r\nNode.prototype.insert = function(item)\r\n{\r\n\tif(this.nodes.length)\r\n\t{\r\n\t\tvar index = this._findIndex(item);\r\n\t\t\r\n\t\tthis.nodes[index].insert(item);\r\n\t\t\r\n\t\treturn;\r\n\t}\r\n\r\n\tthis.children.push(item);\r\n\r\n\tvar len = this.children.length;\r\n\tif(!(this._depth >= this._maxDepth) && \r\n\t\tlen > this._maxChildren)\r\n\t{\r\n\t\tthis.subdivide();\r\n\t\t\r\n\t\tfor(var i = 0; i < len; i++)\r\n\t\t{\r\n\t\t\tthis.insert(this.children[i]);\r\n\t\t}\r\n\t\t\r\n\t\tthis.children.length = 0;\r\n\t}\r\n}\r\n\r\nNode.prototype.retrieve = function(item)\r\n{\r\n\tif(this.nodes.length)\r\n\t{\r\n\t\tvar index = this._findIndex(item);\r\n\t\t\r\n\t\treturn this.nodes[index].retrieve(item);\r\n\t}\r\n\t\r\n\treturn this.children;\r\n}\r\n\r\nNode.prototype.retrieveInBounds = function(bounds)\r\n{\r\n\tvar result = [];\r\n\r\n\tif(this.collidesWith(bounds))\r\n\t{\r\n\t\tresult = result.concat(this._stuckChildren);\r\n\t\t\r\n\t\tif(this.children.length)\r\n\t\t{\r\n\t\t\tresult = result.concat(this.children);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tif(this.nodes.length)\r\n\t\t\t{\r\n\t\t\t\tfor (var i = 0; i < this.nodes.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tresult = result.concat(this.nodes[i].retrieveInBounds(bounds));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn result;\r\n}\r\n\r\n\r\nNode.prototype.collidesWith = function (bounds)\r\n{\r\n\tvar b1 = this._bounds;\r\n\tvar b2 = bounds;\r\n\r\n\treturn !(\r\n\t        b1.x > (b2.x + b2.width)  || \r\n\t\t\tb2.x > (b1.x + b1.width)  || \r\n\t        b1.y > (b2.y + b2.height) ||\r\n\t        b2.y > (b1.y + b1.height)\r\n\t   );\r\n}\r\n\r\nNode.prototype._findIndex = function(item)\r\n{\r\n\tvar b = this._bounds;\r\n\tvar left = (item.x > b.x + b.width / 2)? false : true;\r\n\tvar top = (item.y > b.y + b.height / 2)? false : true;\r\n\t\r\n\t//top left\r\n\tvar index = Node.TOP_LEFT;\r\n\tif(left)\r\n\t{\r\n\t\t//left side\r\n\t\tif(!top)\r\n\t\t{\r\n\t\t\t//bottom left\r\n\t\t\tindex = Node.BOTTOM_LEFT;\r\n\t\t}\r\n\t}\r\n\telse\r\n\t{\r\n\t\t//right side\r\n\t\tif(top)\r\n\t\t{\r\n\t\t\t//top right\r\n\t\t\tindex = Node.TOP_RIGHT;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t//bottom right\r\n\t\t\tindex = Node.BOTTOM_RIGHT;\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn index;\r\n}\r\n\r\n\r\nNode.prototype.subdivide = function()\r\n{\r\n\tvar depth = this._depth + 1;\r\n\t\r\n\tvar bx = this._bounds.x;\r\n\tvar by = this._bounds.y;\r\n\t\r\n\t//floor the values\r\n\tvar b_w_h = (this._bounds.width / 2)|0;\r\n\tvar b_h_h = (this._bounds.height / 2)|0;\r\n\tvar bx_b_w_h = bx + b_w_h;\r\n\tvar by_b_h_h = by + b_h_h;\r\n\r\n\t//top left\r\n\tthis.nodes[Node.TOP_LEFT] = new this._classConstructor({\r\n\t\tx:bx, \r\n\t\ty:by, \r\n\t\twidth:b_w_h, \r\n\t\theight:b_h_h\r\n\t}, \r\n\tdepth, this._maxDepth, this._maxChildren);\r\n\t\r\n\t//top right\r\n\tthis.nodes[Node.TOP_RIGHT] = new this._classConstructor({\r\n\t\tx:bx_b_w_h,\r\n\t\ty:by,\r\n\t\twidth:b_w_h, \r\n\t\theight:b_h_h\r\n\t},\r\n\tdepth, this._maxDepth, this._maxChildren);\r\n\t\r\n\t//bottom left\r\n\tthis.nodes[Node.BOTTOM_LEFT] = new this._classConstructor({\r\n\t\tx:bx,\r\n\t\ty:by_b_h_h,\r\n\t\twidth:b_w_h, \r\n\t\theight:b_h_h\r\n\t},\r\n\tdepth, this._maxDepth, this._maxChildren);\r\n\t\r\n\t\r\n\t//bottom right\r\n\tthis.nodes[Node.BOTTOM_RIGHT] = new this._classConstructor({\r\n\t\tx:bx_b_w_h, \r\n\t\ty:by_b_h_h,\r\n\t\twidth:b_w_h, \r\n\t\theight:b_h_h\r\n\t},\r\n\tdepth, this._maxDepth, this._maxChildren);\t\r\n}\r\n\r\nNode.prototype.clear = function()\r\n{\t\r\n\tthis.children.length = 0;\r\n\t\r\n\tvar len = this.nodes.length;\r\n\tfor(var i = 0; i < len; i++)\r\n\t{\r\n\t\tthis.nodes[i].clear();\r\n\t}\r\n\t\r\n\tthis.nodes.length = 0;\r\n}\r\n\r\n\r\n/******************** BoundsQuadTree ****************/\r\n\r\nfunction BoundsNode(bounds, depth, maxChildren, maxDepth)\r\n{\r\n\tNode.call(this, bounds, depth, maxChildren, maxDepth);\r\n\tthis._stuckChildren = [];\r\n}\r\n\r\nBoundsNode.prototype = new Node();\r\nBoundsNode.prototype._classConstructor = BoundsNode;\r\nBoundsNode.prototype._stuckChildren = null;\r\n\r\n//we use this to collect and conctenate items being retrieved. This way\r\n//we dont have to continuously create new Array instances.\r\n//Note, when returned from QuadTree.retrieve, we then copy the array\r\nBoundsNode.prototype._out = [];\r\n\r\nBoundsNode.prototype.insert = function(item)\r\n{\t\r\n\tif(this.nodes.length)\r\n\t{\r\n\t\tvar index = this._findIndex(item);\r\n\t\tvar node = this.nodes[index];\r\n\r\n\t\t//todo: make _bounds bounds\r\n\t\tif(item.x >= node._bounds.x &&\r\n\t\t\titem.x + item.width <= node._bounds.x + node._bounds.width &&\r\n\t\t\titem.y >= node._bounds.y &&\r\n\t\t\titem.y + item.height <= node._bounds.y + node._bounds.height)\r\n\t\t{\r\n\t\t\tthis.nodes[index].insert(item);\r\n\t\t}\r\n\t\telse\r\n\t\t{\t\t\t\r\n\t\t\tthis._stuckChildren.push(item);\r\n\t\t}\r\n\t\t\r\n\t\treturn;\r\n\t}\r\n\r\n\tthis.children.push(item);\r\n\r\n\tvar len = this.children.length;\r\n\t\r\n\tif(!(this._depth >= this._maxDepth) && \r\n\t\tlen > this._maxChildren)\r\n\t{\r\n\t\tthis.subdivide();\r\n\t\t\r\n\t\tfor(var i = 0; i < len; i++)\r\n\t\t{\r\n\t\t\tthis.insert(this.children[i]);\r\n\t\t}\r\n\t\t\r\n\t\tthis.children.length = 0;\r\n\t}\r\n}\r\n\r\nBoundsNode.prototype.getChildren = function()\r\n{\r\n\treturn this.children.concat(this._stuckChildren);\r\n}\r\n\r\nBoundsNode.prototype.retrieve = function(item)\r\n{\r\n\tvar out = this._out;\r\n\tout.length = 0;\r\n\tif(this.nodes.length)\r\n\t{\r\n\t\tvar index = this._findIndex(item);\r\n\t\t\r\n\t\tout.push.apply(out, this.nodes[index].retrieve(item));\r\n\t}\r\n\t\r\n\tout.push.apply(out, this._stuckChildren);\r\n\tout.push.apply(out, this.children);\r\n\t\r\n\treturn out;\r\n}\r\n\r\nBoundsNode.prototype.clear = function()\r\n{\r\n\r\n\tthis._stuckChildren.length = 0;\r\n\t\r\n\t//array\r\n\tthis.children.length = 0;\r\n\t\r\n\tvar len = this.nodes.length;\r\n\t\r\n\tif(!len)\r\n\t{\r\n\t\treturn;\r\n\t}\r\n\t\r\n\tfor(var i = 0; i < len; i++)\r\n\t{\r\n\t\tthis.nodes[i].clear();\r\n\t}\r\n\t\r\n\t//array\r\n\tthis.nodes.length = 0;\t\r\n\t\r\n\t//we could call the super clear function but for now, im just going to inline it\r\n\t//call the hidden super.clear, and make sure its called with this = this instance\r\n\t//Object.getPrototypeOf(BoundsNode.prototype).clear.call(this);\r\n}\r\n\r\nBoundsNode.prototype.getChildCount\r\n\r\nwindow.QuadTree = QuadTree;\r\n\r\n/*\r\n//http://ejohn.org/blog/objectgetprototypeof/\r\nif ( typeof Object.getPrototypeOf !== \"function\" ) {\r\n  if ( typeof \"test\".__proto__ === \"object\" ) {\r\n    Object.getPrototypeOf = function(object){\r\n      return object.__proto__;\r\n    };\r\n  } else {\r\n    Object.getPrototypeOf = function(object){\r\n      // May break if the constructor has been tampered with\r\n      return object.constructor.prototype;\r\n    };\r\n  }\r\n}\r\n*/\r\n\r\n}(this));\n},{}],23:[function(_dereq_,module,exports){\n/*! howler.js v2.0.0-beta1 | (c) 2013-2015, James Simpson of GoldFire Studios | MIT License | howlerjs.com */\r\n!function(){\"use strict\";function e(){try{\"undefined\"!=typeof AudioContext?n=new AudioContext:\"undefined\"!=typeof webkitAudioContext?n=new webkitAudioContext:o=!1}catch(e){o=!1}if(!o)if(\"undefined\"!=typeof Audio)try{new Audio}catch(e){t=!0}else t=!0}var n=null,o=!0,t=!1;if(e(),o){var r=\"undefined\"==typeof n.createGain?n.createGainNode():n.createGain();r.gain.value=1,r.connect(n.destination)}var d=function(){this.init()};d.prototype={init:function(){var e=this||u;return e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e.iOSAutoEnable=!0,e.noAudio=t,e.usingWebAudio=o,e.ctx=n,t||e._setupCodecs(),e},volume:function(e){var n=this||u;if(e=parseFloat(e),\"undefined\"!=typeof e&&e>=0&&1>=e){n._volume=e,o&&(r.gain.value=e);for(var t=0;t<n._howls.length;t++)if(!n._howls[t]._webAudio)for(var d=n._howls[t]._getSoundIds(),a=0;a<d.length;a++){var i=n._howls[t]._soundById(d[a]);i&&i._node&&(i._node.volume=i._volume*e)}return n}return n._volume},mute:function(e){var n=this||u;n._muted=e,o&&(r.gain.value=e?0:n._volume);for(var t=0;t<n._howls.length;t++)if(!n._howls[t]._webAudio)for(var d=n._howls[t]._getSoundIds(),a=0;a<d.length;a++){var i=n._howls[t]._soundById(d[a]);i&&i._node&&(i._node.muted=e?!0:i._muted)}return n},codecs:function(e){return(this||u)._codecs[e]},_setupCodecs:function(){var e=this||u,n=new Audio,o=n.canPlayType(\"audio/mpeg;\").replace(/^no$/,\"\"),t=/OPR\\//.test(navigator.userAgent);return e._codecs={mp3:!(t||!o&&!n.canPlayType(\"audio/mp3;\").replace(/^no$/,\"\")),mpeg:!!o,opus:!!n.canPlayType('audio/ogg; codecs=\"opus\"').replace(/^no$/,\"\"),ogg:!!n.canPlayType('audio/ogg; codecs=\"vorbis\"').replace(/^no$/,\"\"),wav:!!n.canPlayType('audio/wav; codecs=\"1\"').replace(/^no$/,\"\"),aac:!!n.canPlayType(\"audio/aac;\").replace(/^no$/,\"\"),m4a:!!(n.canPlayType(\"audio/x-m4a;\")||n.canPlayType(\"audio/m4a;\")||n.canPlayType(\"audio/aac;\")).replace(/^no$/,\"\"),mp4:!!(n.canPlayType(\"audio/x-mp4;\")||n.canPlayType(\"audio/mp4;\")||n.canPlayType(\"audio/aac;\")).replace(/^no$/,\"\"),weba:!!n.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/,\"\"),webm:!!n.canPlayType('audio/webm; codecs=\"vorbis\"').replace(/^no$/,\"\")},e},_enableiOSAudio:function(){var e=this||u;if(!n||!e._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){e._iOSEnabled=!1;var o=function(){var t=n.createBuffer(1,1,22050),r=n.createBufferSource();r.buffer=t,r.connect(n.destination),\"undefined\"==typeof r.start?r.noteOn(0):r.start(0),setTimeout(function(){(r.playbackState===r.PLAYING_STATE||r.playbackState===r.FINISHED_STATE)&&(e._iOSEnabled=!0,e.iOSAutoEnable=!1,document.removeEventListener(\"touchend\",o,!1))},0)};return document.addEventListener(\"touchend\",o,!1),e}}};var u=new d,a=function(e){var n=this;return e.src&&0!==e.src.length?void n.init(e):void console.error(\"An array of source files must be passed with any new Howl.\")};a.prototype={init:function(e){var t=this;return t._autoplay=e.autoplay||!1,t._ext=e.ext||null,t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload=\"boolean\"==typeof e.preload?e.preload:!0,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src=\"string\"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._duration=0,t._loaded=!1,t._sounds=[],t._endTimers={},t._onend=e.onend?[{fn:e.onend}]:[],t._onfaded=e.onfaded?[{fn:e.onfaded}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._webAudio=o&&!t._html5,\"undefined\"!=typeof n&&n&&u.iOSAutoEnable&&u._enableiOSAudio(),u._howls.push(t),t._preload&&t.load(),t},load:function(){var e=this,n=null;if(t)return void e._emit(\"loaderror\");\"string\"==typeof e._src&&(e._src=[e._src]);for(var o=0;o<e._src.length;o++){var r,d;if(e._ext&&e._ext[o]?r=e._ext[o]:(d=e._src[o],r=/^data:audio\\/([^;,]+);/i.exec(d),r||(r=/\\.([^.]+)$/.exec(d.split(\"?\",1)[0])),r&&(r=r[1].toLowerCase())),u.codecs(r)){n=e._src[o];break}}return n?(e._src=n,new i(e),e._webAudio&&s(e),e):void e._emit(\"loaderror\")},play:function(e){var o=this,t=arguments,r=null;if(\"number\"==typeof e)r=e,e=null;else if(\"undefined\"==typeof e){e=\"__default\";for(var d=0,a=0;a<o._sounds.length;a++)o._sounds[a]._paused&&!o._sounds[a]._ended&&(d++,r=o._sounds[a]._id);1===d?e=null:r=null}var i=r?o._soundById(r):o._inactiveSound();if(!i)return null;if(r&&!e&&(e=i._sprite||\"__default\"),!o._loaded&&!o._sprite[e])return o.once(\"load\",function(){o.play(o._soundById(i._id)?i._id:void 0)}),i._id;if(r&&!i._paused)return i._id;var _=i._seek>0?i._seek:o._sprite[e][0]/1e3,s=(o._sprite[e][0]+o._sprite[e][1])/1e3-_,l=1e3*s/Math.abs(i._rate);o._endTimers[i._id]=setTimeout(o._ended.bind(o,i),l),i._paused=!1,i._ended=!1,i._sprite=e,i._seek=_,i._start=o._sprite[e][0]/1e3,i._stop=(o._sprite[e][0]+o._sprite[e][1])/1e3,i._loop=!(!i._loop&&!o._sprite[e][2]);var f=i._node;if(o._webAudio){var c=function(){o._refreshBuffer(i);var e=i._muted||o._muted?0:i._volume*u.volume();f.gain.setValueAtTime(e,n.currentTime),i._playStart=n.currentTime,\"undefined\"==typeof f.bufferSource.start?i._loop?f.bufferSource.noteGrainOn(0,_,86400):f.bufferSource.noteGrainOn(0,_,s):i._loop?f.bufferSource.start(0,_,86400):f.bufferSource.start(0,_,s),o._endTimers[i._id]||(o._endTimers[i._id]=setTimeout(o._ended.bind(o,i),l)),t[1]||setTimeout(function(){o._emit(\"play\",i._id)},0)};o._loaded?c():(o.once(\"load\",c),o._clearTimer(i._id))}else{var p=function(){f.currentTime=_,f.muted=i._muted||o._muted||u._muted||f.muted,f.volume=i._volume*u.volume(),f.playbackRate=i._rate,setTimeout(function(){f.play(),t[1]||o._emit(\"play\",i._id)},0)};if(4===f.readyState||!f.readyState&&navigator.isCocoonJS)p();else{var m=function(){o._endTimers[i._id]=setTimeout(o._ended.bind(o,i),l),p(),f.removeEventListener(\"canplaythrough\",m,!1)};f.addEventListener(\"canplaythrough\",m,!1),o._clearTimer(i._id)}}return i._id},pause:function(e){var n=this;if(!n._loaded)return n.once(\"play\",function(){n.pause(e)}),n;for(var o=n._getSoundIds(e),t=0;t<o.length;t++){n._clearTimer(o[t]);var r=n._soundById(o[t]);if(r&&!r._paused){if(r._seek=n.seek(o[t]),r._paused=!0,n._webAudio){if(!r._node.bufferSource)return n;\"undefined\"==typeof r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),r._node.bufferSource=null}else isNaN(r._node.duration)||r._node.pause();arguments[1]||n._emit(\"pause\",r._id)}}return n},stop:function(e){var n=this;if(!n._loaded)return\"undefined\"!=typeof n._sounds[0]._sprite&&n.once(\"play\",function(){n.stop(e)}),n;for(var o=n._getSoundIds(e),t=0;t<o.length;t++){n._clearTimer(o[t]);var r=n._soundById(o[t]);if(r&&!r._paused){if(r._seek=r._start||0,r._paused=!0,r._ended=!0,n._webAudio&&r._node){if(!r._node.bufferSource)return n;\"undefined\"==typeof r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),r._node.bufferSource=null}else r._node&&!isNaN(r._node.duration)&&(r._node.pause(),r._node.currentTime=r._start||0);n._emit(\"stop\",r._id)}}return n},mute:function(e,o){var t=this;if(!t._loaded)return t.once(\"play\",function(){t.mute(e,o)}),t;if(\"undefined\"==typeof o){if(\"boolean\"!=typeof e)return t._muted;t._muted=e}for(var r=t._getSoundIds(o),d=0;d<r.length;d++){var a=t._soundById(r[d]);a&&(a._muted=e,t._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume*u.volume(),n.currentTime):a._node&&(a._node.muted=u._muted?!0:e))}return t},volume:function(){var e,o,t=this,r=arguments;if(0===r.length)return t._volume;if(1===r.length){var d=t._getSoundIds(),a=d.indexOf(r[0]);a>=0?o=parseInt(r[0],10):e=parseFloat(r[0])}else 2===r.length&&(e=parseFloat(r[0]),o=parseInt(r[1],10));var i;if(!(\"undefined\"!=typeof e&&e>=0&&1>=e))return i=o?t._soundById(o):t._sounds[0],i?i._volume:0;if(!t._loaded)return t.once(\"play\",function(){t.volume.apply(t,r)}),t;\"undefined\"==typeof o&&(t._volume=e),o=t._getSoundIds(o);for(var _=0;_<o.length;_++)i=t._soundById(o[_]),i&&(i._volume=e,t._webAudio&&i._node&&!i._muted?i._node.gain.setValueAtTime(e*u.volume(),n.currentTime):i._node&&!i._muted&&(i._node.volume=e*u.volume()));return t},fade:function(e,o,t,r){var d=this;if(!d._loaded)return d.once(\"play\",function(){d.fade(e,o,t,r)}),d;d.volume(e,r);for(var u=d._getSoundIds(r),a=0;a<u.length;a++){var i=d._soundById(u[a]);if(i)if(d._webAudio&&!i._muted){var _=n.currentTime,s=_+t/1e3;i._volume=e,i._node.gain.setValueAtTime(e,_),i._node.gain.linearRampToValueAtTime(o,s),setTimeout(function(e,t){setTimeout(function(){t._volume=o,d._emit(\"faded\",e)},s-n.currentTime>0?Math.ceil(1e3*(s-n.currentTime)):0)}.bind(d,u[a],i),t)}else{var l=Math.abs(e-o),f=e>o?\"out\":\"in\",c=l/.01,p=t/c;!function(){var n=e,t=setInterval(function(e){n+=\"in\"===f?.01:-.01,n=Math.max(0,n),n=Math.min(1,n),n=Math.round(100*n)/100,d.volume(n,e),n===o&&(clearInterval(t),d._emit(\"faded\",e))}.bind(d,u[a]),p)}()}}return d},loop:function(){var e,n,o,t=this,r=arguments;if(0===r.length)return t._loop;if(1===r.length){if(\"boolean\"!=typeof r[0])return o=t._soundById(parseInt(r[0],10)),o?o._loop:!1;e=r[0],t._loop=e}else 2===r.length&&(e=r[0],n=parseInt(r[1],10));for(var d=t._getSoundIds(n),u=0;u<d.length;u++)o=t._soundById(d[u]),o&&(o._loop=e,t._webAudio&&o._node&&o._node.bufferSource&&(o._node.bufferSource.loop=e));return t},rate:function(){var e,n,o=this,t=arguments;if(0===t.length)n=o._sounds[0]._id;else if(1===t.length){var r=o._getSoundIds(),d=r.indexOf(t[0]);d>=0?n=parseInt(t[0],10):e=parseFloat(t[0])}else 2===t.length&&(e=parseFloat(t[0]),n=parseInt(t[1],10));var u;if(\"number\"!=typeof e)return u=o._soundById(n),u?u._rate:o._rate;if(!o._loaded)return o.once(\"load\",function(){o.rate.apply(o,t)}),o;\"undefined\"==typeof n&&(o._rate=e),n=o._getSoundIds(n);for(var a=0;a<n.length;a++)if(u=o._soundById(n[a])){u._rate=e,o._webAudio&&u._node&&u._node.bufferSource?u._node.bufferSource.playbackRate.value=e:u._node&&(u._node.playbackRate=e);var i=o.seek(n[a]),_=(o._sprite[u._sprite][0]+o._sprite[u._sprite][1])/1e3-i,s=1e3*_/Math.abs(u._rate);o._clearTimer(n[a]),o._endTimers[n[a]]=setTimeout(o._ended.bind(o,u),s)}return o},seek:function(){var e,o,t=this,r=arguments;if(0===r.length)o=t._sounds[0]._id;else if(1===r.length){var d=t._getSoundIds(),u=d.indexOf(r[0]);u>=0?o=parseInt(r[0],10):(o=t._sounds[0]._id,e=parseFloat(r[0]))}else 2===r.length&&(e=parseFloat(r[0]),o=parseInt(r[1],10));if(\"undefined\"==typeof o)return t;if(!t._loaded)return t.once(\"load\",function(){t.seek.apply(t,r)}),t;var a=t._soundById(o);if(a){if(!(e>=0))return t._webAudio?a._seek+(t.playing(o)?n.currentTime-a._playStart:0):a._node.currentTime;var i=t.playing(o);i&&t.pause(o,!0),a._seek=e,t._clearTimer(o),i&&t.play(o,!0)}return t},playing:function(e){var n=this,o=n._soundById(e)||n._sounds[0];return o?!o._paused:!1},duration:function(){return this._duration},unload:function(){for(var e=this,n=e._sounds,o=0;o<n.length;o++){n[o]._paused||(e.stop(n[o]._id),e._emit(\"end\",n[o]._id)),e._webAudio||(n[o]._node.src=\"\",n[o]._node.removeEventListener(\"error\",n[o]._errorFn,!1),n[o]._node.removeEventListener(\"canplaythrough\",n[o]._loadFn,!1)),delete n[o]._node,e._clearTimer(n[o]._id);var t=u._howls.indexOf(e);t>=0&&u._howls.splice(t,1)}return _&&delete _[e._src],e=null,null},on:function(e,n,o,t){var r=this,d=r[\"_on\"+e];return\"function\"==typeof n&&d.push(t?{id:o,fn:n,once:t}:{id:o,fn:n}),r},off:function(e,n,o){var t=this,r=t[\"_on\"+e];if(n){for(var d=0;d<r.length;d++)if(n===r[d].fn&&o===r[d].id){r.splice(d,1);break}}else t[\"on\"+e]=[];return t},once:function(e,n,o){var t=this;return t.on(e,n,o,1),t},_emit:function(e,n,o){for(var t=this,r=t[\"_on\"+e],d=0;d<r.length;d++)r[d].id&&r[d].id!==n||(setTimeout(function(e){e.call(this,n,o)}.bind(t,r[d].fn),0),r[d].once&&t.off(e,r[d].fn,n));return t},_ended:function(e){var o=this,t=e._sprite,r=!(!e._loop&&!o._sprite[t][2]);if(o._emit(\"end\",e._id),!o._webAudio&&r&&o.stop(e._id).play(e._id),o._webAudio&&r){o._emit(\"play\",e._id),e._seek=e._start||0,e._playStart=n.currentTime;var d=1e3*(e._stop-e._start)/Math.abs(e._rate);o._endTimers[e._id]=setTimeout(o._ended.bind(o,e),d)}return o._webAudio&&!r&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,o._clearTimer(e._id),e._node.bufferSource=null),o._webAudio||r||o.stop(e._id),o},_clearTimer:function(e){var n=this;return n._endTimers[e]&&(clearTimeout(n._endTimers[e]),delete n._endTimers[e]),n},_soundById:function(e){for(var n=this,o=0;o<n._sounds.length;o++)if(e===n._sounds[o]._id)return n._sounds[o];return null},_inactiveSound:function(){var e=this;e._drain();for(var n=0;n<e._sounds.length;n++)if(e._sounds[n]._ended)return e._sounds[n].reset();return new i(e)},_drain:function(){var e=this,n=e._pool,o=0,t=0;if(!(e._sounds.length<n)){for(t=0;t<e._sounds.length;t++)e._sounds[t]._ended&&o++;for(t=e._sounds.length-1;t>=0;t--){if(n>=o)return;e._sounds[t]._ended&&(e._webAudio&&e._sounds[t]._node&&e._sounds[t]._node.disconnect(0),e._sounds.splice(t,1),o--)}}},_getSoundIds:function(e){var n=this;if(\"undefined\"==typeof e){for(var o=[],t=0;t<n._sounds.length;t++)o.push(n._sounds[t]._id);return o}return[e]},_refreshBuffer:function(e){var o=this;return e._node.bufferSource=n.createBufferSource(),e._node.bufferSource.buffer=_[o._src],e._node.bufferSource.connect(e._panner?e._panner:e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop),e._node.bufferSource.playbackRate.value=o._rate,o}};var i=function(e){this._parent=e,this.init()};if(i.prototype={init:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._muted=n._muted,e._rate=n._rate,e._seek=0,e._paused=!0,e._ended=!0,e._id=Math.round(Date.now()*Math.random()),n._sounds.push(e),e.create(),e},create:function(){var e=this,o=e._parent,t=u._muted||e._muted||e._parent._muted?0:e._volume*u.volume();return o._webAudio?(e._node=\"undefined\"==typeof n.createGain?n.createGainNode():n.createGain(),e._node.gain.setValueAtTime(t,n.currentTime),e._node.paused=!0,e._node.connect(r)):(e._node=new Audio,e._errorFn=e._errorListener.bind(e),e._node.addEventListener(\"error\",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener(\"canplaythrough\",e._loadFn,!1),e._node.src=o._src,e._node.preload=\"auto\",e._node.volume=t,e._node.load()),e},reset:function(){var e=this,n=e._parent;return e._muted=n._muted,e._loop=n._loop,e._volume=n._volume,e._muted=n._muted,e._rate=n._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite=null,e._id=Math.round(Date.now()*Math.random()),e},_errorListener:function(){var e=this;e._node.error&&4===e._node.error.code&&(u.noAudio=!0),e._parent._emit(\"loaderror\",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener(\"error\",e._errorListener,!1)},_loadListener:function(){var e=this,n=e._parent;n._duration=Math.ceil(10*e._node.duration)/10,0===Object.keys(n._sprite).length&&(n._sprite={__default:[0,1e3*n._duration]}),n._loaded||(n._loaded=!0,n._emit(\"load\")),n._autoplay&&n.play(),e._node.removeEventListener(\"canplaythrough\",e._loadFn,!1)}},o)var _={},s=function(e){var n=e._src;if(_[n])return e._duration=_[n].duration,void c(e);if(/^data:[^;]+;base64,/.test(n)){window.atob=window.atob||function(e){for(var n,o,t=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\",r=String(e).replace(/=+$/,\"\"),d=0,u=0,a=\"\";o=r.charAt(u++);~o&&(n=d%4?64*n+o:o,d++%4)?a+=String.fromCharCode(255&n>>(-2*d&6)):0)o=t.indexOf(o);return a};for(var o=atob(n.split(\",\")[1]),t=new Uint8Array(o.length),r=0;r<o.length;++r)t[r]=o.charCodeAt(r);f(t.buffer,e)}else{var d=new XMLHttpRequest;d.open(\"GET\",n,!0),d.responseType=\"arraybuffer\",d.onload=function(){f(d.response,e)},d.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete _[n],e.load())},l(d)}},l=function(e){try{e.send()}catch(n){e.onerror()}},f=function(e,o){n.decodeAudioData(e,function(e){e&&(_[o._src]=e,c(o,e))},function(){o._emit(\"loaderror\")})},c=function(e,n){n&&!e._duration&&(e._duration=n.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e._emit(\"load\")),e._autoplay&&e.play()};\"function\"==typeof define&&define.amd&&define(\"howler\",function(){return{Howler:u,Howl:a}}),\"undefined\"!=typeof exports&&(exports.Howler=u,exports.Howl=a),\"undefined\"!=typeof window&&(window.HowlerGlobal=d,window.Howler=u,window.Howl=a,window.Sound=i)}();\r\n/*! Effects Plugin */\r\n!function(){\"use strict\";HowlerGlobal.prototype.init=function(e){return function(){var n=this;return n._pos=[0,0,0],n._orientation=[0,0,-1,0,1,0],n._velocity=[0,0,0],n._listenerAttr={dopplerFactor:1,speedOfSound:343.3},e.call(this,o)}}(HowlerGlobal.prototype.init),HowlerGlobal.prototype.pos=function(e,n,t){var o=this;return o.ctx&&o.ctx.listener?(n=\"number\"!=typeof n?o._pos[1]:n,t=\"number\"!=typeof t?o._pos[2]:t,\"number\"!=typeof e?o._pos:(o._pos=[e,n,t],o.ctx.listener.setPosition(o._pos[0],o._pos[1],o._pos[2]),o)):o},HowlerGlobal.prototype.orientation=function(e,n,t,o,r,i){var a=this;if(!a.ctx||!a.ctx.listener)return a;var p=a._orientation;return n=\"number\"!=typeof n?p[1]:n,t=\"number\"!=typeof t?p[2]:t,o=\"number\"!=typeof o?p[3]:o,r=\"number\"!=typeof r?p[4]:r,i=\"number\"!=typeof i?p[5]:i,\"number\"!=typeof e?p:(a._orientation=[e,n,t,o,r,i],a.ctx.listener.setOrientation(p[0],p[1],p[2],p[3],p[4],p[5]),a)},HowlerGlobal.prototype.velocity=function(e,n,t){var o=this;return o.ctx&&o.ctx.listener?(n=\"number\"!=typeof n?o._velocity[1]:n,t=\"number\"!=typeof t?o._velocity[2]:t,\"number\"!=typeof e?o._velocity:(o._velocity=[e,n,t],o.ctx.listener.setVelocity(o._velocity[0],o._velocity[1],o._velocity[2]),o)):o},HowlerGlobal.prototype.listenerAttr=function(e){var n=this;if(!n.ctx||!n.ctx.listener)return n;var t=n._listenerAttr;return e?(n._listenerAttr={dopplerFactor:\"undefined\"!=typeof e.dopplerFactor?e.dopplerFactor:t.dopplerFactor,speedOfSound:\"undefined\"!=typeof e.speedOfSound?e.speedOfSound:t.speedOfSound},n.ctx.listener.dopplerFactor=t.dopplerFactor,n.ctx.listener.speedOfSound=t.speedOfSound,n):t},Howl.prototype.init=function(e){return function(n){var t=this;return t._orientation=n.orientation||[1,0,0],t._pos=n.pos||null,t._velocity=n.velocity||[0,0,0],t._pannerAttr={coneInnerAngle:\"undefined\"!=typeof n.coneInnerAngle?n.coneInnerAngle:360,coneOUterAngle:\"undefined\"!=typeof n.coneOUterAngle?n.coneOUterAngle:360,coneOuterGain:\"undefined\"!=typeof n.coneOuterGain?n.coneOuterGain:0,distanceModel:\"undefined\"!=typeof n.distanceModel?n.distanceModel:\"inverse\",maxDistance:\"undefined\"!=typeof n.maxDistance?n.maxDistance:1e4,panningModel:\"undefined\"!=typeof n.panningModel?n.panningModel:\"HRTF\",refDistance:\"undefined\"!=typeof n.refDistance?n.refDistance:1,rolloffFactor:\"undefined\"!=typeof n.rolloffFactor?n.rolloffFactor:1},e.call(this,n)}}(Howl.prototype.init),Howl.prototype.pos=function(n,t,o,r){var i=this;if(!i._webAudio)return i;if(!i._loaded)return i.once(\"play\",function(){i.pos(n,t,o,r)}),i;if(t=\"number\"!=typeof t?0:t,o=\"number\"!=typeof o?-.5:o,\"undefined\"==typeof r){if(\"number\"!=typeof n)return i._pos;i._pos=[n,t,o]}for(var a=i._getSoundIds(r),p=0;p<a.length;p++){var l=i._soundById(a[p]);if(l){if(\"number\"!=typeof n)return l._pos;l._pos=[n,t,o],l._node&&(l._panner||e(l),l._panner.setPosition(n,t,o))}}return i},Howl.prototype.orientation=function(n,t,o,r){var i=this;if(!i._webAudio)return i;if(!i._loaded)return i.once(\"play\",function(){i.orientation(n,t,o,r)}),i;if(t=\"number\"!=typeof t?i._orientation[1]:t,o=\"number\"!=typeof o?i._orientation[1]:o,\"undefined\"==typeof r){if(\"number\"!=typeof n)return i._orientation;i._orientation=[n,t,o]}for(var a=i._getSoundIds(r),p=0;p<a.length;p++){var l=i._soundById(a[p]);if(l){if(\"number\"!=typeof n)return l._orientation;l._orientation=[n,t,o],l._node&&(l._panner||e(l),l._panner.setOrientation(n,t,o))}}return i},Howl.prototype.velocity=function(n,t,o,r){var i=this;if(!i._webAudio)return i;if(!i._loaded)return i.once(\"play\",function(){i.velocity(n,t,o,r)}),i;if(t=\"number\"!=typeof t?i._velocity[1]:t,o=\"number\"!=typeof o?i._velocity[1]:o,\"undefined\"==typeof r){if(\"number\"!=typeof n)return i._velocity;i._velocity=[n,t,o]}for(var a=i._getSoundIds(r),p=0;p<a.length;p++){var l=i._soundById(a[p]);if(l){if(\"number\"!=typeof n)return l._velocity;l._velocity=[n,t,o],l._node&&(l._panner||e(l),l._panner.setVelocity(n,t,o))}}return i},Howl.prototype.pannerAttr=function(){var n,t,o,r=this,i=arguments;if(!r._webAudio)return r;if(0===i.length)return r._pannerAttr;if(1===i.length){if(\"object\"!=typeof i[0])return o=r._soundById(parseInt(i[0],10)),o?o._pannerAttr:r._pannerAttr;n=i[0],\"undefined\"==typeof t&&(r._pannerAttr={coneInnerAngle:\"undefined\"!=typeof n.coneInnerAngle?n.coneInnerAngle:r._coneInnerAngle,coneOUterAngle:\"undefined\"!=typeof n.coneOUterAngle?n.coneOUterAngle:r._coneOUterAngle,coneOuterGain:\"undefined\"!=typeof n.coneOuterGain?n.coneOuterGain:r._coneOuterGain,distanceModel:\"undefined\"!=typeof n.distanceModel?n.distanceModel:r._distanceModel,maxDistance:\"undefined\"!=typeof n.maxDistance?n.maxDistance:r._maxDistance,panningModel:\"undefined\"!=typeof n.panningModel?n.panningModel:r._panningModel,refDistance:\"undefined\"!=typeof n.refDistance?n.refDistance:r._refDistance,rolloffFactor:\"undefined\"!=typeof n.rolloffFactor?n.rolloffFactor:r._rolloffFactor})}else 2===i.length&&(n=i[0],t=parseInt(i[1],10));for(var a=r._getSoundIds(t),p=0;p<a.length;p++)if(o=r._soundById(a[p])){var l=o._pannerAttr;l={coneInnerAngle:\"undefined\"!=typeof n.coneInnerAngle?n.coneInnerAngle:l.coneInnerAngle,coneOUterAngle:\"undefined\"!=typeof n.coneOUterAngle?n.coneOUterAngle:l.coneOUterAngle,coneOuterGain:\"undefined\"!=typeof n.coneOuterGain?n.coneOuterGain:l.coneOuterGain,distanceModel:\"undefined\"!=typeof n.distanceModel?n.distanceModel:l.distanceModel,maxDistance:\"undefined\"!=typeof n.maxDistance?n.maxDistance:l.maxDistance,panningModel:\"undefined\"!=typeof n.panningModel?n.panningModel:l.panningModel,refDistance:\"undefined\"!=typeof n.refDistance?n.refDistance:l.refDistance,rolloffFactor:\"undefined\"!=typeof n.rolloffFactor?n.rolloffFactor:l.rolloffFactor};var c=o._panner;c?(c.coneInnerAngle=l.coneInnerAngle,c.coneOUterAngle=l.coneOUterAngle,c.coneOuterGain=l.coneOuterGain,c.distanceModel=l.distanceModel,c.maxDistance=l.maxDistance,c.panningModel=l.panningModel,c.refDistance=l.refDistance,c.rolloffFactor=l.rolloffFactor):(o._pos||(o._pos=r._pos||[0,0,-.5]),e(o))}return r},Sound.prototype.init=function(e){return function(){var n=this,t=n._parent;n._orientation=t._orientation,n._pos=t._pos,n._velocity=t._velocity,n._pannerAttr=t._pannerAttr,e.call(this),n._pos&&t.pos(n._pos[0],n._pos[1],n._pos[2],n._id)}}(Sound.prototype.init),Sound.prototype.reset=function(e){return function(){var n=this,t=n._parent;return n._orientation=t._orientation,n._pos=t._pos,n._velocity=t._velocity,n._pannerAttr=t._pannerAttr,e.call(this)}}(Sound.prototype.reset);var e=function(e){e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOUterAngle=e._pannerAttr.coneOUterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.panningModel=e._pannerAttr.panningModel,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2]),e._panner.setVelocity(e._velocity[0],e._velocity[1],e._velocity[2]),e._panner.connect(e._node),e._paused||e._parent.pause(e._id).play(e._id)}}();\n},{}],24:[function(_dereq_,module,exports){\n// stats.js - http://github.com/mrdoob/stats.js\r\nvar Stats=function(){function f(a,e,b){a=document.createElement(a);a.id=e;a.style.cssText=b;return a}function l(a,e,b){var c=f(\"div\",a,\"padding:0 0 3px 3px;text-align:left;background:\"+b),d=f(\"div\",a+\"Text\",\"font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:\"+e);d.innerHTML=a.toUpperCase();c.appendChild(d);a=f(\"div\",a+\"Graph\",\"width:74px;height:30px;background:\"+e);c.appendChild(a);for(e=0;74>e;e++)a.appendChild(f(\"span\",\"\",\"width:1px;height:30px;float:left;opacity:0.9;background:\"+\r\nb));return c}function m(a){for(var b=c.children,d=0;d<b.length;d++)b[d].style.display=d===a?\"block\":\"none\";n=a}function p(a,b){a.appendChild(a.firstChild).style.height=Math.min(30,30-30*b)+\"px\"}var q=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,k=q(),r=k,t=0,n=0,c=f(\"div\",\"stats\",\"width:80px;opacity:0.9;cursor:pointer\");c.addEventListener(\"mousedown\",function(a){a.preventDefault();m(++n%c.children.length)},!1);var d=0,u=Infinity,v=0,b=l(\"fps\",\"#0ff\",\"#002\"),\r\nA=b.children[0],B=b.children[1];c.appendChild(b);var g=0,w=Infinity,x=0,b=l(\"ms\",\"#0f0\",\"#020\"),C=b.children[0],D=b.children[1];c.appendChild(b);if(self.performance&&self.performance.memory){var h=0,y=Infinity,z=0,b=l(\"mb\",\"#f08\",\"#201\"),E=b.children[0],F=b.children[1];c.appendChild(b)}m(n);return{REVISION:14,domElement:c,setMode:m,begin:function(){k=q()},end:function(){var a=q();g=a-k;w=Math.min(w,g);x=Math.max(x,g);C.textContent=(g|0)+\" MS (\"+(w|0)+\"-\"+(x|0)+\")\";p(D,g/200);t++;if(a>r+1E3&&(d=Math.round(1E3*\r\nt/(a-r)),u=Math.min(u,d),v=Math.max(v,d),A.textContent=d+\" FPS (\"+u+\"-\"+v+\")\",p(B,d/100),r=a,t=0,void 0!==h)){var b=performance.memory.usedJSHeapSize,c=performance.memory.jsHeapSizeLimit;h=Math.round(9.54E-7*b);y=Math.min(y,h);z=Math.max(z,h);E.textContent=h+\" MB (\"+y+\"-\"+z+\")\";p(F,b/c)}return a},update:function(){k=this.end()}}};\"object\"===typeof module&&(module.exports=Stats);\r\n\n},{}]},{},[15])\n(15)\n});"]}