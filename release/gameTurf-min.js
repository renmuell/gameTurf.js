!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.gameTurf=e()}}(function(){return function n(a,r,s){function l(o,e){if(!r[o]){if(!a[o]){var t="function"==typeof require&&require;if(!e&&t)return t(o,!0);if(d)return d(o,!0);throw new Error("Cannot find module '"+o+"'")}var i=r[o]={exports:{}};a[o][0].call(i.exports,function(e){var t=a[o][1][e];return l(t||e)},i,i.exports,n,a,r,s)}return r[o].exports}for(var d="function"==typeof require&&require,e=0;e<s.length;e++)l(s[e]);return l}({1:[function(f,p,e){!function(){var t=f("./settings"),o=f("./input"),i=f("./theatre"),n=f("./../systems/world"),a=f("./ui"),r=f("./../detectors/entityCollisionDetection"),s=f("./../managers/entityManager"),l=f("./../detectors/worldCollisionDetection"),d=f("./../systems/wind"),c=f("./sound"),e=f("../../vendors/stats.min"),u={stepTimeThen:0,stepTimeNow:0,stepTimeElapsed:0,timestep:1e3/60,maxFPS:60,isRunning:!1,fps:60,framesThisSecond:0,lastFpsUpdate:0,showStats:!1,init:function(e){t=Object.assign(t,e),u.showStats&&u.statsSetup(),i.init(t.theatreMovesWithPlayer),c.init(),a.init(i,function(){u.run()}),o.init(i.stageCanvas),t.theatreMovesWithPlayer||n.draw(),window.onblur=function(){u.pause()},o.onEscDown(function(){u.isRunning?u.pause():u.run()})},run:function(){u.isRunning=!0,u.stepTimeElapsed=0,u.stepTimeNow=0,u.stepTimeThen=0,a.closeMenu(),c.playBackgroundSound(),requestAnimationFrame(u.loop)},pause:function(){a.openMenu(),c.pauseBackgroundSound(),u.isRunning=!1,u.stepTimeElapsed=0,u.stepTimeNow=0,u.stepTimeThen=0},loop:function(){if(u.isRunning){if(u.stepTimeNow=(new Date).getTime(),0!==u.stepTimeThen&&(u.stepTimeElapsed=u.stepTimeNow-u.stepTimeThen),u.showStats&&u.stats.begin(),u.stepTimeElapsed<u.lastFrameTimeMs+1e3/u.maxFPS)return void requestAnimationFrame(u.loop);u.stepTimeElapsed>u.lastFpsUpdate+1e3&&(u.fps=.25*u.framesThisSecond+.75*u.fps,u.lastFpsUpdate=u.stepTimeElapsed,u.framesThisSecond=0),u.framesThisSecond++;for(var e=0;u.stepTimeElapsed>=u.timestep;)if(u.update(u.timestep),u.postUpdate(u.timestep),u.stepTimeElapsed-=u.timestep,240<=++e){u.panic();break}u.preDraw(u.timestep),u.draw(u.timestep),u.showStats&&u.stats.end(),u.stepTimeThen=u.stepTimeNow,requestAnimationFrame(u.loop)}},panic:function(){delta=0},step:function(){u.update(u.timestep),u.postUpdate(u.timestep),u.preDraw(u.timestep),u.draw(u.timestep)},update:function(e){d.update(e),l.update(e),r.update(e),s.update(e),a.update(e)},postUpdate:function(e){s.postUpdate(e)},preDraw:function(e){i.clearStage(),s.preDraw(e),i.preShake()},draw:function(e){s.draw(e),t.theatreMovesWithPlayer&&n.draw(e),i.worldNeedsRedraw&&(i.clearWorld(),n.draw(e),i.worldNeedsRedraw=!1),l.draw(e),d.draw(e),a.draw(e),i.postShake()},statsSetup:function(){u.stats=new e,u.stats.setMode(2),u.stats.domElement.style.position="absolute",u.stats.domElement.style.left="0px",u.stats.domElement.style.top="0px",document.body.appendChild(u.stats.domElement)}};if(a.datGui){var h=a.datGui.addFolder("Game");a.datGui.remember(u),h.add(u,"stepTimeThen").listen(),h.add(u,"stepTimeNow").listen(),h.add(u,"stepTimeElapsed").listen(),h.add(u,"timestep").listen(),h.add(u,"maxFPS").listen(),h.add(u,"isRunning").listen(),h.add(u,"fps").listen(),h.add(u,"framesThisSecond").listen(),h.add(u,"lastFpsUpdate").listen(),h.add(u,"showStats")}p.exports=u}()},{"../../vendors/stats.min":24,"./../detectors/entityCollisionDetection":9,"./../detectors/worldCollisionDetection":10,"./../managers/entityManager":18,"./../systems/wind":20,"./../systems/world":21,"./input":2,"./settings":4,"./sound":5,"./theatre":6,"./ui":7}],2:[function(n,a,e){!function(){var t=n("./theatre"),e=n("./ui"),o={keyPressed:[],onEscDownCallbacks:[],onEscUpCallbacks:[],shiftPressed:!1,movementDirectionData:{playerInteraction:!1,isRunning:!1,vector:{x:0,y:0}},lastClickPosition:{new:!1},recordMouseMove:!1,onEscDown:function(e){o.onEscDownCallbacks.push(e)},onEscUp:function(e){o.onEscUpCallbacks.push(e)},init:function(e){document.addEventListener("keydown",o.keydown),document.addEventListener("keyup",o.keyup),e.addEventListener("mousedown",o.stageCanvasMousedownHandler,!1),e.addEventListener("mousemove",o.stageCanvasMousemoveHandler,!1),e.addEventListener("mouseup",o.stageCanvasMouseupHandler,!1)},keydown:function(e){if(o.keyPressed[e.keyCode]=!0,o.shiftPressed=e.shiftKey,27==e.keyCode)for(var t=o.onEscDownCallbacks.length-1;0<=t;t--)o.onEscDownCallbacks[t].call()},keyup:function(e){if(o.keyPressed[e.keyCode]=!1,o.shiftPressed=e.shiftKey,27==e.keyCode)for(var t=o.onEscUpCallbacks.length-1;0<=t;t--)o.onEscUpCallbacks[t].call()},stageCanvasMousedownHandler:function(e){o.lastClickPosition.x=e.offsetX,o.lastClickPosition.y=e.offsetY,o.lastClickPosition.new=!0,t.adjustPositionToStage(o.lastClickPosition),o.recordMouseMove=!0},stageCanvasMousemoveHandler:function(e){o.recordMouseMove&&(o.lastClickPosition.x=e.offsetX,o.lastClickPosition.y=e.offsetY,o.lastClickPosition.new=!0,t.adjustPositionToStage(o.lastClickPosition))},stageCanvasMouseupHandler:function(e){o.recordMouseMove=!1},getPlayerMovementDirection:function(){return o.movementDirectionData.vector.x=0,o.movementDirectionData.vector.y=0,o.movementDirectionData.playerInteraction=!1,o.movementDirectionData.isRunning=o.shiftPressed,(o.keyPressed[37]||o.keyPressed[65])&&(o.movementDirectionData.vector.x-=1,o.movementDirectionData.playerInteraction=!0),(o.keyPressed[38]||o.keyPressed[87])&&(o.movementDirectionData.vector.y-=1,o.movementDirectionData.playerInteraction=!0),(o.keyPressed[39]||o.keyPressed[68])&&(o.movementDirectionData.vector.x+=1,o.movementDirectionData.playerInteraction=!0),(o.keyPressed[40]||o.keyPressed[83])&&(o.movementDirectionData.vector.y+=1,o.movementDirectionData.playerInteraction=!0),o.movementDirectionData}};if(e.datGui){var i=e.datGui.addFolder("Input");e.datGui.remember(o),i.add(o,"shiftPressed").listen(),i.add(o.movementDirectionData,"playerInteraction").listen(),i.add(o.movementDirectionData,"isRunning").listen(),i.add(o.movementDirectionData.vector,"x").listen(),i.add(o.movementDirectionData.vector,"y").listen()}a.exports=o}()},{"./theatre":6,"./ui":7}],3:[function(e,t,o){t.exports={vectorSubtract:function(e,t){return{x:e.x-t.x,y:e.y-t.y}}}},{}],4:[function(e,t,o){t.exports={tileSize:50,datGuiIsOn:!0,physicsDebugMode:!1,debugWorldCollisions:!1,soundEngineOn:!0,allowBackgroundMusic:!1,effectMusicVolume:.2,theatreMovesWithPlayer:!0,effects:[],backgroundSong:{src:void 0,volume:1}}},{}],5:[function(e,t,o){var i,n,a;i=e("../../vendors/howler.min"),n=e("./settings"),i=i.Howl,a={effects:{},backgroundSong:void 0,init:function(){n.soundEngineOn&&(n.effects&&n.effects.forEach(function(e){a.addEffect(e.id,e.src,e.volume)}),n.allowBackgroundMusic&&n.backgroundSong.src&&(a.backgroundSong=new i({src:[n.backgroundSong.src],loop:!0,volume:n.backgroundSong.volume})))},addEffect:function(e,t,o){a.effects[e]=a.createEffect(t,o*n.effectMusicVolume)},createEffect:function(e,t){var o={isPlaying:!1,howl:new i({src:[e],volume:t,onend:function(){o.isPlaying=!1}}),play:function(e){e&&o.isPlaying||(o.isPlaying=!0,o.howl.play())}};return o},playEffect:function(e,t){if(n.soundEngineOn){var o=a.effects[e];o&&o.play(t)}},playBackgroundSound:function(){n.allowBackgroundMusic&&a.backgroundSong.play()},pauseBackgroundSound:function(){n.allowBackgroundMusic&&a.backgroundSong.pause()}},t.exports=a},{"../../vendors/howler.min":23,"./settings":4}],6:[function(o,i,e){!function(){var e=o("./ui"),c={stageCanvas:void 0,stage:void 0,gridCanvas:void 0,grid:void 0,backdropCanvas:void 0,backdrop:void 0,foregroundCanvas:void 0,foreground:void 0,scale:2,canvasBoxLeft:0,canvasBoxTop:0,canvasBoxRight:0,canvasBoxBottom:0,shakeDuration:50,shakeStartTime:-1,allowScreenShake:!1,screenShakeMagnitude:5,useResolutionDivider:!1,resolutionDivider:2,movesWithPlayer:!1,currentTranslateX:0,currentTranslateY:0,worldNeedsRedraw:!0,canvasHeight:window.innerHeight,canvasWidth:window.innerWidth,init:function(e){c.movesWithPlayer=e,c.stageCanvas=document.getElementById("Stage"),c.stage=c.stageCanvas.getContext("2d"),c.gridCanvas=document.getElementById("Grid"),c.grid=c.gridCanvas.getContext("2d"),c.backdropCanvas=document.getElementById("Backdrop"),c.backdrop=c.backdropCanvas.getContext("2d"),c.foregroundCanvas=document.getElementById("Foreground"),c.foreground=c.foregroundCanvas.getContext("2d"),c.waterCanvas=document.getElementById("Water-Container"),c.waterCanvas.style.width=c.canvasWidth+"px",c.waterCanvas.style.height=c.canvasHeight+"px",c.resize(),window.addEventListener("resize",c.resize,!1)},resize:function(){c.setSize(c.stageCanvas),c.setSize(c.gridCanvas),c.setSize(c.backdropCanvas),c.setSize(c.foregroundCanvas)},setSize:function(e){c.useResolutionDivider?(e.className+=" scaleCanvas",e.width=c.canvasWidth/c.resolutionDivider,e.height=c.canvasHeight/c.resolutionDivider,e.style.transformOrigin="0% 0%",e.style.transform="scale("+c.resolutionDivider+", "+c.resolutionDivider+")"):(e.width=c.canvasWidth,e.height=c.canvasHeight,c.canvasBoxLeft=0,c.canvasBoxTop=0,c.canvasBoxBottom=c.canvasHeight,c.canvasBoxRight=c.canvasWidth)},setScale:function(){c.stage.scale(c.scale,c.scale),c.grid.scale(c.scale,c.scale),c.backdrop.scale(c.scale,c.scale),c.foreground.scale(c.scale,c.scale)},clearStage:function(){c.movesWithPlayer,c.stage.clearRect(c.canvasBoxLeft*c.scale,c.canvasBoxTop*c.scale,c.canvasWidth*c.scale,c.canvasHeight*c.scale),c.movesWithPlayer&&(c.backdrop.clearRect(c.canvasBoxLeft*c.scale,c.canvasBoxTop*c.scale,c.canvasWidth*c.scale,c.canvasHeight*c.scale),c.foreground.clearRect(c.canvasBoxLeft*c.scale,c.canvasBoxTop*c.scale,c.canvasWidth*c.scale,c.canvasHeight*c.scale))},clearWorld:function(){c.backdrop.clearRect(c.canvasBoxLeft*c.scale,c.canvasBoxTop*c.scale,c.canvasBoxRight*c.scale,c.canvasBoxBottom*c.scale),c.foreground.clearRect(c.canvasBoxLeft*c.scale,c.canvasBoxTop*c.scale,c.canvasBoxRight*c.scale,c.canvasBoxBottom*c.scale)},clearGrid:function(){c.grid.clearRect(0,0,c.gridCanvas.width,c.gridCanvas.height)},drawGrids:function(){c.clearGrid(),c.drawGrid(.5,10,"gray"),c.drawGrid(1,100,"black")},preShake:function(){if(c.allowScreenShake){if(-1==c.shakeStartTime)return;if(Date.now()-c.shakeStartTime>c.shakeDuration)return void(c.shakeStartTime=-1);c.stage.save(),c.backdrop.save(),c.foreground.save();var e=Math.random()*c.screenShakeMagnitude*c.scale,t=Math.random()*c.screenShakeMagnitude*c.scale;c.stage.translate(e,t),c.backdrop.translate(e,t),c.foreground.translate(e,t)}},postShake:function(){if(c.allowScreenShake){if(-1==c.shakeStartTime)return;c.stage.restore(),c.backdrop.restore(),c.foreground.restore()}},startShake:function(){c.allowScreenShake&&(c.shakeStartTime=Date.now())},resetCanvasTransformation:function(e){c[e].setTransform(1,0,0,1,0,0)},setCanvasTransformation:function(e){if(c.lastPhysics){var t=c.canvasWidth/2,o=c.canvasHeight/2,i=c.lastPhysics.position.x*c.scale-t,n=c.lastPhysics.position.y*c.scale-o;c[e].setTransform(1,0,0,1,-1*i,-1*n)}},playerUpdate:function(e){if(c.lastPhysics=e,c.movesWithPlayer){var t=c.canvasWidth/2,o=c.canvasHeight/2,i=e.position.x*c.scale-t,n=e.position.y*c.scale-o;c.stage.setTransform(1,0,0,1,-1*i,-1*n),c.backdrop.setTransform(1,0,0,1,-1*i,-1*n),c.foreground.setTransform(1,0,0,1,-1*i,-1*n),c.canvasBoxLeft=e.position.x-t/c.scale,c.canvasBoxRight=e.position.x+t/c.scale,c.canvasBoxTop=e.position.y-o/c.scale,c.canvasBoxBottom=e.position.y+o/c.scale,c.worldNeedsRedraw=!0}else e.position.x*c.scale<c.canvasBoxLeft?(c.currentTranslateX+=c.canvasWidth,c.stage.setTransform(1,0,0,1,c.currentTranslateX,c.currentTranslateY),c.backdrop.setTransform(1,0,0,1,c.currentTranslateX,c.currentTranslateY),c.foreground.setTransform(1,0,0,1,c.currentTranslateX,c.currentTranslateY),c.canvasBoxLeft-=c.canvasWidth,c.canvasBoxRight-=c.canvasWidth,c.worldNeedsRedraw=!0):e.position.x*c.scale>c.canvasBoxRight?(c.currentTranslateX-=c.canvasWidth,c.stage.setTransform(1,0,0,1,c.currentTranslateX,c.currentTranslateY),c.backdrop.setTransform(1,0,0,1,c.currentTranslateX,c.currentTranslateY),c.foreground.setTransform(1,0,0,1,c.currentTranslateX,c.currentTranslateY),c.canvasBoxLeft+=c.canvasWidth,c.canvasBoxRight+=c.canvasWidth,c.worldNeedsRedraw=!0):e.position.y*c.scale<c.canvasBoxTop?(c.currentTranslateY+=c.canvasHeight,c.stage.setTransform(1,0,0,1,c.currentTranslateX,c.currentTranslateY),c.backdrop.setTransform(1,0,0,1,c.currentTranslateX,c.currentTranslateY),c.foreground.setTransform(1,0,0,1,c.currentTranslateX,c.currentTranslateY),c.canvasBoxTop-=c.canvasHeight,c.canvasBoxBottom-=c.canvasHeight,c.worldNeedsRedraw=!0):e.position.y*c.scale>c.canvasBoxBottom&&(c.currentTranslateY-=c.canvasHeight,c.stage.setTransform(1,0,0,1,c.currentTranslateX,c.currentTranslateY),c.backdrop.setTransform(1,0,0,1,c.currentTranslateX,c.currentTranslateY),c.foreground.setTransform(1,0,0,1,c.currentTranslateX,c.currentTranslateY),c.canvasBoxTop+=c.canvasHeight,c.canvasBoxBottom+=c.canvasHeight,c.worldNeedsRedraw=!0)},drawGrid:function(e,t,o){t*=c.scale;var i=c.gridCanvas.width*c.scale,n=c.gridCanvas.height*c.scale;c.grid.beginPath();for(var a=0;a<=i;a+=t)c.grid.moveTo(a,0),c.grid.lineTo(a,n);for(var r=0;r<=n;r+=t)c.grid.moveTo(0,r),c.grid.lineTo(i,r);c.grid.strokeStyle=o,c.grid.lineWidth=e*c.scale,c.grid.stroke()},drawTriangleFromCenter:function(e,t,o){c.isOutsideOfCanvas(t.position.x+t.halfWidth,t.position.x-t.halfWidth,t.position.y-t.halfHeight,t.position.y+t.halfHeight)||(c[e].beginPath(),c[e].moveTo(Math.floor(t.position.x)*c.scale,Math.floor(t.position.y-t.halfHeight)*c.scale),c[e].lineTo(Math.floor(t.position.x-t.halfWidth)*c.scale,Math.floor(t.position.y+t.halfHeight)*c.scale),c[e].lineTo(Math.floor(t.position.x+t.halfWidth)*c.scale,Math.floor(t.position.y+t.halfHeight)*c.scale),c[e].lineTo(Math.floor(t.position.x)*c.scale,Math.floor(t.position.y-t.halfHeight)*c.scale),c[e].fillStyle=o,c[e].fill())},drawTriangleFromCenterUpsideDown:function(e,t,o){c.isOutsideOfCanvas(t.position.x+t.halfWidth,t.position.x-t.halfWidth,t.position.y-t.halfHeight,t.position.y+t.halfHeight)||(c[e].beginPath(),c[e].moveTo(Math.floor(t.position.x)*c.scale,Math.floor(t.position.y+t.halfHeight)*c.scale),c[e].lineTo(Math.floor(t.position.x-t.halfWidth)*c.scale,Math.floor(t.position.y-t.halfHeight)*c.scale),c[e].lineTo(Math.floor(t.position.x+t.halfWidth)*c.scale,Math.floor(t.position.y-t.halfHeight)*c.scale),c[e].lineTo(Math.floor(t.position.x)*c.scale,Math.floor(t.position.y+t.halfHeight)*c.scale),c[e].fillStyle=o,c[e].fill())},drawSquareFromCenter:function(e,t,o){c.isOutsideOfCanvas(t.position.x+t.halfWidth,t.position.x-t.halfWidth,t.position.y-t.halfHeight,t.position.y+t.halfHeight)||(c[e].fillStyle=o,c[e].fillRect(Math.floor(t.position.x-t.halfWidth)*c.scale,Math.floor(t.position.y-t.halfHeight)*c.scale,t.width*c.scale,t.height*c.scale))},drawCurvedSquareFromCenter:function(e,t,o,i){c.isOutsideOfCanvas(t.position.x+t.halfWidth,t.position.x-t.halfWidth,t.position.y-t.halfHeight,t.position.y+t.halfHeight)||(c[e].fillStyle=o,c[e].beginPath(),c[e].moveTo(Math.floor(t.position.x-t.halfWidth)*c.scale,Math.floor(t.position.y-t.halfHeight)*c.scale),c[e].quadraticCurveTo(t.position.x*c.scale,Math.floor(t.position.y-t.halfWidth-i)*c.scale,Math.floor(t.position.x+t.halfWidth)*c.scale,Math.floor(t.position.y-t.halfHeight)*c.scale),c[e].quadraticCurveTo(Math.floor(t.position.x+t.halfWidth+i)*c.scale,t.position.y*c.scale,Math.floor(t.position.x+t.halfWidth)*c.scale,Math.floor(t.position.y+t.halfHeight)*c.scale),c[e].quadraticCurveTo(t.position.x*c.scale,Math.floor(t.position.y+t.halfWidth+i)*c.scale,Math.floor(t.position.x-t.halfWidth)*c.scale,Math.floor(t.position.y+t.halfHeight)*c.scale),c[e].quadraticCurveTo(Math.floor(t.position.x-t.halfWidth-i)*c.scale,t.position.y*c.scale,Math.floor(t.position.x-t.halfWidth)*c.scale,Math.floor(t.position.y-t.halfHeight)*c.scale),c[e].fill())},drawBezierCurvedSquareFromCenter:function(e,t,o,i,n,a,r,s,l){c.isOutsideOfCanvas(t.position.x+t.halfWidth,t.position.x-t.halfWidth,t.position.y-t.halfHeight,t.position.y+t.halfHeight)||(c[e].fillStyle=o,c[e].beginPath(),c[e].moveTo(Math.floor(t.position.x-t.halfWidth)*c.scale,Math.floor(t.position.y-t.halfHeight)*c.scale),a?c[e].lineTo(Math.floor(t.position.x+t.halfWidth)*c.scale,Math.floor(t.position.y-t.halfHeight)*c.scale):c[e].bezierCurveTo(Math.floor(t.position.x-t.halfWidth/n)*c.scale,Math.floor(t.position.y-t.halfHeight-i)*c.scale,Math.floor(t.position.x+t.halfWidth/n)*c.scale,Math.floor(t.position.y-t.halfHeight-i)*c.scale,Math.floor(t.position.x+t.halfWidth)*c.scale,Math.floor(t.position.y-t.halfHeight)*c.scale),r?c[e].lineTo(Math.floor(t.position.x+t.halfWidth)*c.scale,Math.floor(t.position.y+t.halfHeight)*c.scale):c[e].bezierCurveTo(Math.floor(t.position.x+t.halfWidth+i)*c.scale,Math.floor(t.position.y-t.halfHeight/n)*c.scale,Math.floor(t.position.x+t.halfWidth+i)*c.scale,Math.floor(t.position.y+t.halfHeight/n)*c.scale,Math.floor(t.position.x+t.halfWidth)*c.scale,Math.floor(t.position.y+t.halfHeight)*c.scale),s?c[e].lineTo(Math.floor(t.position.x-t.halfWidth)*c.scale,Math.floor(t.position.y+t.halfHeight)*c.scale):c[e].bezierCurveTo(Math.floor(t.position.x+t.halfWidth/n)*c.scale,Math.floor(t.position.y+t.halfHeight+i)*c.scale,Math.floor(t.position.x-t.halfWidth/n)*c.scale,Math.floor(t.position.y+t.halfHeight+i)*c.scale,Math.floor(t.position.x-t.halfWidth)*c.scale,Math.floor(t.position.y+t.halfHeight)*c.scale),l?c[e].lineTo(Math.floor(t.position.x-t.halfWidth)*c.scale,Math.floor(t.position.y-t.halfHeight)*c.scale):c[e].bezierCurveTo(Math.floor(t.position.x-t.halfWidth-i)*c.scale,Math.floor(t.position.y+t.halfHeight/n)*c.scale,Math.floor(t.position.x-t.halfWidth-i)*c.scale,Math.floor(t.position.y-t.halfHeight/n)*c.scale,Math.floor(t.position.x-t.halfWidth)*c.scale,Math.floor(t.position.y-t.halfHeight)*c.scale),c[e].fill())},drawSquareFromLeftTopCorner:function(e,t,o,i){c.isOutsideOfCanvas(t.x+o,t.x,t.y,t.y+o)||(c[e].fillStyle=i,c[e].fillRect(Math.floor(t.x)*c.scale,Math.floor(t.y)*c.scale,o*c.scale,o*c.scale))},drawCircle:function(e,t,o){c.isOutsideOfCanvas(t.position.x+t.halfWidth,t.position.x-t.halfWidth,t.position.y-t.halfHeight,t.position.y+t.halfHeight)||(c[e].beginPath(),c[e].arc(Math.floor(t.position.x)*c.scale,Math.floor(t.position.y)*c.scale,t.halfWidth*c.scale,0,2*Math.PI,!1),c[e].fillStyle=o,c[e].fill())},drawLine:function(e,t,o,i){c[e].beginPath(),c[e].strokeStyle=i,c[e].lineWidth=1*c.scale,c[e].moveTo(Math.floor(t.x)*c.scale,Math.floor(t.y)*c.scale),c[e].lineTo(Math.floor(t.x+o)*c.scale,Math.floor(t.y)*c.scale),c[e].stroke()},drawLineWithVector:function(e,t,o,i){c[e].beginPath(),c[e].strokeStyle=i,c[e].lineWidth=1*c.scale,c[e].moveTo(Math.floor(t.position.x)*c.scale,Math.floor(t.position.y)*c.scale),c[e].lineTo(Math.floor(t.position.x+o.x)*c.scale,Math.floor(t.position.y+o.y)*c.scale),c[e].stroke()},drawPath:function(e,t,o,i,n,a,r){var s=t[o];if(null!=s){c[e].beginPath(),c[e].strokeStyle=i,c[e].lineWidth=Math.floor(n)*c.scale,c[e].moveTo(Math.floor(s.x)*c.scale,Math.floor(s.y)*c.scale);for(var l=0,d=o;l<a;l++)null!=(s=t[d])&&(c[e].lineTo(Math.floor(s.x)*c.scale,Math.floor(s.y)*c.scale),d=(d+1)%a);r&&c[e].lineTo(Math.floor(r.position.x)*c.scale,Math.floor(r.position.y)*c.scale),c[e].stroke()}},drawMultipleLines:function(e,t,o){c[e].beginPath(),c[e].strokeStyle=o;for(var i=t.length-1;0<=i;i--)c[e].moveTo(Math.floor(t[i].lineStartX)*c.scale,Math.floor(t[i].lineStartY)*c.scale),c[e].lineTo(Math.floor(t[i].lineEndX)*c.scale,Math.floor(t[i].lineEndY)*c.scale);c[e].stroke()},isOutsideOfCanvas:function(e,t,o,i){return!(c.canvasBoxLeft<e&&c.canvasBoxRight>t&&c.canvasBoxTop<i&&c.canvasBoxBottom>o)},adjustPositionToStage:function(e){return e.x=c.canvasBoxLeft+e.x/c.scale,e.y=c.canvasBoxTop+e.y/c.scale,e}};if(e.datGui){var t=e.datGui.addFolder("theatre");t.add(c,"canvasBoxLeft").listen(),t.add(c,"canvasBoxTop").listen(),t.add(c,"canvasBoxRight").listen(),t.add(c,"canvasBoxBottom").listen(),t.add(c,"useResolutionDivider"),t.add(c,"resolutionDivider").listen(),t.add(c,"movesWithPlayer").listen(),t.add(c,"currentTranslateX").listen(),t.add(c,"currentTranslateY").listen(),t.add(c,"worldNeedsRedraw").listen(),t.add(c,"canvasHeight").listen(),t.add(c,"canvasWidth").listen(),t.add(c,"allowScreenShake"),t.add(c,"screenShakeMagnitude"),t.add(c,"shakeDuration"),t.add(c,"startShake"),t.add(c,"drawGrids"),t.add(c,"clearGrid"),t.add(c,"scale"),t.add(c,"setScale")}i.exports=c}()},{"./ui":7}],7:[function(e,t,o){var i,n;i=e("./settings"),n={menu:document.getElementById("Menu"),theatre:void 0,continueBtn:document.getElementById("continue"),bubbleList:[],datGui:i.datGuiIsOn&&window.dat?new window.dat.GUI:void 0,init:function(e,t){n.theatre=e,n.output=document.getElementById("output"),n.output.style.width=n.theatre.canvasWidth+"px",n.output.style.height=n.theatre.canvasHeight+"px",n.output.style.position="absolute",n.output.style.left=0,n.output.style.top=0,n.output.style.pointerEvents="none",n.output.style.zIndex=1e3,n.continueBtn.addEventListener("click",function(){t()})},update:function(t){n.bubbleList.forEach(function(e){e.time-=t,e.time<=0?(e.element.remove(),e.death=!0):n.setBubblePosition(e.element,e.physics)}),n.bubbleList=n.bubbleList.filter(function(e){return!e.death})},draw:function(e){},openMenu:function(){n.menu.className=""},closeMenu:function(){n.menu.className="hide"},setBubblePosition:function(e,t){n.theatre.useResolutionDivider?(e.style.top=n.theatre.canvasBoxTop*n.theatre.resolutionDivider*-1+t.position.y*n.theatre.resolutionDivider-80+"px",e.style.left=n.theatre.canvasBoxLeft*n.theatre.resolutionDivider*-1+t.position.x*n.theatre.resolutionDivider-100+"px"):(e.style.top=(-1*n.theatre.canvasBoxTop+t.position.y)*n.theatre.scale-80+"px",e.style.left=(-1*n.theatre.canvasBoxLeft+t.position.x)*n.theatre.scale-100+"px")},showBubble:function(e,t,o){var i=document.createElement("div");i.innerHTML=t,i.style.position="absolute",i.classList="bubble",i.style.height="60px",i.style.lineHeight="60px",i.style.width="200px",i.style.backgroundColor="rgba(255,255,255,.3)",i.style.textAlign="center",i.style.borderRadius="10px",n.setBubblePosition(i,e),n.output.appendChild(i),n.bubbleList.push({physics:e,death:!1,text:t,time:o,element:i})}},t.exports=n},{"./settings":4}],8:[function(e,t,o){var i;i={vectorToDegree:function(e){return 180*i.vectorToRadiant(e)/Math.PI},vectorToRadiant:function(e){return Math.atan2(e.x,e.y)},vectorLength:function(e){return Math.sqrt(Math.pow(e.x,2)+Math.pow(e.y,2))},vectorDistanz:function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},scaleVectorBy:function(e,t){return i.shrinkVectorToLength(e,i.vectorLength(e)*t)},shrinkVectorToLength:function(e,t){return(e=i.setVectorToLengthOne(e)).x*=t,e.y*=t,e},getVectorAngleDegree:function(e,t){return 180*Math.atan2(t.x-e.x,t.y-e.y)/Math.PI},setVectorToLengthOne:function(e){if(0<i.vectorLength(e)){var t=i.vectorToRadiant(e);e.x=Math.sin(t),e.y=Math.cos(t)}return e},getPositionByDegree:function(e,t,o){return t=t*Math.PI/180,{x:Math.round(o*Math.sin(t))+e.x,y:Math.round(o*Math.cos(t))+e.y}}},t.exports=i},{}],9:[function(e,t,o){var c,u;c=e("./../managers/entityManager"),u={add:function(e){e.entityCollisions=[]},update:function(e){for(var t=c.visibleEntities.length-1;0<=t;t--){for(var o=c.visibleEntities[t].id,i=c.entities[o],n=c.visibleEntities,a=n.length-1;0<=a;a--){var r=n[a].id,s=c.entities[r];r!=o&&(u.collsitionDetectionOfTwoEntities(i,s)?(null!=i.entityCollisions[s.Id]&&!i.entityCollisions[s.Id]||null!=s.entityCollisions[i.Id]&&!s.entityCollisions[i.Id])&&(u.calculateEntitiesCollisionReaction(i,s),i.entityCollisions[s.Id]=!0,s.entityCollisions[i.Id]=!0):(i.entityCollisions[s.Id]=!1,s.entityCollisions[i.Id]=!1))}for(var l=!1,d=0;d<i.entityCollisions.length;d++)if(i.entityCollisions[d]){l=!0;break}i.physics.setObjectCollision(l,i.entityCollisions)}},calculateEntitiesCollisionReaction:function(e,t){var o=(e.physics.velocity.x*(e.physics.mass-t.physics.mass)+2*t.physics.mass*t.physics.velocity.x)/(e.physics.mass+t.physics.mass),i=(e.physics.velocity.y*(e.physics.mass-t.physics.mass)+2*t.physics.mass*t.physics.velocity.y)/(e.physics.mass+t.physics.mass),n=(t.physics.velocity.x*(t.physics.mass-e.physics.mass)+2*e.physics.mass*e.physics.velocity.x)/(e.physics.mass+t.physics.mass),a=(t.physics.velocity.y*(t.physics.mass-e.physics.mass)+2*e.physics.mass*e.physics.velocity.y)/(e.physics.mass+t.physics.mass);e.physics.setVelocity(o,i),t.physics.setVelocity(n,a)},collsitionDetectionOfTwoEntities:function(e,t){var o=e.physics.getHitBox(),i=t.physics.getHitBox();return o.Left<i.Right&&o.Right>i.Left&&o.Top<i.Bottom&&o.Bottom>i.Top},isEntityCollidingWithOtherEntites:function(e){for(var t=e.entityCollisions.length-1;0<=t;t--)if(null!=e.entityCollisions[t]&&e.entityCollisions[t])return!0;return!1}},t.exports=u},{"./../managers/entityManager":18}],10:[function(e,t,o){var d,i,h,f,p;d=e("./../helpers/tilesHelper"),i=e("./../core/theatre"),h=e("./../core/sound"),f=e("./../core/settings"),e("./../helpers/physicsHelper"),p={collsitions:[],checkLines:[],collsitionDetection:function(e,t,o,i,n){var a=n.getHitBox();d.calculateNeahrestTileWalls(t,o,i,a.centerPosition);for(var r=!1,s=d.neahrestTileWalls.length-1;0<=s;s--)if(d.neahrestTileWalls[s])for(var l=d.neahrestTileWalls[s].length-1;0<=l;l--)r=p.calculateWallCollsitionDenfung(e,d.neahrestTileWalls[s][l],n,a)||r;return r},calculateWallCollsitionDenfung:function(e,t,o,i){for(var n=i.points.length-1;0<=n;n--){var a=i.points[n],r=o.calculateFuturePositionOf({x:a.x,y:a.y},e);if(p.checkLineIntersectionFast(t[0].x,t[0].y,t[1].x,t[1].y,a.x,a.y,r.x,r.y)){f.debugWorldCollisions&&p.debugCollisionLine(t[0].x,t[0].y,t[1].x,t[1].y),h.playEffect("colide",!0);for(var s=!0,l=!0,d=!0,c=!0,u=i.points.length-1;0<=u;u--)s=s&&t[0].x<i.points[u].x&&t[1].x<i.points[u].x,l=l&&t[0].x>i.points[u].x&&t[1].x>i.points[u].x,d=d&&t[0].y<i.points[u].y&&t[1].y<i.points[u].y,c=c&&t[0].y>i.points[u].y&&t[1].y>i.points[u].y;return o.isBounce?(l&&0<o.velocity.x&&(o.velocity.x=-o.velocity.x),s&&o.velocity.x<0&&(o.velocity.x=-o.velocity.x),c&&0<o.velocity.y&&(o.velocity.y=-o.velocity.y),d&&o.velocity.y<0&&(o.velocity.y=-o.velocity.y)):((l||s)&&(o.velocity.x=0),(c||d)&&(o.velocity.y=0)),!0}}return!1},checkLineIntersectionFast:function(e,t,o,i,n,a,r,s){f.debugWorldCollisions&&p.debugLine(e,t,o,i,n,a,r,s);var l=(o-e)*(s-a)-(r-n)*(i-t);if(0==l)return!1;var d=((s-a)*(r-e)+(n-r)*(s-t))/l,c=((t-i)*(r-e)+(o-e)*(s-t))/l;return 0<d&&d<1&&0<c&&c<1},update:function(e){f.debugWorldCollisions&&(p.collsitions=[],p.checkLines=[])},draw:function(e){f.debugWorldCollisions&&(i.drawMultipleLines("stage",p.checkLines,"#F24962"),i.drawMultipleLines("stage",p.collsitions,"blue"))},debugLine:function(e,t,o,i,n,a,r,s){p.checkLines.push({lineStartX:e,lineStartY:t,lineEndX:o,lineEndY:i}),p.checkLines.push({lineStartX:n,lineStartY:a,lineEndX:r,lineEndY:s})},debugCollisionLine:function(e,t,o,i){p.collsitions.push({lineStartX:e,lineStartY:t,lineEndX:o,lineEndY:i})}},t.exports=p},{"./../core/settings":4,"./../core/sound":5,"./../core/theatre":6,"./../helpers/physicsHelper":16,"./../helpers/tilesHelper":17}],11:[function(e,t,o){var a,i;a=e("./../core/theatre"),i=e("./../core/util"),t.exports=function(e){var n={color:(e=e||{}).color||"#B0A183",defaultFace:void 0,currentFace:void 0,faceExpressionDuration:200,faceExpressionStartTime:0,positions:void 0,leftEyePosition:{x:0,y:0},rightEyePosition:{x:0,y:0},mouthPosition:{x:0,y:0},eyeSize:0,mouthCloseSize:0,mouthOpenSize:0,lookDirectionAngle:0,init:function(e){n.defaultFace=n.drawNoramlFace,n.currentFace=n.drawNoramlFace,n.eyeSize=.2*e,n.mouthOpenSize=.2*e,n.mouthCloseSize=.4*e},addToDatGuiFolder:function(e){var t=e.addFolder("Face");t.add(n,"faceExpressionDuration"),t.add(n,"faceExpressionStartTime").listen(),t.add(n,"lookDirectionAngle").listen()},update:function(e,t){e.collsition?n.SetSurpiseFace():e.isMoving&&(n.faceExpressionStartTime||t&&(n.lookDirectionAngle=i.vectorToDegree(e.velocity),-45<n.lookDirectionAngle&&n.lookDirectionAngle<45?n.SetFaceLookDown():n.lookDirectionAngle<-135||135<n.lookDirectionAngle?n.SetFaceLookTop():45<n.lookDirectionAngle&&n.lookDirectionAngle<135?n.SetFaceLookRight():n.lookDirectionAngle<-45&&-135<n.lookDirectionAngle&&n.SetFaceLookLeft())),n.faceExpressionStartTime&&Date.now()-n.faceExpressionStartTime>n.faceExpressionDuration&&(n.currentFace=n.drawNoramlFace,n.faceExpressionStartTime=void 0),.995<Math.random()&&n.setNoramlFaceOpenEyes()},draw:function(e){n.currentFace(e)},SetSurpiseFace:function(){n.faceExpressionStartTime=Date.now(),n.currentFace=n.drawSurpiseFace},SetFaceLookLeft:function(){n.faceExpressionStartTime=Date.now(),n.currentFace=n.drawFaceLookLeft},SetFaceLookRight:function(){n.faceExpressionStartTime=Date.now(),n.currentFace=n.drawFaceLookRight},SetFaceLookTop:function(){n.faceExpressionStartTime=Date.now(),n.currentFace=n.drawFaceLookTop},SetFaceLookDown:function(){n.faceExpressionStartTime=Date.now(),n.currentFace=n.drawFaceLookDown},setNoramlFaceOpenEyes:function(){n.faceExpressionStartTime=Date.now(),n.currentFace=n.drawNoramlFaceOpenEyes},drawNoramlFace:function(e){n.leftEyePosition.x=e.position.x-.3*e.width,n.leftEyePosition.y=e.position.y-.1*e.height,a.drawLine("stage",n.leftEyePosition,n.eyeSize,n.color),n.rightEyePosition.x=e.position.x+.1*e.width,n.rightEyePosition.y=e.position.y-.1*e.height,a.drawLine("stage",n.rightEyePosition,n.eyeSize,n.color),n.mouthPosition.x=e.position.x-.2*e.width,n.mouthPosition.y=e.position.y+.3*e.height,a.drawLine("stage",n.mouthPosition,n.mouthCloseSize,n.color)},drawNoramlFaceOpenEyes:function(e){n.leftEyePosition.x=e.position.x-.3*e.width,n.leftEyePosition.y=e.position.y-.2*e.height,a.drawSquareFromLeftTopCorner("stage",n.leftEyePosition,n.eyeSize,n.color),n.rightEyePosition.x=e.position.x+.1*e.width,n.rightEyePosition.y=e.position.y-.2*e.height,a.drawSquareFromLeftTopCorner("stage",n.rightEyePosition,n.eyeSize,n.color),n.mouthPosition.x=e.position.x-.2*e.width,n.mouthPosition.y=e.position.y+.3*e.height,a.drawLine("stage",n.mouthPosition,n.mouthCloseSize,n.color)},drawSurpiseFace:function(e){n.leftEyePosition.x=e.position.x-.3*e.width,n.leftEyePosition.y=e.position.y-.2*e.height,a.drawSquareFromLeftTopCorner("stage",n.leftEyePosition,n.eyeSize,n.color),n.rightEyePosition.x=e.position.x+.1*e.width,n.rightEyePosition.y=e.position.y-.2*e.height,a.drawSquareFromLeftTopCorner("stage",n.rightEyePosition,n.eyeSize,n.color),n.mouthPosition.x=e.position.x-.1*e.width,n.mouthPosition.y=e.position.y+.2*e.height,a.drawSquareFromLeftTopCorner("stage",n.mouthPosition,n.mouthOpenSize,n.color)},drawFaceLookLeft:function(e){n.leftEyePosition.x=e.position.x-.4*e.width,n.leftEyePosition.y=e.position.y-.2*e.height,n.rightEyePosition.x=e.position.x,n.rightEyePosition.y=e.position.y-.2*e.height,n.drawFaceLook(e)},drawFaceLookRight:function(e){n.leftEyePosition.x=e.position.x-.2*e.width,n.leftEyePosition.y=e.position.y-.2*e.height,n.rightEyePosition.x=e.position.x+.2*e.width,n.rightEyePosition.y=e.position.y-.2*e.height,n.drawFaceLook(e)},drawFaceLookTop:function(e){n.leftEyePosition.x=e.position.x-.3*e.width,n.leftEyePosition.y=e.position.y-.25*e.height,n.rightEyePosition.x=e.position.x+.1*e.width,n.rightEyePosition.y=e.position.y-.25*e.height,n.drawFaceLook(e)},drawFaceLookDown:function(e){n.leftEyePosition.x=e.position.x-.3*e.width,n.leftEyePosition.y=e.position.y-.15*e.height,n.rightEyePosition.x=e.position.x+.1*e.width,n.rightEyePosition.y=e.position.y-.15*e.height,n.drawFaceLook(e)},drawFaceLook:function(e){var t=e.isRunning?2:1.1,o=(Math.random()-.5)*t,i=(Math.random()-.5)*t;n.leftEyePosition.x+=o,n.leftEyePosition.y+=i,n.rightEyePosition.x+=o,n.rightEyePosition.y+=i,a.drawSquareFromLeftTopCorner("stage",n.leftEyePosition,n.eyeSize,n.color),a.drawSquareFromLeftTopCorner("stage",n.rightEyePosition,n.eyeSize,n.color),n.mouthPosition.x=e.position.x-.2*e.width+o,n.mouthPosition.y=e.position.y+.3*e.height+i,a.drawLine("stage",n.mouthPosition,n.mouthCloseSize,n.color)}};return n}},{"./../core/theatre":6,"./../core/util":8}],12:[function(e,t,o){t.exports=function(e){return{canInteract:!0,onInteraction:(e=e||{}).onInteraction||function(e){},drawHighlightBox:e.drawHighlightBox||function(){},update:function(e){}}}},{}],13:[function(e,t,o){var a;a=e("./../core/theatre"),t.exports=function(e){var i={},n={positions:[],maxLength:5,lastTimeSet:0,setTimeDelay:(e=e||{}).setTimeDelay||50,lastEntityIndex:0,onlyUpdateIfMoving:!1,lineWidth:e.lineWidth||1,shouldDrawLine:!0,shouldDrawBodies:void 0===e.shouldDrawBodies||e.shouldDrawBodies,color:e.color||{r:253,g:244,b:194},addToDatGuiFolder:function(e){var t=e.addFolder("LastPositions");t.add(n,"maxLength"),t.add(n,"lastTimeSet").listen(),t.add(n,"setTimeDelay"),t.add(n,"lastEntityIndex").listen(),t.add(n,"onlyUpdateIfMoving"),t.add(n,"lineWidth")},clear:function(){n.positions=[],n.lastEntityIndex=0,n.lastTimeSet=0},update:function(e){n.onlyUpdateIfMoving&&!e.isMoving||Date.now()-n.lastTimeSet>n.setTimeDelay&&(void 0===n.positions[n.lastEntityIndex]&&(n.positions[n.lastEntityIndex]={x:0,y:0}),n.positions[n.lastEntityIndex].x=e.position.x,n.positions[n.lastEntityIndex].y=e.position.y,n.lastEntityIndex=(n.lastEntityIndex+1)%n.maxLength,n.lastTimeSet=Date.now())},draw:function(e){n.shouldDrawBodies&&n.drawBodies(e),n.shouldDrawLine&&n.drawLine(e)},drawBodies:function(e){for(var t=0,o=n.lastEntityIndex;t<n.maxLength;t++)null!=n.positions[o]&&(i.position={x:n.positions[o].x,y:n.positions[o].y},i.halfWidth=e.halfWidth,i.halfHeight=e.halfHeight,i.width=e.width,i.height=e.height,a.drawSquareFromCenter("stage",i,"rgba("+n.color.r+", "+n.color.g+", "+n.color.b+", "+(t*(.5/n.maxLength)+.1)+")"),o=(o+1)%n.maxLength)},drawLine:function(e){a.drawPath("stage",n.positions,n.lastEntityIndex,"rgba("+n.color.r+", "+n.color.g+", "+n.color.b+", 0.6)",n.lineWidth,n.maxLength,e)}};return n}},{"./../core/theatre":6}],14:[function(e,t,o){var i,n,a,r,u,s;i=e("./../core/util"),e("./../core/ui"),n=e("./../systems/world"),a=e("./../core/settings"),r=e("./../core/theatre"),u=e("./../managers/entityManager"),s=e("./../helpers/physicsHelper"),t.exports=function(e){var c={position:(e=e||{}).position||{x:0,y:0},velocity:e.velocity||{x:0,y:0},speed:e.speed||2,runSpeed:e.runSpeed||4,mass:e.mass||1,height:e.height||20,width:e.width||20,isBounce:e.isBounce||!1,isFrictionless:null!=e.isFrictionless&&e.isFrictionless,frictionMagnitude:e.frictionMagnitude||.5,canWorldColide:null==e.canWorldColide||e.canWorldColide,isMoving:!1,angle:0,maxVelocity:void 0,halfWidth:void 0,halfHeight:void 0,isRunning:!1,collsition:!1,objectCollision:!1,entityCollisions:[],hitBox:void 0,currentSpeed:0,init:function(){c.createHitBox(),c.halfHeight=c.height/2,c.halfWidth=c.width/2},addToDatGuiFolder:function(e){var t=e.addFolder("Physics");t.add(c,"speed").listen(),t.add(c,"runSpeed").listen(),t.add(c,"isBounce").listen(),t.add(c,"angle").listen(),t.add(c,"mass").listen(),t.add(c,"currentSpeed").listen(),t.add(c,"isFrictionless").listen(),t.add(c,"frictionMagnitude").listen(),t.add(c.position,"x").listen(),t.add(c.position,"y").listen(),t.add(c,"collsition").listen(),t.add(c,"isMoving").listen(),t.add(c,"isRunning").listen(),t.add(c.velocity,"x").listen(),t.add(c.velocity,"y").listen()},calculateFriction:function(){c.isFrictionless||(0<c.currentSpeed?c.currentSpeed<c.frictionMagnitude?c.setVelocity(0,0):c.lowerVelocityTo(c.currentSpeed-c.frictionMagnitude):c.setVelocity(0,0))},inputUpdate:function(e){e&&(c.isRunning=e.isRunning,c.maxVelocity=c.isRunning?c.runSpeed:c.speed,c.addVelocity(e.vector.x*(c.maxVelocity/2),e.vector.y*(c.maxVelocity/2)),c.currentSpeed>c.maxVelocity?c.lowerVelocityTo(c.maxVelocity):c.currentSpeed<.2&&c.setVelocity(0,0))},update:function(e,t){if(c.isMoving=!1,c.collsition=!1,c.calculateFriction(),c.inputUpdate(t),0<c.currentSpeed){if(c.isMoving=!0,c.collsition=c.collsitionDetection(e),c.objectCollision){for(var o=!1,i=0;i<c.entityCollisions.length;i++)c.entityCollisions[i]&&(o=u.entities[i]);if(o){var n=c.getHitBox(),a=o.physics.getHitBox(),r=c.position.x>o.physics.position.x&&n.Left<a.Right,s=c.position.x<o.physics.position.x&&n.Right>a.Left,l=c.position.y>o.physics.position.y&&n.Top<a.Bottom,d=c.position.y<o.physics.position.y&&n.Bottom>a.Top;s&&0<c.velocity.x&&(c.velocity.x=0),r&&c.velocity.x<0&&(c.velocity.x=0),d&&0<c.velocity.y&&(c.velocity.y=0),l&&c.velocity.y<0&&(c.velocity.y=0)}}c.position=c.calculateFuturePositionOf(c.position,e)}},calculateFuturePositionOf:function(e,t){return e.x+=s.calculateVelocityForTime(t,c.velocity.x),e.y+=s.calculateVelocityForTime(t,c.velocity.y),e},draw:function(){a.physicsDebugMode&&c.drawDebugInfo()},createHitBox:function(){c.hitBox={centerPosition:{},Left:void 0,Right:void 0,Bottom:void 0,Top:void 0,points:[{x:void 0,y:void 0},{x:void 0,y:void 0},{x:void 0,y:void 0},{x:void 0,y:void 0}]}},getHitBox:function(){return c.hitBox.centerPosition.x=c.position.x,c.hitBox.centerPosition.y=c.position.y,c.hitBox.Left=c.position.x-c.halfWidth,c.hitBox.Right=c.position.x+c.halfWidth,c.hitBox.Bottom=c.position.y+c.halfHeight,c.hitBox.Top=c.position.y-c.halfHeight,c.hitBox.points[0].x=c.hitBox.Left,c.hitBox.points[0].y=c.hitBox.Top,c.hitBox.points[1].x=c.hitBox.Left,c.hitBox.points[1].y=c.hitBox.Bottom,c.hitBox.points[2].x=c.hitBox.Right,c.hitBox.points[2].y=c.hitBox.Top,c.hitBox.points[3].x=c.hitBox.Right,c.hitBox.points[3].y=c.hitBox.Bottom,c.hitBox},collsitionDetection:function(e){return!!c.canWorldColide&&n.collsitionDetection(e,c)},drawDebugInfo:function(){r.drawLineWithVector("stage",c,{x:20*c.velocity.x,y:20*c.velocity.y},"red")},addVelocity:function(e,t){c.velocity.x+=e,c.velocity.y+=t,c.calculateSpeed()},setVelocity:function(e,t){c.velocity.x=e,c.velocity.y=t,c.calculateSpeed()},lowerVelocityTo:function(e){i.shrinkVectorToLength(c.velocity,e),c.calculateSpeed()},setObjectCollision:function(e,t){c.objectCollision=e,c.entityCollisions=t},calculateSpeed:function(){c.currentSpeed=i.vectorLength(c.velocity)}};return c.init(),c}},{"./../core/settings":4,"./../core/theatre":6,"./../core/ui":7,"./../core/util":8,"./../helpers/physicsHelper":16,"./../managers/entityManager":18,"./../systems/world":21}],15:[function(e,t,o){"use strict";t.exports={settings:e("./core/settings"),input:e("./core/input"),theatre:e("./core/theatre"),ui:e("./core/ui"),sound:e("./core/sound"),util:e("./core/util"),game:e("./core/game"),face:e("./entityPlugins/face"),physics:e("./entityPlugins/physics"),wind:e("./systems/wind"),math:e("./core/math"),world:e("./systems/world"),interaction:e("./entityPlugins/interaction"),lastPositions:e("./entityPlugins/lastPositions"),entityManager:e("./managers/entityManager"),entityCollisionDetection:e("./detectors/entityCollisionDetection")}},{"./core/game":1,"./core/input":2,"./core/math":3,"./core/settings":4,"./core/sound":5,"./core/theatre":6,"./core/ui":7,"./core/util":8,"./detectors/entityCollisionDetection":9,"./entityPlugins/face":11,"./entityPlugins/interaction":12,"./entityPlugins/lastPositions":13,"./entityPlugins/physics":14,"./managers/entityManager":18,"./systems/wind":20,"./systems/world":21}],16:[function(t,o,e){!function(){t("./../core/settings");var e={calculateVelocityForTime:function(e,t){return Math.round(e/10*t*1e3)/1e3}};o.exports=e}()},{"./../core/settings":4}],17:[function(e,t,o){var v,_,g;v=e("./../core/theatre"),_=e("./../core/settings"),(g={tileWalls:[],createdTime:Date.now(),grassHalmPositions:[],neahrestTileWalls:[],offscreenCanvas:[],currentDialation:0,init:function(){},createOffscreenCanvas:function(e){var t=document.createElement("canvas");t.height=_.tileSize*v.scale,t.width=_.tileSize*v.scale;var o=t.getContext("2d");o.height=_.tileSize*v.scale,o.width=_.tileSize*v.scale,g.offscreenCanvas[e]={canvas:o,canvasElement:t}},calculateMapWithTileTypes:function(e,t,o){for(var i=[],n=0;n<o;n++)for(var a=0;a<t;a++){var r=n*t+a;if(0!=e[r]){var s=0;0<n&&0!=e[(n-1)*t+a]&&(s|=1),a<t-1&&0!=e[n*t+a+1]&&(s|=2),n<o-1&&0!=e[(n+1)*t+a]&&(s|=4),0<a&&0!=e[n*t+a-1]&&(s|=8),i[r]=s+1}else i[r]=0}return i},calculateNeahrestTileWalls:function(e,t,o,i){for(var n=0,a=Math.floor(Math.floor(i.x)/_.tileSize),r=Math.floor(Math.floor(i.y)/_.tileSize),s=a-1;s<=a+1;s++)for(var l=r-1;l<=r+1;l++)g.neahrestTileWalls[n++]=s<0||l<0||t<=s||o<=l?void 0:g.addTileWalls(e,s,l,t)},addTileWalls:function(e,t,o,i){if(null==g.tileWalls[o*i+t]){var n=e[o*i+t]-1,a=[],r={x:t*_.tileSize,y:o*_.tileSize},s={x:r.x+_.tileSize,y:r.y},l={x:r.x+_.tileSize,y:r.y+_.tileSize},d={x:r.x,y:r.y+_.tileSize};0==(1&n)&&a.push([r,s]),0==(2&n)&&a.push([s,l]),0==(4&n)&&a.push([d,l]),0==(8&n)&&a.push([r,d]),g.tileWalls[o*i+t]=a}return g.tileWalls[o*i+t]},calculateCurrentDialation:function(){var e=(Date.now()-g.createdTime)%5e3/5e3;e*=2,--e,g.currentDialation=-1*Math.pow(e,2)+1},drawTiles:function(e,t,o,i,n){var a=Math.floor(Math.floor(v.canvasBoxLeft)/_.tileSize),r=Math.floor(Math.floor(v.canvasBoxTop)/_.tileSize),s=Math.floor(Math.floor(v.canvasBoxRight)/_.tileSize),l=Math.floor(Math.floor(v.canvasBoxBottom)/_.tileSize);a<0&&(a=0),r<0&&(r=0),s<0&&(s=0),l<0&&(l=0),i-1<a&&(a=i-1),n-1<r&&(r=n-1),i-1<s&&(s=i-1),n-1<l&&(l=n-1);var d={};g.calculateCurrentDialation(),g.clearOffscreenCanvas(),g.drawOffscreenGrass();for(var c=r;c<=l;c++)for(var u=a;u<=s;u++){var h=o[c*i+u];if(0!==h){var f=_.tileSize,p=_.tileSize;d.x=u*_.tileSize,d.y=c*_.tileSize;var y=h-1;v.drawSquareFromLeftTopCorner("backdrop",d,_.tileSize+1,"#80bdbf"),v.drawBezierCurvedSquareFromCenter("backdrop",{position:{x:d.x+f/2,y:d.y+p/2},width:f+1,height:p+1,halfWidth:(f+1)/2,halfHeight:(p+1)/2},"#CCDDAF",2*g.currentDialation*v.scale*-1,f/2,0!=(1&y),0!=(2&y),0!=(4&y),0!=(8&y)),2===t[c*i+u]?g.drawGrass(v.foreground,d,f,p,6):g.drawGrass(v.backdrop,d,f,p,3)}}},drawGrass:function(e,t,o,i,n){e.drawImage(g.offscreenCanvas[n].canvasElement,t.x*v.scale,t.y*v.scale)},drawOffscreenGrass:function(){void 0===g.offscreenCanvas[6]&&g.createOffscreenCanvas(6);void 0===g.offscreenCanvas[3]&&g.createOffscreenCanvas(3),g.drawOffscreenGrassVariation(g.offscreenCanvas[6].canvas,g.currentDialation,50,6),g.drawOffscreenGrassVariation(g.offscreenCanvas[3].canvas,g.currentDialation,10,3)},drawOffscreenGrassVariation:function(e,t,o,i){e.beginPath(),e.lineWidth=1,e.strokeStyle="rgba(167,191,127,0.6)",g.grassHalmPositions[i]||(g.grassHalmPositions[i]=[]);for(var n=o;0<=n;n--){var a;a=(g.grassHalmPositions[i][n]||(g.grassHalmPositions[i][n]={x:Math.random()*(_.tileSize-i)+i,y:Math.random()*(_.tileSize-i)+i}),g.grassHalmPositions[i][n]),e.moveTo(Math.floor(a.x)*v.scale,Math.floor(a.y)*v.scale),e.quadraticCurveTo(Math.floor(a.x)*v.scale,Math.floor(a.y-i/2)*v.scale,Math.floor(a.x+(i*t-i/2))*v.scale,Math.floor(a.y-i)*v.scale)}e.stroke(),e.lineWidth=1},clearOffscreenCanvas:function(){g.offscreenCanvas.forEach(function(e){e.canvas.clearRect(0,0,e.canvasElement.width,e.canvasElement.height)})}}).init(),t.exports=g},{"./../core/settings":4,"./../core/theatre":6}],18:[function(e,t,o){var i,n,d,c;i=e("../../vendors/QuadTree"),n=e("../core/theatre"),d=e("../core/util"),c={entities:[],visibleEntities:[],tree:new(i=i.QuadTree)({x:0,y:0,width:14e3,height:13e3}),add:function(e){var t=c.entities.length;e.Id=t,e.physics.id=t,c.entities[t]=e},update:function(e){c.visibleEntities=c.tree.retrieveInBounds({x:n.canvasBoxLeft,y:n.canvasBoxTop,width:n.canvasWidth,height:n.canvasHeight});for(var t=c.entities.length-1;0<=t;t--)c.entities[t].update(e);c.tree.clear();for(var o=c.entities.length-1;0<=o;o--)c.entities[o].physics.position.id=c.entities[o].physics.id,c.tree.insert(c.entities[o].physics.position)},postUpdate:function(e){for(var t=c.entities.length-1;0<=t;t--)c.entities[t].postUpdate&&c.entities[t].postUpdate(e)},preDraw:function(e){for(var t=c.visibleEntities.length-1;0<=t;t--){var o=c.visibleEntities[t].id;c.entities[o].preDraw&&c.entities[o].preDraw(e)}},draw:function(e){for(var t=c.visibleEntities.length-1;0<=t;t--){var o=c.visibleEntities[t].id;c.entities[o].draw(e)}},getNeahrestEntity:function(e,t){var o;t=t||0;for(var i=Number.MAX_SAFE_INTEGER,n=c.visibleEntities.length-1;0<=n;n--){var a=c.visibleEntities[n].id,r=c.entities[a];if(e.physics.id!=a){var s={x:e.physics.position.x-r.physics.position.x,y:e.physics.position.y-r.physics.position.y},l=d.vectorLength(s);l<i&&l<=t&&(o=r,i=l)}}return o}},t.exports=c},{"../../vendors/QuadTree":22,"../core/theatre":6,"../core/util":8}],19:[function(e,t,o){!function(){var o=e("./../core/theatre"),i=e("./../entityPlugins/physics"),n=e("./../entityPlugins/lastPositions"),a=e("./../core/sound"),s=(e("./../helpers/physicsHelper"),e("./../core/ui"));if(s.datGui)var l=s.datGui.addFolder("WindParticles");t.exports=function(e){var r={Id:e,type:"WindParticle",physics:i({position:{x:0,y:0},height:5,width:5,canWorldColide:!1}),lastPositions:n({shouldDrawBodies:!1,color:{r:255,g:255,b:255}}),isAlive:!1,lifeTime:1500,createdTime:void 0,movementDirectionData:{isRunning:!1,vector:{x:0,y:0}},birth:function(){r.createdTime=Date.now(),r.isAlive=!0,a.playEffect("wind"),r.physics.position.x=o.canvasBoxLeft+Math.random()*o.stageCanvas.width,r.physics.position.y=o.canvasBoxTop+Math.random()*o.stageCanvas.height},update:function(e,t,o){var i=Date.now()-r.createdTime;if(i>r.lifeTime)r.isAlive=!1,r.lastPositions.clear();else{var n=i/(r.lifeTime/2)-1,a=150*(-1*Math.pow(n,2)+1);r.lastPositions.lineWidth=a/150*2,r.lastPositions.setTimeDelay=a,r.lastPositions.update(r.physics),r.physics.speed=o,r.movementDirectionData.vector.x=Math.random()-.5+t.x,r.movementDirectionData.vector.y=Math.random()-.5+t.y,r.physics.update(e,r.movementDirectionData)}},draw:function(e){r.lastPositions.draw(r.physics)}};if(s.datGui){var t=l.addFolder("WindParticle - "+r.Id);s.datGui.remember(r),t.add(r,"isAlive").listen(),t.add(r,"lifeTime").listen(),t.add(r,"type"),t.add(r.movementDirectionData.vector,"x").listen(),t.add(r.movementDirectionData.vector,"y").listen(),t.add(r.movementDirectionData,"isRunning").listen(),r.lastPositions.addToDatGuiFolder(t),r.physics.addToDatGuiFolder(t)}return r}}()},{"./../core/sound":5,"./../core/theatre":6,"./../core/ui":7,"./../entityPlugins/lastPositions":13,"./../entityPlugins/physics":14,"./../helpers/physicsHelper":16}],20:[function(a,r,e){!function(){var o=a("./../core/util"),t=a("./WindParticleFactory"),e=a("./../core/ui"),i={windParticles:[],windDirection:{x:1,y:0},windSpeed:4,maxAliveWindPartiles:10,init:function(){for(var e=0;e<10;e++)i.windParticles.push(t(e))},influenceEntityPhysic:function(e,t){.5<Math.random()&&(t.x+=i.windDirection.x*(1/e.mass)/1e3,t.y+=i.windDirection.y*(1/e.mass)/1e3)},update:function(e){if(.995<Math.random()&&(i.windSpeed=9*Math.random()+1),.95<Math.random()&&(i.windDirection.x=Math.random()-.5+i.windDirection.x,i.windDirection.y=Math.random()-.5+i.windDirection.y,o.setVectorToLengthOne(i.windDirection)),Math.random()>.995-i.windSpeed/100)for(var t=0;t<i.maxAliveWindPartiles;t++)if(!i.windParticles[t].isAlive){i.windParticles[t].birth();break}for(t=0;t<i.maxAliveWindPartiles;t++)i.windParticles[t].isAlive&&i.windParticles[t].update(e,i.windDirection,i.windSpeed)},draw:function(e){for(var t=0;t<i.maxAliveWindPartiles;t++)i.windParticles[t].isAlive&&i.windParticles[t].draw(e)}};if(i.init(),e.datGui){var n=e.datGui.addFolder("Wind");n.add(i.windDirection,"x").listen(),n.add(i.windDirection,"y").listen(),n.add(i,"windSpeed").listen(),n.add(i,"maxAliveWindPartiles")}r.exports=i}()},{"./../core/ui":7,"./../core/util":8,"./WindParticleFactory":19}],21:[function(e,t,o){var i,n,a;i=e("./../helpers/tilesHelper"),n=e("./../detectors/worldCollisionDetection"),a={map:void 0,worldWith:void 0,wolrdHeight:void 0,mapWithTileTypes:void 0,init:function(e,t,o){a.map=e,a.worldWith=o,a.wolrdHeight=t,a.mapWithTileTypes=i.calculateMapWithTileTypes(a.map,a.worldWith,a.wolrdHeight)},collsitionDetection:function(e,t){return n.collsitionDetection(e,a.mapWithTileTypes,a.worldWith,a.wolrdHeight,t)},draw:function(e){i.drawTiles(e,a.map,a.mapWithTileTypes,a.worldWith,a.wolrdHeight)}},t.exports=a},{"./../detectors/worldCollisionDetection":10,"./../helpers/tilesHelper":17}],22:[function(e,t,o){function a(e,t,o,i){var n;n=t?new s(e,0,o,i):new r(e,0,o,i),this.root=n}function s(e,t,o,i){this._bounds=e,this.children=[],this.nodes=[],i&&(this._maxChildren=i),o&&(this._maxDepth=o),t&&(this._depth=t)}function r(e,t,o,i){s.call(this,e,t,o,i),this._stuckChildren=[]}var i;i=this,a.prototype.root=null,a.prototype.insert=function(e){if(e instanceof Array)for(var t=e.length,o=0;o<t;o++)this.root.insert(e[o]);else this.root.insert(e)},a.prototype.clear=function(){this.root.clear()},a.prototype.retrieve=function(e){return this.root.retrieve(e).slice(0)},a.prototype.retrieveInBounds=function(e){var t=this.root.retrieveInBounds(e);return a._filterResults(t,e)},a._filterResults=function(e,t){var o=[];if(this.root instanceof r)for(var i=0;i<e.length;i++){var n=e[i];a._isBoundOverlappingBound(n,t)&&o.push(n)}else for(i=0;i<e.length;i++)n=e[i],a._isPointInsideBounds(n,t)&&o.push(n);return o},a._isPointInsideBounds=function(e,t){return e.x>=t.x&&e.x<=t.x+t.width&&e.y>=t.y&&e.y<=t.y+t.height},a._isBoundOverlappingBound=function(e,t){return!(e.x>t.x+t.width||t.x>e.x+e.width||e.y>t.y+t.height||t.y>e.y+e.height)},s.prototype.nodes=null,(s.prototype._classConstructor=s).prototype.children=null,s.prototype._bounds=null,s.prototype._depth=0,s.prototype._maxChildren=4,s.prototype._maxDepth=4,s.TOP_LEFT=0,s.TOP_RIGHT=1,s.BOTTOM_LEFT=2,s.BOTTOM_RIGHT=3,s.prototype.insert=function(e){if(this.nodes.length){var t=this._findIndex(e);this.nodes[t].insert(e)}else{this.children.push(e);var o=this.children.length;if(!(this._depth>=this._maxDepth)&&o>this._maxChildren){this.subdivide();for(var i=0;i<o;i++)this.insert(this.children[i]);this.children.length=0}}},s.prototype.retrieve=function(e){if(this.nodes.length){var t=this._findIndex(e);return this.nodes[t].retrieve(e)}return this.children},s.prototype.retrieveInBounds=function(e){var t=[];if(this.collidesWith(e))if(t=t.concat(this._stuckChildren),this.children.length)t=t.concat(this.children);else if(this.nodes.length)for(var o=0;o<this.nodes.length;o++)t=t.concat(this.nodes[o].retrieveInBounds(e));return t},s.prototype.collidesWith=function(e){var t=this._bounds,o=e;return!(t.x>o.x+o.width||o.x>t.x+t.width||t.y>o.y+o.height||o.y>t.y+t.height)},s.prototype._findIndex=function(e){var t=this._bounds,o=!(e.x>t.x+t.width/2),i=!(e.y>t.y+t.height/2),n=s.TOP_LEFT;return o?i||(n=s.BOTTOM_LEFT):n=i?s.TOP_RIGHT:s.BOTTOM_RIGHT,n},s.prototype.subdivide=function(){var e=this._depth+1,t=this._bounds.x,o=this._bounds.y,i=this._bounds.width/2|0,n=this._bounds.height/2|0,a=t+i,r=o+n;this.nodes[s.TOP_LEFT]=new this._classConstructor({x:t,y:o,width:i,height:n},e,this._maxDepth,this._maxChildren),this.nodes[s.TOP_RIGHT]=new this._classConstructor({x:a,y:o,width:i,height:n},e,this._maxDepth,this._maxChildren),this.nodes[s.BOTTOM_LEFT]=new this._classConstructor({x:t,y:r,width:i,height:n},e,this._maxDepth,this._maxChildren),this.nodes[s.BOTTOM_RIGHT]=new this._classConstructor({x:a,y:r,width:i,height:n},e,this._maxDepth,this._maxChildren)},s.prototype.clear=function(){this.children.length=0;for(var e=this.nodes.length,t=0;t<e;t++)this.nodes[t].clear();this.nodes.length=0},((r.prototype=new s)._classConstructor=r).prototype._stuckChildren=null,r.prototype._out=[],r.prototype.insert=function(e){if(this.nodes.length){var t=this._findIndex(e),o=this.nodes[t];e.x>=o._bounds.x&&e.x+e.width<=o._bounds.x+o._bounds.width&&e.y>=o._bounds.y&&e.y+e.height<=o._bounds.y+o._bounds.height?this.nodes[t].insert(e):this._stuckChildren.push(e)}else{this.children.push(e);var i=this.children.length;if(!(this._depth>=this._maxDepth)&&i>this._maxChildren){this.subdivide();for(var n=0;n<i;n++)this.insert(this.children[n]);this.children.length=0}}},r.prototype.getChildren=function(){return this.children.concat(this._stuckChildren)},r.prototype.retrieve=function(e){var t=this._out;if(t.length=0,this.nodes.length){var o=this._findIndex(e);t.push.apply(t,this.nodes[o].retrieve(e))}return t.push.apply(t,this._stuckChildren),t.push.apply(t,this.children),t},r.prototype.clear=function(){this._stuckChildren.length=0,this.children.length=0;var e=this.nodes.length;if(e){for(var t=0;t<e;t++)this.nodes[t].clear();this.nodes.length=0}},i.QuadTree=a},{}],23:[function(e,t,i){!function(){"use strict";var p=null,r=!0,a=!1;if(function(){try{"undefined"!=typeof AudioContext?p=new AudioContext:"undefined"!=typeof webkitAudioContext?p=new webkitAudioContext:r=!1}catch(e){r=!1}if(!r)if("undefined"!=typeof Audio)try{new Audio}catch(e){a=!0}else a=!0}(),r){var s=void 0===p.createGain?p.createGainNode():p.createGain();s.gain.value=1,s.connect(p.destination)}function e(){this.init()}e.prototype={init:function(){var e=this||y;return e._codecs={},e._howls=[],e._muted=!1,e._volume=1,e.iOSAutoEnable=!0,e.noAudio=a,e.usingWebAudio=r,e.ctx=p,a||e._setupCodecs(),e},volume:function(e){var t=this||y;if(void 0!==(e=parseFloat(e))&&0<=e&&e<=1){t._volume=e,r&&(s.gain.value=e);for(var o=0;o<t._howls.length;o++)if(!t._howls[o]._webAudio)for(var i=t._howls[o]._getSoundIds(),n=0;n<i.length;n++){var a=t._howls[o]._soundById(i[n]);a&&a._node&&(a._node.volume=a._volume*e)}return t}return t._volume},mute:function(e){var t=this||y;t._muted=e,r&&(s.gain.value=e?0:t._volume);for(var o=0;o<t._howls.length;o++)if(!t._howls[o]._webAudio)for(var i=t._howls[o]._getSoundIds(),n=0;n<i.length;n++){var a=t._howls[o]._soundById(i[n]);a&&a._node&&(a._node.muted=!!e||a._muted)}return t},codecs:function(e){return(this||y)._codecs[e]},_setupCodecs:function(){var e=this||y,t=new Audio,o=t.canPlayType("audio/mpeg;").replace(/^no$/,""),i=/OPR\//.test(navigator.userAgent);return e._codecs={mp3:!(i||!o&&!t.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!o,opus:!!t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!t.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/m4a;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(t.canPlayType("audio/x-mp4;")||t.canPlayType("audio/mp4;")||t.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")},e},_enableiOSAudio:function(){var o=this||y;if(!p||!o._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){o._iOSEnabled=!1;var i=function(){var e=p.createBuffer(1,1,22050),t=p.createBufferSource();t.buffer=e,t.connect(p.destination),void 0===t.start?t.noteOn(0):t.start(0),setTimeout(function(){t.playbackState!==t.PLAYING_STATE&&t.playbackState!==t.FINISHED_STATE||(o._iOSEnabled=!0,o.iOSAutoEnable=!1,document.removeEventListener("touchend",i,!1))},0)};return document.addEventListener("touchend",i,!1),o}}};function t(e){return e.src&&0!==e.src.length?void this.init(e):void console.error("An array of source files must be passed with any new Howl.")}var y=new e;t.prototype={init:function(e){var t=this;return t._autoplay=e.autoplay||!1,t._ext=e.ext||null,t._html5=e.html5||!1,t._muted=e.mute||!1,t._loop=e.loop||!1,t._pool=e.pool||5,t._preload="boolean"!=typeof e.preload||e.preload,t._rate=e.rate||1,t._sprite=e.sprite||{},t._src="string"!=typeof e.src?e.src:[e.src],t._volume=void 0!==e.volume?e.volume:1,t._duration=0,t._loaded=!1,t._sounds=[],t._endTimers={},t._onend=e.onend?[{fn:e.onend}]:[],t._onfaded=e.onfaded?[{fn:e.onfaded}]:[],t._onload=e.onload?[{fn:e.onload}]:[],t._onloaderror=e.onloaderror?[{fn:e.onloaderror}]:[],t._onpause=e.onpause?[{fn:e.onpause}]:[],t._onplay=e.onplay?[{fn:e.onplay}]:[],t._onstop=e.onstop?[{fn:e.onstop}]:[],t._webAudio=r&&!t._html5,void 0!==p&&p&&y.iOSAutoEnable&&y._enableiOSAudio(),y._howls.push(t),t._preload&&t.load(),t},load:function(){var e=this,t=null;if(!a){"string"==typeof e._src&&(e._src=[e._src]);for(var o=0;o<e._src.length;o++){var i,n;if(i=e._ext&&e._ext[o]?e._ext[o]:(n=e._src[o],(i=(i=/^data:audio\/([^;,]+);/i.exec(n))||/\.([^.]+)$/.exec(n.split("?",1)[0]))&&i[1].toLowerCase()),y.codecs(i)){t=e._src[o];break}}return t?(e._src=t,new l(e),e._webAudio&&c(e),e):void e._emit("loaderror")}e._emit("loaderror")},play:function(e){var t=this,o=arguments,i=null;if("number"==typeof e)i=e,e=null;else if(void 0===e){e="__default";for(var n=0,a=0;a<t._sounds.length;a++)t._sounds[a]._paused&&!t._sounds[a]._ended&&(n++,i=t._sounds[a]._id);1===n?e=null:i=null}var r=i?t._soundById(i):t._inactiveSound();if(!r)return null;if(i&&!e&&(e=r._sprite||"__default"),!t._loaded&&!t._sprite[e])return t.once("load",function(){t.play(t._soundById(r._id)?r._id:void 0)}),r._id;if(i&&!r._paused)return r._id;var s=0<r._seek?r._seek:t._sprite[e][0]/1e3,l=(t._sprite[e][0]+t._sprite[e][1])/1e3-s,d=1e3*l/Math.abs(r._rate);t._endTimers[r._id]=setTimeout(t._ended.bind(t,r),d),r._paused=!1,r._ended=!1,r._sprite=e,r._seek=s,r._start=t._sprite[e][0]/1e3,r._stop=(t._sprite[e][0]+t._sprite[e][1])/1e3,r._loop=!(!r._loop&&!t._sprite[e][2]);var c=r._node;if(t._webAudio){var u=function(){t._refreshBuffer(r);var e=r._muted||t._muted?0:r._volume*y.volume();c.gain.setValueAtTime(e,p.currentTime),r._playStart=p.currentTime,void 0===c.bufferSource.start?r._loop?c.bufferSource.noteGrainOn(0,s,86400):c.bufferSource.noteGrainOn(0,s,l):r._loop?c.bufferSource.start(0,s,86400):c.bufferSource.start(0,s,l),t._endTimers[r._id]||(t._endTimers[r._id]=setTimeout(t._ended.bind(t,r),d)),o[1]||setTimeout(function(){t._emit("play",r._id)},0)};t._loaded?u():(t.once("load",u),t._clearTimer(r._id))}else{var h=function(){c.currentTime=s,c.muted=r._muted||t._muted||y._muted||c.muted,c.volume=r._volume*y.volume(),c.playbackRate=r._rate,setTimeout(function(){c.play(),o[1]||t._emit("play",r._id)},0)};if(4===c.readyState||!c.readyState&&navigator.isCocoonJS)h();else{var f=function(){t._endTimers[r._id]=setTimeout(t._ended.bind(t,r),d),h(),c.removeEventListener("canplaythrough",f,!1)};c.addEventListener("canplaythrough",f,!1),t._clearTimer(r._id)}}return r._id},pause:function(e){var t=this;if(!t._loaded)return t.once("play",function(){t.pause(e)}),t;for(var o=t._getSoundIds(e),i=0;i<o.length;i++){t._clearTimer(o[i]);var n=t._soundById(o[i]);if(n&&!n._paused){if(n._seek=t.seek(o[i]),n._paused=!0,t._webAudio){if(!n._node.bufferSource)return t;void 0===n._node.bufferSource.stop?n._node.bufferSource.noteOff(0):n._node.bufferSource.stop(0),n._node.bufferSource=null}else isNaN(n._node.duration)||n._node.pause();arguments[1]||t._emit("pause",n._id)}}return t},stop:function(e){var t=this;if(!t._loaded)return void 0!==t._sounds[0]._sprite&&t.once("play",function(){t.stop(e)}),t;for(var o=t._getSoundIds(e),i=0;i<o.length;i++){t._clearTimer(o[i]);var n=t._soundById(o[i]);if(n&&!n._paused){if(n._seek=n._start||0,n._paused=!0,n._ended=!0,t._webAudio&&n._node){if(!n._node.bufferSource)return t;void 0===n._node.bufferSource.stop?n._node.bufferSource.noteOff(0):n._node.bufferSource.stop(0),n._node.bufferSource=null}else n._node&&!isNaN(n._node.duration)&&(n._node.pause(),n._node.currentTime=n._start||0);t._emit("stop",n._id)}}return t},mute:function(e,t){var o=this;if(!o._loaded)return o.once("play",function(){o.mute(e,t)}),o;if(void 0===t){if("boolean"!=typeof e)return o._muted;o._muted=e}for(var i=o._getSoundIds(t),n=0;n<i.length;n++){var a=o._soundById(i[n]);a&&(a._muted=e,o._webAudio&&a._node?a._node.gain.setValueAtTime(e?0:a._volume*y.volume(),p.currentTime):a._node&&(a._node.muted=!!y._muted||e))}return o},volume:function(){var e,t,o,i=this,n=arguments;if(0===n.length)return i._volume;1===n.length?0<=i._getSoundIds().indexOf(n[0])?t=parseInt(n[0],10):e=parseFloat(n[0]):2===n.length&&(e=parseFloat(n[0]),t=parseInt(n[1],10));if(!(void 0!==e&&0<=e&&e<=1))return(o=t?i._soundById(t):i._sounds[0])?o._volume:0;if(!i._loaded)return i.once("play",function(){i.volume.apply(i,n)}),i;void 0===t&&(i._volume=e),t=i._getSoundIds(t);for(var a=0;a<t.length;a++)(o=i._soundById(t[a]))&&(o._volume=e,i._webAudio&&o._node&&!o._muted?o._node.gain.setValueAtTime(e*y.volume(),p.currentTime):o._node&&!o._muted&&(o._node.volume=e*y.volume()));return i},fade:function(e,i,t,o){var n=this;if(!n._loaded)return n.once("play",function(){n.fade(e,i,t,o)}),n;n.volume(e,o);for(var a=n._getSoundIds(o),r=0;r<a.length;r++){var s=n._soundById(a[r]);if(s)if(n._webAudio&&!s._muted){var l=p.currentTime,d=l+t/1e3;s._volume=e,s._node.gain.setValueAtTime(e,l),s._node.gain.linearRampToValueAtTime(i,d),setTimeout(function(e,t){setTimeout(function(){t._volume=i,n._emit("faded",e)},0<d-p.currentTime?Math.ceil(1e3*(d-p.currentTime)):0)}.bind(n,a[r],s),t)}else{var c=Math.abs(e-i),u=i<e?"out":"in",h=t/(c/.01);!function(){var t=e,o=setInterval(function(e){t+="in"==u?.01:-.01,t=Math.max(0,t),t=Math.min(1,t),t=Math.round(100*t)/100,n.volume(t,e),t===i&&(clearInterval(o),n._emit("faded",e))}.bind(n,a[r]),h)}()}}return n},loop:function(){var e,t,o,i=this,n=arguments;if(0===n.length)return i._loop;if(1===n.length){if("boolean"!=typeof n[0])return!!(o=i._soundById(parseInt(n[0],10)))&&o._loop;e=n[0],i._loop=e}else 2===n.length&&(e=n[0],t=parseInt(n[1],10));for(var a=i._getSoundIds(t),r=0;r<a.length;r++)(o=i._soundById(a[r]))&&(o._loop=e,i._webAudio&&o._node&&o._node.bufferSource&&(o._node.bufferSource.loop=e));return i},rate:function(){var e,t,o,i=this,n=arguments;if(0===n.length)t=i._sounds[0]._id;else if(1===n.length){0<=i._getSoundIds().indexOf(n[0])?t=parseInt(n[0],10):e=parseFloat(n[0])}else 2===n.length&&(e=parseFloat(n[0]),t=parseInt(n[1],10));if("number"!=typeof e)return(o=i._soundById(t))?o._rate:i._rate;if(!i._loaded)return i.once("load",function(){i.rate.apply(i,n)}),i;void 0===t&&(i._rate=e),t=i._getSoundIds(t);for(var a=0;a<t.length;a++)if(o=i._soundById(t[a])){o._rate=e,i._webAudio&&o._node&&o._node.bufferSource?o._node.bufferSource.playbackRate.value=e:o._node&&(o._node.playbackRate=e);var r=i.seek(t[a]),s=1e3*((i._sprite[o._sprite][0]+i._sprite[o._sprite][1])/1e3-r)/Math.abs(o._rate);i._clearTimer(t[a]),i._endTimers[t[a]]=setTimeout(i._ended.bind(i,o),s)}return i},seek:function(){var e,t,o=this,i=arguments;if(0===i.length)t=o._sounds[0]._id;else if(1===i.length){0<=o._getSoundIds().indexOf(i[0])?t=parseInt(i[0],10):(t=o._sounds[0]._id,e=parseFloat(i[0]))}else 2===i.length&&(e=parseFloat(i[0]),t=parseInt(i[1],10));if(void 0===t)return o;if(!o._loaded)return o.once("load",function(){o.seek.apply(o,i)}),o;var n=o._soundById(t);if(n){if(!(0<=e))return o._webAudio?n._seek+(o.playing(t)?p.currentTime-n._playStart:0):n._node.currentTime;var a=o.playing(t);a&&o.pause(t,!0),n._seek=e,o._clearTimer(t),a&&o.play(t,!0)}return o},playing:function(e){var t=this._soundById(e)||this._sounds[0];return!!t&&!t._paused},duration:function(){return this._duration},unload:function(){for(var e=this,t=e._sounds,o=0;o<t.length;o++){t[o]._paused||(e.stop(t[o]._id),e._emit("end",t[o]._id)),e._webAudio||(t[o]._node.src="",t[o]._node.removeEventListener("error",t[o]._errorFn,!1),t[o]._node.removeEventListener("canplaythrough",t[o]._loadFn,!1)),delete t[o]._node,e._clearTimer(t[o]._id);var i=y._howls.indexOf(e);0<=i&&y._howls.splice(i,1)}return d&&delete d[e._src],e=null},on:function(e,t,o,i){var n=this["_on"+e];return"function"==typeof t&&n.push(i?{id:o,fn:t,once:i}:{id:o,fn:t}),this},off:function(e,t,o){var i=this["_on"+e];if(t){for(var n=0;n<i.length;n++)if(t===i[n].fn&&o===i[n].id){i.splice(n,1);break}}else this["on"+e]=[];return this},once:function(e,t,o){return this.on(e,t,o,1),this},_emit:function(e,t,o){for(var i=this["_on"+e],n=0;n<i.length;n++)i[n].id&&i[n].id!==t||(setTimeout(function(e){e.call(this,t,o)}.bind(this,i[n].fn),0),i[n].once&&this.off(e,i[n].fn,t));return this},_ended:function(e){var t=this,o=e._sprite,i=!(!e._loop&&!t._sprite[o][2]);if(t._emit("end",e._id),!t._webAudio&&i&&t.stop(e._id).play(e._id),t._webAudio&&i){t._emit("play",e._id),e._seek=e._start||0,e._playStart=p.currentTime;var n=1e3*(e._stop-e._start)/Math.abs(e._rate);t._endTimers[e._id]=setTimeout(t._ended.bind(t,e),n)}return t._webAudio&&!i&&(e._paused=!0,e._ended=!0,e._seek=e._start||0,t._clearTimer(e._id),e._node.bufferSource=null),t._webAudio||i||t.stop(e._id),t},_clearTimer:function(e){return this._endTimers[e]&&(clearTimeout(this._endTimers[e]),delete this._endTimers[e]),this},_soundById:function(e){for(var t=0;t<this._sounds.length;t++)if(e===this._sounds[t]._id)return this._sounds[t];return null},_inactiveSound:function(){var e=this;e._drain();for(var t=0;t<e._sounds.length;t++)if(e._sounds[t]._ended)return e._sounds[t].reset();return new l(e)},_drain:function(){var e=this,t=e._pool,o=0,i=0;if(!(e._sounds.length<t)){for(i=0;i<e._sounds.length;i++)e._sounds[i]._ended&&o++;for(i=e._sounds.length-1;0<=i;i--){if(o<=t)return;e._sounds[i]._ended&&(e._webAudio&&e._sounds[i]._node&&e._sounds[i]._node.disconnect(0),e._sounds.splice(i,1),o--)}}},_getSoundIds:function(e){if(void 0!==e)return[e];for(var t=[],o=0;o<this._sounds.length;o++)t.push(this._sounds[o]._id);return t},_refreshBuffer:function(e){return e._node.bufferSource=p.createBufferSource(),e._node.bufferSource.buffer=d[this._src],e._node.bufferSource.connect(e._panner?e._panner:e._node),e._node.bufferSource.loop=e._loop,e._loop&&(e._node.bufferSource.loopStart=e._start||0,e._node.bufferSource.loopEnd=e._stop),e._node.bufferSource.playbackRate.value=this._rate,this}};var l=function(e){this._parent=e,this.init()};if(l.prototype={init:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._muted=t._muted,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._id=Math.round(Date.now()*Math.random()),t._sounds.push(e),e.create(),e},create:function(){var e=this,t=e._parent,o=y._muted||e._muted||e._parent._muted?0:e._volume*y.volume();return t._webAudio?(e._node=void 0===p.createGain?p.createGainNode():p.createGain(),e._node.gain.setValueAtTime(o,p.currentTime),e._node.paused=!0,e._node.connect(s)):(e._node=new Audio,e._errorFn=e._errorListener.bind(e),e._node.addEventListener("error",e._errorFn,!1),e._loadFn=e._loadListener.bind(e),e._node.addEventListener("canplaythrough",e._loadFn,!1),e._node.src=t._src,e._node.preload="auto",e._node.volume=o,e._node.load()),e},reset:function(){var e=this,t=e._parent;return e._muted=t._muted,e._loop=t._loop,e._volume=t._volume,e._muted=t._muted,e._rate=t._rate,e._seek=0,e._paused=!0,e._ended=!0,e._sprite=null,e._id=Math.round(Date.now()*Math.random()),e},_errorListener:function(){var e=this;e._node.error&&4===e._node.error.code&&(y.noAudio=!0),e._parent._emit("loaderror",e._id,e._node.error?e._node.error.code:0),e._node.removeEventListener("error",e._errorListener,!1)},_loadListener:function(){var e=this._parent;e._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e._emit("load")),e._autoplay&&e.play(),this._node.removeEventListener("canplaythrough",this._loadFn,!1)}},r)var d={},c=function(e){var t=e._src;if(d[t])return e._duration=d[t].duration,void f(e);if(/^data:[^;]+;base64,/.test(t)){window.atob=window.atob||function(e){for(var t,o,i=String(e).replace(/=+$/,""),n=0,a=0,r="";o=i.charAt(a++);~o&&(t=n%4?64*t+o:o,n++%4)&&(r+=String.fromCharCode(255&t>>(-2*n&6))))o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(o);return r};for(var o=atob(t.split(",")[1]),i=new Uint8Array(o.length),n=0;n<o.length;++n)i[n]=o.charCodeAt(n);h(i.buffer,e)}else{var a=new XMLHttpRequest;a.open("GET",t,!0),a.responseType="arraybuffer",a.onload=function(){h(a.response,e)},a.onerror=function(){e._webAudio&&(e._html5=!0,e._webAudio=!1,e._sounds=[],delete d[t],e.load())},u(a)}},u=function(t){try{t.send()}catch(e){t.onerror()}},h=function(e,t){p.decodeAudioData(e,function(e){e&&(d[t._src]=e,f(t,e))},function(){t._emit("loaderror")})},f=function(e,t){t&&!e._duration&&(e._duration=t.duration),0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),e._loaded||(e._loaded=!0,e._emit("load")),e._autoplay&&e.play()};void 0!==i&&(i.Howler=y,i.Howl=t),"undefined"!=typeof window&&(window.HowlerGlobal=e,window.Howler=y,window.Howl=t,window.Sound=l)}(),function(){"use strict";var i,n,t,e;HowlerGlobal.prototype.init=(e=HowlerGlobal.prototype.init,function(){return this._pos=[0,0,0],this._orientation=[0,0,-1,0,1,0],this._velocity=[0,0,0],this._listenerAttr={dopplerFactor:1,speedOfSound:343.3},e.call(this,o)}),HowlerGlobal.prototype.pos=function(e,t,o){var i=this;return i.ctx&&i.ctx.listener?(t="number"!=typeof t?i._pos[1]:t,o="number"!=typeof o?i._pos[2]:o,"number"!=typeof e?i._pos:(i._pos=[e,t,o],i.ctx.listener.setPosition(i._pos[0],i._pos[1],i._pos[2]),i)):i},HowlerGlobal.prototype.orientation=function(e,t,o,i,n,a){var r=this;if(!r.ctx||!r.ctx.listener)return r;var s=r._orientation;return t="number"!=typeof t?s[1]:t,o="number"!=typeof o?s[2]:o,i="number"!=typeof i?s[3]:i,n="number"!=typeof n?s[4]:n,a="number"!=typeof a?s[5]:a,"number"!=typeof e?s:(r._orientation=[e,t,o,i,n,a],r.ctx.listener.setOrientation(s[0],s[1],s[2],s[3],s[4],s[5]),r)},HowlerGlobal.prototype.velocity=function(e,t,o){var i=this;return i.ctx&&i.ctx.listener?(t="number"!=typeof t?i._velocity[1]:t,o="number"!=typeof o?i._velocity[2]:o,"number"!=typeof e?i._velocity:(i._velocity=[e,t,o],i.ctx.listener.setVelocity(i._velocity[0],i._velocity[1],i._velocity[2]),i)):i},HowlerGlobal.prototype.listenerAttr=function(e){var t=this;if(!t.ctx||!t.ctx.listener)return t;var o=t._listenerAttr;return e?(t._listenerAttr={dopplerFactor:void 0!==e.dopplerFactor?e.dopplerFactor:o.dopplerFactor,speedOfSound:void 0!==e.speedOfSound?e.speedOfSound:o.speedOfSound},t.ctx.listener.dopplerFactor=o.dopplerFactor,t.ctx.listener.speedOfSound=o.speedOfSound,t):o},Howl.prototype.init=(t=Howl.prototype.init,function(e){return this._orientation=e.orientation||[1,0,0],this._pos=e.pos||null,this._velocity=e.velocity||[0,0,0],this._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOUterAngle:void 0!==e.coneOUterAngle?e.coneOUterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},t.call(this,e)}),Howl.prototype.pos=function(e,t,o,i){var n=this;if(!n._webAudio)return n;if(!n._loaded)return n.once("play",function(){n.pos(e,t,o,i)}),n;if(t="number"!=typeof t?0:t,o="number"!=typeof o?-.5:o,void 0===i){if("number"!=typeof e)return n._pos;n._pos=[e,t,o]}for(var a=n._getSoundIds(i),r=0;r<a.length;r++){var s=n._soundById(a[r]);if(s){if("number"!=typeof e)return s._pos;s._pos=[e,t,o],s._node&&(s._panner||d(s),s._panner.setPosition(e,t,o))}}return n},Howl.prototype.orientation=function(e,t,o,i){var n=this;if(!n._webAudio)return n;if(!n._loaded)return n.once("play",function(){n.orientation(e,t,o,i)}),n;if(t="number"!=typeof t?n._orientation[1]:t,o="number"!=typeof o?n._orientation[1]:o,void 0===i){if("number"!=typeof e)return n._orientation;n._orientation=[e,t,o]}for(var a=n._getSoundIds(i),r=0;r<a.length;r++){var s=n._soundById(a[r]);if(s){if("number"!=typeof e)return s._orientation;s._orientation=[e,t,o],s._node&&(s._panner||d(s),s._panner.setOrientation(e,t,o))}}return n},Howl.prototype.velocity=function(e,t,o,i){var n=this;if(!n._webAudio)return n;if(!n._loaded)return n.once("play",function(){n.velocity(e,t,o,i)}),n;if(t="number"!=typeof t?n._velocity[1]:t,o="number"!=typeof o?n._velocity[1]:o,void 0===i){if("number"!=typeof e)return n._velocity;n._velocity=[e,t,o]}for(var a=n._getSoundIds(i),r=0;r<a.length;r++){var s=n._soundById(a[r]);if(s){if("number"!=typeof e)return s._velocity;s._velocity=[e,t,o],s._node&&(s._panner||d(s),s._panner.setVelocity(e,t,o))}}return n},Howl.prototype.pannerAttr=function(){var e,t,o,i=this,n=arguments;if(!i._webAudio)return i;if(0===n.length)return i._pannerAttr;if(1===n.length){if("object"!=typeof n[0])return(o=i._soundById(parseInt(n[0],10)))?o._pannerAttr:i._pannerAttr;e=n[0],void 0===t&&(i._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:i._coneInnerAngle,coneOUterAngle:void 0!==e.coneOUterAngle?e.coneOUterAngle:i._coneOUterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:i._coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:i._distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:i._maxDistance,panningModel:void 0!==e.panningModel?e.panningModel:i._panningModel,refDistance:void 0!==e.refDistance?e.refDistance:i._refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:i._rolloffFactor})}else 2===n.length&&(e=n[0],t=parseInt(n[1],10));for(var a=i._getSoundIds(t),r=0;r<a.length;r++)if(o=i._soundById(a[r])){var s=o._pannerAttr;s={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:s.coneInnerAngle,coneOUterAngle:void 0!==e.coneOUterAngle?e.coneOUterAngle:s.coneOUterAngle,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:s.coneOuterGain,distanceModel:void 0!==e.distanceModel?e.distanceModel:s.distanceModel,maxDistance:void 0!==e.maxDistance?e.maxDistance:s.maxDistance,panningModel:void 0!==e.panningModel?e.panningModel:s.panningModel,refDistance:void 0!==e.refDistance?e.refDistance:s.refDistance,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:s.rolloffFactor};var l=o._panner;l?(l.coneInnerAngle=s.coneInnerAngle,l.coneOUterAngle=s.coneOUterAngle,l.coneOuterGain=s.coneOuterGain,l.distanceModel=s.distanceModel,l.maxDistance=s.maxDistance,l.panningModel=s.panningModel,l.refDistance=s.refDistance,l.rolloffFactor=s.rolloffFactor):(o._pos||(o._pos=i._pos||[0,0,-.5]),d(o))}return i},Sound.prototype.init=(n=Sound.prototype.init,function(){var e=this,t=e._parent;e._orientation=t._orientation,e._pos=t._pos,e._velocity=t._velocity,e._pannerAttr=t._pannerAttr,n.call(this),e._pos&&t.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}),Sound.prototype.reset=(i=Sound.prototype.reset,function(){var e=this,t=e._parent;return e._orientation=t._orientation,e._pos=t._pos,e._velocity=t._velocity,e._pannerAttr=t._pannerAttr,i.call(this)});var d=function(e){e._panner=Howler.ctx.createPanner(),e._panner.coneInnerAngle=e._pannerAttr.coneInnerAngle,e._panner.coneOUterAngle=e._pannerAttr.coneOUterAngle,e._panner.coneOuterGain=e._pannerAttr.coneOuterGain,e._panner.distanceModel=e._pannerAttr.distanceModel,e._panner.maxDistance=e._pannerAttr.maxDistance,e._panner.panningModel=e._pannerAttr.panningModel,e._panner.refDistance=e._pannerAttr.refDistance,e._panner.rolloffFactor=e._pannerAttr.rolloffFactor,e._panner.setPosition(e._pos[0],e._pos[1],e._pos[2]),e._panner.setOrientation(e._orientation[0],e._orientation[1],e._orientation[2]),e._panner.setVelocity(e._velocity[0],e._velocity[1],e._velocity[2]),e._panner.connect(e._node),e._paused||e._parent.pause(e._id).play(e._id)}}()},{}],24:[function(e,t,o){"object"==typeof t&&(t.exports=function(){function a(e,t,o){return(e=document.createElement(e)).id=t,e.style.cssText=o,e}function e(e,t,o){var i=a("div",e,"padding:0 0 3px 3px;text-align:left;background:"+o),n=a("div",e+"Text","font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px;color:"+t);for(n.innerHTML=e.toUpperCase(),i.appendChild(n),e=a("div",e+"Graph","width:74px;height:30px;background:"+t),i.appendChild(e),t=0;t<74;t++)e.appendChild(a("span","","width:1px;height:30px;float:left;opacity:0.9;background:"+o));return i}function t(e){for(var t=c.children,o=0;o<t.length;o++)t[o].style.display=o===e?"block":"none";d=e}function i(e,t){e.appendChild(e.firstChild).style.height=Math.min(30,30-30*t)+"px"}var n=self.performance&&self.performance.now?self.performance.now.bind(performance):Date.now,r=n(),s=r,l=0,d=0,c=a("div","stats","width:80px;opacity:0.9;cursor:pointer");c.addEventListener("mousedown",function(e){e.preventDefault(),t(++d%c.children.length)},!1);var u=0,h=1/0,f=0,p=(o=e("fps","#0ff","#002")).children[0],y=o.children[1];c.appendChild(o);var v=0,_=1/0,g=0,m=(o=e("ms","#0f0","#020")).children[0],x=o.children[1];if(c.appendChild(o),self.performance&&self.performance.memory){var o,w=0,T=1/0,b=0,S=(o=e("mb","#f08","#201")).children[0],M=o.children[1];c.appendChild(o)}return t(d),{REVISION:14,domElement:c,setMode:t,begin:function(){r=n()},end:function(){var e=n();if(v=e-r,_=Math.min(_,v),g=Math.max(g,v),m.textContent=(0|v)+" MS ("+(0|_)+"-"+(0|g)+")",i(x,v/200),l++,s+1e3<e&&(u=Math.round(1e3*l/(e-s)),h=Math.min(h,u),f=Math.max(f,u),p.textContent=u+" FPS ("+h+"-"+f+")",i(y,u/100),s=e,void(l=0)!==w)){var t=performance.memory.usedJSHeapSize,o=performance.memory.jsHeapSizeLimit;w=Math.round(954e-9*t),T=Math.min(T,w),b=Math.max(b,w),S.textContent=w+" MB ("+T+"-"+b+")",i(M,t/o)}return e},update:function(){r=this.end()}}})},{}]},{},[15])(15)});
//# sourceMappingURL=gameTurf-min.js.map
